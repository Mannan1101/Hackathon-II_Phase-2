(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,67034,(e,t,r)=>{var i={675:function(e,t){"use strict";t.byteLength=function(e){var t=d(e),r=t[0],i=t[1];return(r+i)*3/4-i},t.toByteArray=function(e){var t,r,n=d(e),s=n[0],a=n[1],p=new o((s+a)*3/4-a),h=0,u=a>0?s-4:s;for(r=0;r<u;r+=4)t=i[e.charCodeAt(r)]<<18|i[e.charCodeAt(r+1)]<<12|i[e.charCodeAt(r+2)]<<6|i[e.charCodeAt(r+3)],p[h++]=t>>16&255,p[h++]=t>>8&255,p[h++]=255&t;return 2===a&&(t=i[e.charCodeAt(r)]<<2|i[e.charCodeAt(r+1)]>>4,p[h++]=255&t),1===a&&(t=i[e.charCodeAt(r)]<<10|i[e.charCodeAt(r+1)]<<4|i[e.charCodeAt(r+2)]>>2,p[h++]=t>>8&255,p[h++]=255&t),p},t.fromByteArray=function(e){for(var t,i=e.length,o=i%3,n=[],s=0,a=i-o;s<a;s+=16383)n.push(function(e,t,i){for(var o,n=[],s=t;s<i;s+=3)o=(e[s]<<16&0xff0000)+(e[s+1]<<8&65280)+(255&e[s+2]),n.push(r[o>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return n.join("")}(e,s,s+16383>a?a:s+16383));return 1===o?n.push(r[(t=e[i-1])>>2]+r[t<<4&63]+"=="):2===o&&n.push(r[(t=(e[i-2]<<8)+e[i-1])>>10]+r[t>>4&63]+r[t<<2&63]+"="),n.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,a=n.length;s<a;++s)r[s]=n[s],i[n.charCodeAt(s)]=s;function d(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var i=r===t?0:4-r%4;return[r,i]}i[45]=62,i[95]=63},72:function(e,t,r){"use strict";var i=r(675),o=r(783),n="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function s(e){if(e>0x7fffffff)throw RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,a.prototype),t}function a(e,t,r){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return h(e)}return d(e,t,r)}function d(e,t,r){if("string"==typeof e){var i=e,o=t;if(("string"!=typeof o||""===o)&&(o="utf8"),!a.isEncoding(o))throw TypeError("Unknown encoding: "+o);var n=0|c(i,o),d=s(n),p=d.write(i,o);return p!==n&&(d=d.slice(0,p)),d}if(ArrayBuffer.isView(e))return u(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(z(e,ArrayBuffer)||e&&z(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(z(e,SharedArrayBuffer)||e&&z(e.buffer,SharedArrayBuffer)))return function(e,t,r){var i;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(i=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),a.prototype),i}(e,t,r);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');var h=e.valueOf&&e.valueOf();if(null!=h&&h!==e)return a.from(h,t,r);var f=function(e){if(a.isBuffer(e)){var t=0|l(e.length),r=s(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||function(e){return e!=e}(e.length)?s(0):u(e):"Buffer"===e.type&&Array.isArray(e.data)?u(e.data):void 0}(e);if(f)return f;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return a.from(e[Symbol.toPrimitive]("string"),t,r);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function p(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function h(e){return p(e),s(e<0?0:0|l(e))}function u(e){for(var t=e.length<0?0:0|l(e.length),r=s(t),i=0;i<t;i+=1)r[i]=255&e[i];return r}t.Buffer=a,t.SlowBuffer=function(e){return+e!=e&&(e=0),a.alloc(+e)},t.INSPECT_MAX_BYTES=50,t.kMaxLength=0x7fffffff,a.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),a.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),a.poolSize=8192,a.from=function(e,t,r){return d(e,t,r)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array),a.alloc=function(e,t,r){return(p(e),e<=0)?s(e):void 0!==t?"string"==typeof r?s(e).fill(t,r):s(e).fill(t):s(e)},a.allocUnsafe=function(e){return h(e)},a.allocUnsafeSlow=function(e){return h(e)};function l(e){if(e>=0x7fffffff)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function c(e,t){if(a.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||z(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===r)return 0;for(var o=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return S(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return I(e).length;default:if(o)return i?-1:S(e).length;t=(""+t).toLowerCase(),o=!0}}function f(e,t,r){var o,n,s,a=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0||(r>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,r){var i=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>i)&&(r=i);for(var o="",n=t;n<r;++n)o+=E[e[n]];return o}(this,t,r);case"utf8":case"utf-8":return g(this,t,r);case"ascii":return function(e,t,r){var i="";r=Math.min(e.length,r);for(var o=t;o<r;++o)i+=String.fromCharCode(127&e[o]);return i}(this,t,r);case"latin1":case"binary":return function(e,t,r){var i="";r=Math.min(e.length,r);for(var o=t;o<r;++o)i+=String.fromCharCode(e[o]);return i}(this,t,r);case"base64":return o=this,n=t,s=r,0===n&&s===o.length?i.fromByteArray(o):i.fromByteArray(o.slice(n,s));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r){for(var i=e.slice(t,r),o="",n=0;n<i.length;n+=2)o+=String.fromCharCode(i[n]+256*i[n+1]);return o}(this,t,r);default:if(a)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),a=!0}}function N(e,t,r){var i=e[t];e[t]=e[r],e[r]=i}function m(e,t,r,i,o){var n;if(0===e.length)return -1;if("string"==typeof r?(i=r,r=0):r>0x7fffffff?r=0x7fffffff:r<-0x80000000&&(r=-0x80000000),(n=r*=1)!=n&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length)if(o)return -1;else r=e.length-1;else if(r<0)if(!o)return -1;else r=0;if("string"==typeof t&&(t=a.from(t,i)),a.isBuffer(t))return 0===t.length?-1:y(e,t,r,i,o);if("number"==typeof t){if(t&=255,"function"==typeof Uint8Array.prototype.indexOf)if(o)return Uint8Array.prototype.indexOf.call(e,t,r);else return Uint8Array.prototype.lastIndexOf.call(e,t,r);return y(e,[t],r,i,o)}throw TypeError("val must be string, number or Buffer")}function y(e,t,r,i,o){var n,s=1,a=e.length,d=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return -1;s=2,a/=2,d/=2,r/=2}function p(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(o){var h=-1;for(n=r;n<a;n++)if(p(e,n)===p(t,-1===h?0:n-h)){if(-1===h&&(h=n),n-h+1===d)return h*s}else -1!==h&&(n-=n-h),h=-1}else for(r+d>a&&(r=a-d),n=r;n>=0;n--){for(var u=!0,l=0;l<d;l++)if(p(e,n+l)!==p(t,l)){u=!1;break}if(u)return n}return -1}a.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==a.prototype},a.compare=function(e,t){if(z(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),z(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(e)||!a.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,i=t.length,o=0,n=Math.min(r,i);o<n;++o)if(e[o]!==t[o]){r=e[o],i=t[o];break}return r<i?-1:+(i<r)},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);if(void 0===t)for(r=0,t=0;r<e.length;++r)t+=e[r].length;var r,i=a.allocUnsafe(t),o=0;for(r=0;r<e.length;++r){var n=e[r];if(z(n,Uint8Array)&&(n=a.from(n)),!a.isBuffer(n))throw TypeError('"list" argument must be an Array of Buffers');n.copy(i,o),o+=n.length}return i},a.byteLength=c,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)N(this,t,t+1);return this},a.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)N(this,t,t+3),N(this,t+1,t+2);return this},a.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)N(this,t,t+7),N(this,t+1,t+6),N(this,t+2,t+5),N(this,t+3,t+4);return this},a.prototype.toString=function(){var e=this.length;return 0===e?"":0==arguments.length?g(this,0,e):f.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(e){if(!a.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(e,t,r,i,o){if(z(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===i&&(i=0),void 0===o&&(o=this.length),t<0||r>e.length||i<0||o>this.length)throw RangeError("out of range index");if(i>=o&&t>=r)return 0;if(i>=o)return -1;if(t>=r)return 1;if(t>>>=0,r>>>=0,i>>>=0,o>>>=0,this===e)return 0;for(var n=o-i,s=r-t,d=Math.min(n,s),p=this.slice(i,o),h=e.slice(t,r),u=0;u<d;++u)if(p[u]!==h[u]){n=p[u],s=h[u];break}return n<s?-1:+(s<n)},a.prototype.includes=function(e,t,r){return -1!==this.indexOf(e,t,r)},a.prototype.indexOf=function(e,t,r){return m(this,e,t,r,!0)},a.prototype.lastIndexOf=function(e,t,r){return m(this,e,t,r,!1)};function g(e,t,r){r=Math.min(e.length,r);for(var i=[],o=t;o<r;){var n,s,a,d,p=e[o],h=null,u=p>239?4:p>223?3:p>191?2:1;if(o+u<=r)switch(u){case 1:p<128&&(h=p);break;case 2:(192&(n=e[o+1]))==128&&(d=(31&p)<<6|63&n)>127&&(h=d);break;case 3:n=e[o+1],s=e[o+2],(192&n)==128&&(192&s)==128&&(d=(15&p)<<12|(63&n)<<6|63&s)>2047&&(d<55296||d>57343)&&(h=d);break;case 4:n=e[o+1],s=e[o+2],a=e[o+3],(192&n)==128&&(192&s)==128&&(192&a)==128&&(d=(15&p)<<18|(63&n)<<12|(63&s)<<6|63&a)>65535&&d<1114112&&(h=d)}null===h?(h=65533,u=1):h>65535&&(h-=65536,i.push(h>>>10&1023|55296),h=56320|1023&h),i.push(h),o+=u}var l=i,c=l.length;if(c<=4096)return String.fromCharCode.apply(String,l);for(var f="",N=0;N<c;)f+=String.fromCharCode.apply(String,l.slice(N,N+=4096));return f}function v(e,t,r){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>r)throw RangeError("Trying to access beyond buffer length")}function w(e,t,r,i,o,n){if(!a.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<n)throw RangeError('"value" argument is out of bounds');if(r+i>e.length)throw RangeError("Index out of range")}function O(e,t,r,i,o,n){if(r+i>e.length||r<0)throw RangeError("Index out of range")}function b(e,t,r,i,n){return t*=1,r>>>=0,n||O(e,t,r,4,34028234663852886e22,-34028234663852886e22),o.write(e,t,r,i,23,4),r+4}function x(e,t,r,i,n){return t*=1,r>>>=0,n||O(e,t,r,8,17976931348623157e292,-17976931348623157e292),o.write(e,t,r,i,52,8),r+8}a.prototype.write=function(e,t,r,i){if(void 0===t)i="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)i=t,r=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(r)?(r>>>=0,void 0===i&&(i="utf8")):(i=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var o,n,s,a,d,p,h,u,l=this.length-t;if((void 0===r||r>l)&&(r=l),e.length>0&&(r<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var c=!1;;)switch(i){case"hex":return function(e,t,r,i){r=Number(r)||0;var o=e.length-r;i?(i=Number(i))>o&&(i=o):i=o;var n=t.length;i>n/2&&(i=n/2);for(var s=0;s<i;++s){var a,d=parseInt(t.substr(2*s,2),16);if((a=d)!=a)break;e[r+s]=d}return s}(this,e,t,r);case"utf8":case"utf-8":return o=t,n=r,B(S(e,this.length-o),this,o,n);case"ascii":return s=t,a=r,B(C(e),this,s,a);case"latin1":case"binary":return function(e,t,r,i){return B(C(t),e,r,i)}(this,e,t,r);case"base64":return d=t,p=r,B(I(e),this,d,p);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return h=t,u=r,B(function(e,t){for(var r,i,o=[],n=0;n<e.length&&!((t-=2)<0);++n)i=(r=e.charCodeAt(n))>>8,o.push(r%256),o.push(i);return o}(e,this.length-h),this,h,u);default:if(c)throw TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),c=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},a.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var i=this.subarray(e,t);return Object.setPrototypeOf(i,a.prototype),i},a.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);for(var i=this[e],o=1,n=0;++n<t&&(o*=256);)i+=this[e+n]*o;return i},a.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);for(var i=this[e+--t],o=1;t>0&&(o*=256);)i+=this[e+--t]*o;return i},a.prototype.readUInt8=function(e,t){return e>>>=0,t||v(e,1,this.length),this[e]},a.prototype.readUInt16LE=function(e,t){return e>>>=0,t||v(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUInt16BE=function(e,t){return e>>>=0,t||v(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUInt32LE=function(e,t){return e>>>=0,t||v(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+0x1000000*this[e+3]},a.prototype.readUInt32BE=function(e,t){return e>>>=0,t||v(e,4,this.length),0x1000000*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);for(var i=this[e],o=1,n=0;++n<t&&(o*=256);)i+=this[e+n]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},a.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);for(var i=t,o=1,n=this[e+--i];i>0&&(o*=256);)n+=this[e+--i]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*t)),n},a.prototype.readInt8=function(e,t){return(e>>>=0,t||v(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},a.prototype.readInt16LE=function(e,t){e>>>=0,t||v(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?0xffff0000|r:r},a.prototype.readInt16BE=function(e,t){e>>>=0,t||v(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?0xffff0000|r:r},a.prototype.readInt32LE=function(e,t){return e>>>=0,t||v(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return e>>>=0,t||v(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readFloatLE=function(e,t){return e>>>=0,t||v(e,4,this.length),o.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return e>>>=0,t||v(e,4,this.length),o.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return e>>>=0,t||v(e,8,this.length),o.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return e>>>=0,t||v(e,8,this.length),o.read(this,e,!1,52,8)},a.prototype.writeUIntLE=function(e,t,r,i){if(e*=1,t>>>=0,r>>>=0,!i){var o=Math.pow(2,8*r)-1;w(this,e,t,r,o,0)}var n=1,s=0;for(this[t]=255&e;++s<r&&(n*=256);)this[t+s]=e/n&255;return t+r},a.prototype.writeUIntBE=function(e,t,r,i){if(e*=1,t>>>=0,r>>>=0,!i){var o=Math.pow(2,8*r)-1;w(this,e,t,r,o,0)}var n=r-1,s=1;for(this[t+n]=255&e;--n>=0&&(s*=256);)this[t+n]=e/s&255;return t+r},a.prototype.writeUInt8=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,1,255,0),this[t]=255&e,t+1},a.prototype.writeUInt16LE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeUInt16BE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeUInt32LE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,4,0xffffffff,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},a.prototype.writeUInt32BE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,4,0xffffffff,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeIntLE=function(e,t,r,i){if(e*=1,t>>>=0,!i){var o=Math.pow(2,8*r-1);w(this,e,t,r,o-1,-o)}var n=0,s=1,a=0;for(this[t]=255&e;++n<r&&(s*=256);)e<0&&0===a&&0!==this[t+n-1]&&(a=1),this[t+n]=(e/s|0)-a&255;return t+r},a.prototype.writeIntBE=function(e,t,r,i){if(e*=1,t>>>=0,!i){var o=Math.pow(2,8*r-1);w(this,e,t,r,o-1,-o)}var n=r-1,s=1,a=0;for(this[t+n]=255&e;--n>=0&&(s*=256);)e<0&&0===a&&0!==this[t+n+1]&&(a=1),this[t+n]=(e/s|0)-a&255;return t+r},a.prototype.writeInt8=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeInt16BE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeInt32LE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,4,0x7fffffff,-0x80000000),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},a.prototype.writeInt32BE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,4,0x7fffffff,-0x80000000),e<0&&(e=0xffffffff+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeFloatLE=function(e,t,r){return b(this,e,t,!0,r)},a.prototype.writeFloatBE=function(e,t,r){return b(this,e,t,!1,r)},a.prototype.writeDoubleLE=function(e,t,r){return x(this,e,t,!0,r)},a.prototype.writeDoubleBE=function(e,t,r){return x(this,e,t,!1,r)},a.prototype.copy=function(e,t,r,i){if(!a.isBuffer(e))throw TypeError("argument should be a Buffer");if(r||(r=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<r&&(i=r),i===r||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(i<0)throw RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-r&&(i=e.length-t+r);var o=i-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,r,i);else if(this===e&&r<t&&t<i)for(var n=o-1;n>=0;--n)e[n+t]=this[n+r];else Uint8Array.prototype.set.call(e,this.subarray(r,i),t);return o},a.prototype.fill=function(e,t,r,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),void 0!==i&&"string"!=typeof i)throw TypeError("encoding must be a string");if("string"==typeof i&&!a.isEncoding(i))throw TypeError("Unknown encoding: "+i);if(1===e.length){var o,n=e.charCodeAt(0);("utf8"===i&&n<128||"latin1"===i)&&(e=n)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(o=t;o<r;++o)this[o]=e;else{var s=a.isBuffer(e)?e:a.from(e,i),d=s.length;if(0===d)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<r-t;++o)this[o+t]=s[o%d]}return this};var W=/[^+/0-9A-Za-z-_]/g;function S(e,t){t=t||1/0;for(var r,i=e.length,o=null,n=[],s=0;s<i;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!o){if(r>56319||s+1===i){(t-=3)>-1&&n.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&n.push(239,191,189),o=r;continue}r=(o-55296<<10|r-56320)+65536}else o&&(t-=3)>-1&&n.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;n.push(r)}else if(r<2048){if((t-=2)<0)break;n.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;n.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((t-=4)<0)break;n.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return n}function C(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function I(e){return i.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(W,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function B(e,t,r,i){for(var o=0;o<i&&!(o+r>=t.length)&&!(o>=e.length);++o)t[o+r]=e[o];return o}function z(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}var E=function(){for(var e="0123456789abcdef",t=Array(256),r=0;r<16;++r)for(var i=16*r,o=0;o<16;++o)t[i+o]=e[r]+e[o];return t}()},783:function(e,t){t.read=function(e,t,r,i,o){var n,s,a=8*o-i-1,d=(1<<a)-1,p=d>>1,h=-7,u=r?o-1:0,l=r?-1:1,c=e[t+u];for(u+=l,n=c&(1<<-h)-1,c>>=-h,h+=a;h>0;n=256*n+e[t+u],u+=l,h-=8);for(s=n&(1<<-h)-1,n>>=-h,h+=i;h>0;s=256*s+e[t+u],u+=l,h-=8);if(0===n)n=1-p;else{if(n===d)return s?NaN:1/0*(c?-1:1);s+=Math.pow(2,i),n-=p}return(c?-1:1)*s*Math.pow(2,n-i)},t.write=function(e,t,r,i,o,n){var s,a,d,p=8*n-o-1,h=(1<<p)-1,u=h>>1,l=5960464477539062e-23*(23===o),c=i?0:n-1,f=i?1:-1,N=+(t<0||0===t&&1/t<0);for(isNaN(t=Math.abs(t))||t===1/0?(a=+!!isNaN(t),s=h):(s=Math.floor(Math.log(t)/Math.LN2),t*(d=Math.pow(2,-s))<1&&(s--,d*=2),s+u>=1?t+=l/d:t+=l*Math.pow(2,1-u),t*d>=2&&(s++,d/=2),s+u>=h?(a=0,s=h):s+u>=1?(a=(t*d-1)*Math.pow(2,o),s+=u):(a=t*Math.pow(2,u-1)*Math.pow(2,o),s=0));o>=8;e[r+c]=255&a,c+=f,a/=256,o-=8);for(s=s<<o|a,p+=o;p>0;e[r+c]=255&s,c+=f,s/=256,p-=8);e[r+c-f]|=128*N}}},o={};function n(e){var t=o[e];if(void 0!==t)return t.exports;var r=o[e]={exports:{}},s=!0;try{i[e](r,r.exports,n),s=!1}finally{s&&delete o[e]}return r.exports}n.ab="/ROOT/node_modules/next/dist/compiled/buffer/",t.exports=n(72)},97278,e=>{"use strict";var t=e.i(67034);function r(e){return void 0===e||void 0===e}function i(e){return"string"==typeof e}function o(e){return"number"==typeof e}function n(e){return"boolean"==typeof e}function s(e){return null===e}function a(e){return e instanceof Date}function d(e){return"bigint"==typeof e}function p(e){return void 0!==t.Buffer&&t.Buffer.isBuffer(e)}function h(e){return"function"==typeof e}function u(e){return"object"==typeof e&&null!==e}function l(e){return e[e.length-1]}function c(e){return Object.freeze(e)}function f(e){return N(e)?e:[e]}function N(e){return Array.isArray(e)}function m(e){return e}Object.prototype.toString,e.s(["asArray",()=>f,"freeze",()=>c,"getLast",()=>l,"isBigInt",()=>d,"isBoolean",()=>n,"isBuffer",()=>p,"isDate",()=>a,"isFunction",()=>h,"isNull",()=>s,"isNumber",()=>o,"isObject",()=>u,"isReadonlyArray",()=>N,"isString",()=>i,"isUndefined",()=>r,"noop",()=>m])},90543,e=>{"use strict";var t=e.i(97278);let r=(0,t.freeze)({is:e=>"IdentifierNode"===e.kind,create:e=>(0,t.freeze)({kind:"IdentifierNode",name:e})});e.s(["IdentifierNode",0,r])},96071,e=>{"use strict";var t=e.i(97278);let r=(0,t.freeze)({is:e=>"CreateTableNode"===e.kind,create:e=>(0,t.freeze)({kind:"CreateTableNode",table:e,columns:(0,t.freeze)([])}),cloneWithColumn:(e,r)=>(0,t.freeze)({...e,columns:(0,t.freeze)([...e.columns,r])}),cloneWithConstraint:(e,r)=>(0,t.freeze)({...e,constraints:e.constraints?(0,t.freeze)([...e.constraints,r]):(0,t.freeze)([r])}),cloneWithFrontModifier:(e,r)=>(0,t.freeze)({...e,frontModifiers:e.frontModifiers?(0,t.freeze)([...e.frontModifiers,r]):(0,t.freeze)([r])}),cloneWithEndModifier:(e,r)=>(0,t.freeze)({...e,endModifiers:e.endModifiers?(0,t.freeze)([...e.endModifiers,r]):(0,t.freeze)([r])}),cloneWith:(e,r)=>(0,t.freeze)({...e,...r})});e.s(["CreateTableNode",0,r,"ON_COMMIT_ACTIONS",0,["preserve rows","delete rows","drop"]])},39970,e=>{"use strict";var t=e.i(97278),r=e.i(90543);let i=(0,t.freeze)({is:e=>"SchemableIdentifierNode"===e.kind,create:e=>(0,t.freeze)({kind:"SchemableIdentifierNode",identifier:r.IdentifierNode.create(e)}),createWithSchema:(e,i)=>(0,t.freeze)({kind:"SchemableIdentifierNode",schema:r.IdentifierNode.create(e),identifier:r.IdentifierNode.create(i)})});e.s(["SchemableIdentifierNode",0,i])},32160,e=>{"use strict";var t=e.i(97278);let r=(0,t.freeze)({is:e=>"AliasNode"===e.kind,create:(e,r)=>(0,t.freeze)({kind:"AliasNode",node:e,alias:r})});e.s(["AliasNode",0,r])},30868,e=>{"use strict";var t=e.i(97278),r=e.i(39970);let i=(0,t.freeze)({is:e=>"TableNode"===e.kind,create:e=>(0,t.freeze)({kind:"TableNode",table:r.SchemableIdentifierNode.create(e)}),createWithSchema:(e,i)=>(0,t.freeze)({kind:"TableNode",table:r.SchemableIdentifierNode.createWithSchema(e,i)})});e.s(["TableNode",0,i])},41806,e=>{"use strict";var t=e.i(97278);function r(e){return(0,t.isObject)(e)&&(0,t.isFunction)(e.toOperationNode)}e.s(["isOperationNodeSource",()=>r])},32669,99258,e=>{"use strict";var t=e.i(41806),r=e.i(97278);function i(e){return(0,r.isObject)(e)&&"expressionType"in e&&(0,t.isOperationNodeSource)(e)}function o(e){return(0,r.isObject)(e)&&"expression"in e&&(0,r.isString)(e.alias)&&(0,t.isOperationNodeSource)(e)}e.s(["isAliasedExpression",()=>o,"isExpression",()=>i],32669);let n=(0,r.freeze)({is:e=>"SelectModifierNode"===e.kind,create:(e,t)=>(0,r.freeze)({kind:"SelectModifierNode",modifier:e,of:t}),createWithExpression:e=>(0,r.freeze)({kind:"SelectModifierNode",rawModifier:e})});e.s(["SelectModifierNode",0,n],99258)},88176,21663,14255,e=>{"use strict";var t=e.i(97278);let r=(0,t.freeze)({is:e=>"AndNode"===e.kind,create:(e,r)=>(0,t.freeze)({kind:"AndNode",left:e,right:r})});e.s(["AndNode",0,r],21663);let i=(0,t.freeze)({is:e=>"OrNode"===e.kind,create:(e,r)=>(0,t.freeze)({kind:"OrNode",left:e,right:r})});e.s(["OrNode",0,i],14255);let o=(0,t.freeze)({is:e=>"OnNode"===e.kind,create:e=>(0,t.freeze)({kind:"OnNode",on:e}),cloneWithOperation:(e,o,n)=>(0,t.freeze)({...e,on:"And"===o?r.create(e.on,n):i.create(e.on,n)})}),n=(0,t.freeze)({is:e=>"JoinNode"===e.kind,create:(e,r)=>(0,t.freeze)({kind:"JoinNode",joinType:e,table:r,on:void 0}),createWithOn:(e,r,i)=>(0,t.freeze)({kind:"JoinNode",joinType:e,table:r,on:o.create(i)}),cloneWithOn:(e,r)=>(0,t.freeze)({...e,on:e.on?o.cloneWithOperation(e.on,"And",r):o.create(r)})});e.s(["JoinNode",0,n],88176)},75264,e=>{"use strict";var t=e.i(97278);let r=(0,t.freeze)({is:e=>"BinaryOperationNode"===e.kind,create:(e,r,i)=>(0,t.freeze)({kind:"BinaryOperationNode",leftOperand:e,operator:r,rightOperand:i})});e.s(["BinaryOperationNode",0,r])},20183,e=>{"use strict";var t=e.i(97278);let r=["->","->>"],i=["=","==","!=","<>",">",">=","<","<=","in","not in","is","is not","like","not like","match","ilike","not ilike","@>","<@","^@","&&","?","?&","?|","!<","!>","<=>","!~","~","~*","!~*","@@","@@@","!!","<->","regexp","is distinct from","is not distinct from","+","-","*","/","%","^","&","|","#","<<",">>","&&","||",...r,"not","-","exists","not exists","between","between symmetric"],o=(0,t.freeze)({is:e=>"OperatorNode"===e.kind,create:e=>(0,t.freeze)({kind:"OperatorNode",operator:e})});function n(e){return(0,t.isString)(e)&&r.includes(e)}e.s(["OPERATORS",0,i,"OperatorNode",0,o,"isJSONOperator",()=>n])},62380,87316,9818,e=>{"use strict";var t=e.i(97278),r=e.i(90543);let i=(0,t.freeze)({is:e=>"ColumnNode"===e.kind,create:e=>(0,t.freeze)({kind:"ColumnNode",column:r.IdentifierNode.create(e)})});e.s(["ColumnNode",0,i],62380);let o=(0,t.freeze)({is:e=>"SelectAllNode"===e.kind,create:()=>(0,t.freeze)({kind:"SelectAllNode"})});e.s(["SelectAllNode",0,o],87316);let n=(0,t.freeze)({is:e=>"ReferenceNode"===e.kind,create:(e,r)=>(0,t.freeze)({kind:"ReferenceNode",table:r,column:e}),createSelectAll:e=>(0,t.freeze)({kind:"ReferenceNode",table:e,column:o.create()})});e.s(["ReferenceNode",0,n],9818)},55505,93152,e=>{"use strict";e.s(["DynamicReferenceBuilder",()=>o,"isDynamicReferenceBuilder",()=>n],55505);var t=e.i(41806),r=e.i(22921),i=e.i(97278);class o{#e;get dynamicReference(){return this.#e}get refType(){}constructor(e){this.#e=e}toOperationNode(){return(0,r.parseSimpleReferenceExpression)(this.#e)}}function n(e){return(0,i.isObject)(e)&&(0,t.isOperationNodeSource)(e)&&(0,i.isString)(e.dynamicReference)}let s=(0,i.freeze)({is:e=>"OrderByItemNode"===e.kind,create:(e,t)=>(0,i.freeze)({kind:"OrderByItemNode",orderBy:e,direction:t}),cloneWith:(e,t)=>(0,i.freeze)({...e,...t})});e.s(["OrderByItemNode",0,s],93152)},60911,e=>{"use strict";var t=e.i(97278);let r=(0,t.freeze)({is:e=>"RawNode"===e.kind,create:(e,r)=>(0,t.freeze)({kind:"RawNode",sqlFragments:(0,t.freeze)(e),parameters:(0,t.freeze)(r)}),createWithSql:e=>r.create([e],[]),createWithChild:e=>r.create(["",""],[e]),createWithChildren:e=>r.create(Array(e.length+1).fill(""),e)});e.s(["RawNode",0,r])},53743,e=>{"use strict";var t=e.i(97278),r=e.i(90543);let i=(0,t.freeze)({is:e=>"CollateNode"===e.kind,create:e=>(0,t.freeze)({kind:"CollateNode",collation:r.IdentifierNode.create(e)})});var o=e.i(93152),n=e.i(60911);class s{#t;constructor(e){this.#t=(0,t.freeze)(e)}desc(){return new s({node:o.OrderByItemNode.cloneWith(this.#t.node,{direction:n.RawNode.createWithSql("desc")})})}asc(){return new s({node:o.OrderByItemNode.cloneWith(this.#t.node,{direction:n.RawNode.createWithSql("asc")})})}nullsLast(){return new s({node:o.OrderByItemNode.cloneWith(this.#t.node,{nulls:"last"})})}nullsFirst(){return new s({node:o.OrderByItemNode.cloneWith(this.#t.node,{nulls:"first"})})}collate(e){return new s({node:o.OrderByItemNode.cloneWith(this.#t.node,{collation:i.create(e)})})}toOperationNode(){return this.#t.node}}e.s(["OrderByItemBuilder",()=>s],53743)},65942,e=>{"use strict";let t=new Set;function r(e){t.has(e)||(t.add(e),console.log(e))}e.s(["logOnce",()=>r])},65900,e=>{"use strict";e.s(["isOrderByDirection",()=>p,"parseOrderBy",()=>h]);var t=e.i(55505),r=e.i(32669),i=e.i(93152),o=e.i(60911),n=e.i(53743),s=e.i(65942),a=e.i(57852),d=e.i(22921);function p(e){return"asc"===e||"desc"===e}function h(e){if(2===e.length)return[u(e[0],e[1])];if(1===e.length){let[t]=e;return Array.isArray(t)?((0,s.logOnce)("orderBy(array) is deprecated, use multiple orderBy calls instead."),t.map(e=>u(e))):[u(t)]}throw Error(`Invalid number of arguments at order by! expected 1-2, received ${e.length}`)}function u(e,r){let o=function(e){if((0,a.isExpressionOrFactory)(e))return(0,a.parseExpression)(e);if((0,t.isDynamicReferenceBuilder)(e))return e.toOperationNode();let[r,i]=e.split(" ");return i?((0,s.logOnce)("`orderBy('column asc')` is deprecated. Use `orderBy('column', 'asc')` instead."),l((0,d.parseStringReference)(r),i)):(0,d.parseStringReference)(e)}(e);if(i.OrderByItemNode.is(o)){if(r)throw Error("Cannot specify direction twice!");return o}return l(o,r)}function l(e,t){if("string"==typeof t){if(!p(t))throw Error(`Invalid order by direction: ${t}`);return i.OrderByItemNode.create(e,o.RawNode.createWithSql(t))}if((0,r.isExpression)(t))return(0,s.logOnce)("`orderBy(..., expr)` is deprecated. Use `orderBy(..., 'asc')` or `orderBy(..., (ob) => ...)` instead."),i.OrderByItemNode.create(e,t.toOperationNode());let a=i.OrderByItemNode.create(e);return t?t(new n.OrderByItemBuilder({node:a})).toOperationNode():a}},58867,e=>{"use strict";var t=e.i(97278);let r=(0,t.freeze)({is:e=>"JSONReferenceNode"===e.kind,create:(e,r)=>(0,t.freeze)({kind:"JSONReferenceNode",reference:e,traversal:r}),cloneWithTraversal:(e,r)=>(0,t.freeze)({...e,traversal:r})});e.s(["JSONReferenceNode",0,r])},10172,e=>{"use strict";var t=e.i(97278);let r=(0,t.freeze)({is:e=>"JSONOperatorChainNode"===e.kind,create:e=>(0,t.freeze)({kind:"JSONOperatorChainNode",operator:e,values:(0,t.freeze)([])}),cloneWithValue:(e,r)=>(0,t.freeze)({...e,values:(0,t.freeze)([...e.values,r])})});e.s(["JSONOperatorChainNode",0,r])},32011,e=>{"use strict";var t=e.i(97278);let r=(0,t.freeze)({is:e=>"JSONPathNode"===e.kind,create:e=>(0,t.freeze)({kind:"JSONPathNode",inOperator:e,pathLegs:(0,t.freeze)([])}),cloneWithLeg:(e,r)=>(0,t.freeze)({...e,pathLegs:(0,t.freeze)([...e.pathLegs,r])})});e.s(["JSONPathNode",0,r])},22921,e=>{"use strict";e.s(["parseAliasedStringReference",()=>g,"parseColumnName",()=>v,"parseJSONReference",()=>m,"parseOrderedColumnName",()=>w,"parseReferenceExpression",()=>N,"parseReferenceExpressionOrList",()=>f,"parseSimpleReferenceExpression",()=>c,"parseStringReference",()=>y]);var t=e.i(32160),r=e.i(62380),i=e.i(9818),o=e.i(30868),n=e.i(97278),s=e.i(57852),a=e.i(90543),d=e.i(65900),p=e.i(20183),h=e.i(58867),u=e.i(10172),l=e.i(32011);function c(e){return(0,n.isString)(e)?y(e):e.toOperationNode()}function f(e){return(0,n.isReadonlyArray)(e)?e.map(e=>N(e)):[N(e)]}function N(e){return(0,s.isExpressionOrFactory)(e)?(0,s.parseExpression)(e):c(e)}function m(e,t){let r=y(e);if((0,p.isJSONOperator)(t))return h.JSONReferenceNode.create(r,u.JSONOperatorChainNode.create(p.OperatorNode.create(t)));let i=t.slice(0,-1);if((0,p.isJSONOperator)(i))return h.JSONReferenceNode.create(r,l.JSONPathNode.create(p.OperatorNode.create(i)));throw Error(`Invalid JSON operator: ${t}`)}function y(e){if(!e.includes("."))return i.ReferenceNode.create(r.ColumnNode.create(e));let t=e.split(".").map(O);if(3===t.length)return function(e){let[t,n,s]=e;return i.ReferenceNode.create(r.ColumnNode.create(s),o.TableNode.createWithSchema(t,n))}(t);if(2===t.length)return function(e){let[t,n]=e;return i.ReferenceNode.create(r.ColumnNode.create(n),o.TableNode.create(t))}(t);throw Error(`invalid column reference ${e}`)}function g(e){let r=" as ";if(!e.includes(r))return y(e);{let[i,o]=e.split(r).map(O);return t.AliasNode.create(y(i),a.IdentifierNode.create(o))}}function v(e){return r.ColumnNode.create(e)}function w(e){if(!e.includes(" "))return v(e);{let[t,r]=e.split(" ").map(O);if(!(0,d.isOrderByDirection)(r))throw Error(`invalid order direction "${r}" next to "${t}"`);return(0,d.parseOrderBy)([t,r])[0]}}function O(e){return e.trim()}},56332,88657,e=>{"use strict";var t=e.i(97278);let r=(0,t.freeze)({is:e=>"PrimitiveValueListNode"===e.kind,create:e=>(0,t.freeze)({kind:"PrimitiveValueListNode",values:(0,t.freeze)([...e])})});e.s(["PrimitiveValueListNode",0,r],56332);let i=(0,t.freeze)({is:e=>"ValueListNode"===e.kind,create:e=>(0,t.freeze)({kind:"ValueListNode",values:(0,t.freeze)(e)})});e.s(["ValueListNode",0,i],88657)},28442,e=>{"use strict";var t=e.i(97278);let r=(0,t.freeze)({is:e=>"ValueNode"===e.kind,create:e=>(0,t.freeze)({kind:"ValueNode",value:e}),createImmediate:e=>(0,t.freeze)({kind:"ValueNode",value:e,immediate:!0})});e.s(["ValueNode",0,r])},30664,e=>{"use strict";e.s(["isSafeImmediateValue",()=>d,"parseSafeImmediateValue",()=>p,"parseValueExpression",()=>a,"parseValueExpressionOrList",()=>s]);var t=e.i(56332),r=e.i(88657),i=e.i(28442),o=e.i(97278),n=e.i(57852);function s(e){var i;return(0,o.isReadonlyArray)(e)?(i=e).some(n.isExpressionOrFactory)?r.ValueListNode.create(i.map(e=>a(e))):t.PrimitiveValueListNode.create(i):a(e)}function a(e){return(0,n.isExpressionOrFactory)(e)?(0,n.parseExpression)(e):i.ValueNode.create(e)}function d(e){return(0,o.isNumber)(e)||(0,o.isBoolean)(e)||(0,o.isNull)(e)}function p(e){if(!d(e))throw Error(`unsafe immediate value ${JSON.stringify(e)}`);return i.ValueNode.createImmediate(e)}},59827,e=>{"use strict";var t=e.i(97278);let r=(0,t.freeze)({is:e=>"ParensNode"===e.kind,create:e=>(0,t.freeze)({kind:"ParensNode",node:e})});e.s(["ParensNode",0,r])},62393,10824,35954,33724,e=>{"use strict";e.s(["parseFilterList",()=>N,"parseFilterObject",()=>f,"parseReferentialBinaryOperation",()=>c,"parseValueBinaryOperation",()=>l,"parseValueBinaryOperationOrExpression",()=>u],62393);var t=e.i(75264),r=e.i(97278),i=e.i(41806),o=e.i(20183),n=e.i(22921),s=e.i(30664),a=e.i(28442),d=e.i(21663),p=e.i(59827),h=e.i(14255);function u(e){if(3===e.length)return l(e[0],e[1],e[2]);if(1===e.length)return(0,s.parseValueExpression)(e[0]);throw Error(`invalid arguments: ${JSON.stringify(e)}`)}function l(e,r,i){var o;return("is"===(o=r)||"is not"===o)&&m(i)?t.BinaryOperationNode.create((0,n.parseReferenceExpression)(e),y(r),a.ValueNode.createImmediate(i)):t.BinaryOperationNode.create((0,n.parseReferenceExpression)(e),y(r),(0,s.parseValueExpressionOrList)(i))}function c(e,r,i){return t.BinaryOperationNode.create((0,n.parseReferenceExpression)(e),y(r),(0,n.parseReferenceExpression)(i))}function f(e,t){return N(Object.entries(e).filter(([,e])=>!(0,r.isUndefined)(e)).map(([e,t])=>l(e,m(t)?"is":"=",t)),t)}function N(e,r,i=!0){let n="and"===r?d.AndNode.create:h.OrNode.create;if(0===e.length)return t.BinaryOperationNode.create(a.ValueNode.createImmediate(1),o.OperatorNode.create("="),a.ValueNode.createImmediate(+("and"===r)));let s=g(e[0]);for(let t=1;t<e.length;++t)s=n(s,g(e[t]));return e.length>1&&i?p.ParensNode.create(s):s}function m(e){return(0,r.isNull)(e)||(0,r.isBoolean)(e)}function y(e){if((0,r.isString)(e)&&o.OPERATORS.includes(e))return o.OperatorNode.create(e);if((0,i.isOperationNodeSource)(e))return e.toOperationNode();throw Error(`invalid operator ${JSON.stringify(e)}`)}function g(e){return(0,i.isOperationNodeSource)(e)?e.toOperationNode():e}let v=(0,r.freeze)({is:e=>"OrderByNode"===e.kind,create:e=>(0,r.freeze)({kind:"OrderByNode",items:(0,r.freeze)([...e])}),cloneWithItems:(e,t)=>(0,r.freeze)({...e,items:(0,r.freeze)([...e.items,...t])})});e.s(["OrderByNode",0,v],10824);let w=(0,r.freeze)({is:e=>"PartitionByNode"===e.kind,create:e=>(0,r.freeze)({kind:"PartitionByNode",items:(0,r.freeze)(e)}),cloneWithItems:(e,t)=>(0,r.freeze)({...e,items:(0,r.freeze)([...e.items,...t])})}),O=(0,r.freeze)({is:e=>"OverNode"===e.kind,create:()=>(0,r.freeze)({kind:"OverNode"}),cloneWithOrderByItems:(e,t)=>(0,r.freeze)({...e,orderBy:e.orderBy?v.cloneWithItems(e.orderBy,t):v.create(t)}),cloneWithPartitionByItems:(e,t)=>(0,r.freeze)({...e,partitionBy:e.partitionBy?w.cloneWithItems(e.partitionBy,t):w.create(t)})});e.s(["OverNode",0,O],35954),e.s(["JoinBuilder",()=>W],33724);var b=e.i(88176),x=e.i(60911);class W{#t;constructor(e){this.#t=(0,r.freeze)(e)}on(...e){return new W({...this.#t,joinNode:b.JoinNode.cloneWithOn(this.#t.joinNode,u(e))})}onRef(e,t,r){return new W({...this.#t,joinNode:b.JoinNode.cloneWithOn(this.#t.joinNode,c(e,t,r))})}onTrue(){return new W({...this.#t,joinNode:b.JoinNode.cloneWithOn(this.#t.joinNode,x.RawNode.createWithSql("true"))})}$call(e){return e(this)}toOperationNode(){return this.#t.joinNode}}},57002,e=>{"use strict";var t=e.i(97278);let r=(0,t.freeze)({is:e=>"InsertQueryNode"===e.kind,create:(e,r,i)=>(0,t.freeze)({kind:"InsertQueryNode",into:e,...r&&{with:r},replace:i}),createWithoutInto:()=>(0,t.freeze)({kind:"InsertQueryNode"}),cloneWith:(e,r)=>(0,t.freeze)({...e,...r})});e.s(["InsertQueryNode",0,r])},92817,80385,e=>{"use strict";e.s(["SelectQueryNode",()=>d],92817);var t=e.i(97278);let r=(0,t.freeze)({is:e=>"FromNode"===e.kind,create:e=>(0,t.freeze)({kind:"FromNode",froms:(0,t.freeze)(e)}),cloneWithFroms:(e,r)=>(0,t.freeze)({...e,froms:(0,t.freeze)([...e.froms,...r])})});e.s(["FromNode",0,r],80385);let i=(0,t.freeze)({is:e=>"GroupByNode"===e.kind,create:e=>(0,t.freeze)({kind:"GroupByNode",items:(0,t.freeze)(e)}),cloneWithItems:(e,r)=>(0,t.freeze)({...e,items:(0,t.freeze)([...e.items,...r])})});var o=e.i(21663),n=e.i(14255);let s=(0,t.freeze)({is:e=>"HavingNode"===e.kind,create:e=>(0,t.freeze)({kind:"HavingNode",having:e}),cloneWithOperation:(e,r,i)=>(0,t.freeze)({...e,having:"And"===r?o.AndNode.create(e.having,i):n.OrNode.create(e.having,i)})});var a=e.i(84190);let d=(0,t.freeze)({is:e=>"SelectQueryNode"===e.kind,create:e=>(0,t.freeze)({kind:"SelectQueryNode",...e&&{with:e}}),createFrom:(e,i)=>(0,t.freeze)({kind:"SelectQueryNode",from:r.create(e),...i&&{with:i}}),cloneWithSelections:(e,r)=>(0,t.freeze)({...e,selections:e.selections?(0,t.freeze)([...e.selections,...r]):(0,t.freeze)(r)}),cloneWithDistinctOn:(e,r)=>(0,t.freeze)({...e,distinctOn:e.distinctOn?(0,t.freeze)([...e.distinctOn,...r]):(0,t.freeze)(r)}),cloneWithFrontModifier:(e,r)=>(0,t.freeze)({...e,frontModifiers:e.frontModifiers?(0,t.freeze)([...e.frontModifiers,r]):(0,t.freeze)([r])}),cloneWithOrderByItems:(e,t)=>a.QueryNode.cloneWithOrderByItems(e,t),cloneWithGroupByItems:(e,r)=>(0,t.freeze)({...e,groupBy:e.groupBy?i.cloneWithItems(e.groupBy,r):i.create(r)}),cloneWithLimit:(e,r)=>(0,t.freeze)({...e,limit:r}),cloneWithOffset:(e,r)=>(0,t.freeze)({...e,offset:r}),cloneWithFetch:(e,r)=>(0,t.freeze)({...e,fetch:r}),cloneWithHaving:(e,r)=>(0,t.freeze)({...e,having:e.having?s.cloneWithOperation(e.having,"And",r):s.create(r)}),cloneWithSetOperations:(e,r)=>(0,t.freeze)({...e,setOperations:e.setOperations?(0,t.freeze)([...e.setOperations,...r]):(0,t.freeze)([...r])}),cloneWithoutSelections:e=>(0,t.freeze)({...e,selections:[]}),cloneWithoutLimit:e=>(0,t.freeze)({...e,limit:void 0}),cloneWithoutOffset:e=>(0,t.freeze)({...e,offset:void 0}),cloneWithoutOrderBy:e=>a.QueryNode.cloneWithoutOrderBy(e),cloneWithoutGroupBy:e=>(0,t.freeze)({...e,groupBy:void 0})})},85034,e=>{"use strict";var t=e.i(97278);let r=(0,t.freeze)({is:e=>"ListNode"===e.kind,create:e=>(0,t.freeze)({kind:"ListNode",items:(0,t.freeze)(e)})});e.s(["ListNode",0,r])},71932,e=>{"use strict";var t=e.i(97278),r=e.i(80385),i=e.i(85034);let o=(0,t.freeze)({is:e=>"UpdateQueryNode"===e.kind,create:(e,r)=>(0,t.freeze)({kind:"UpdateQueryNode",table:1===e.length?e[0]:i.ListNode.create(e),...r&&{with:r}}),createWithoutTable:()=>(0,t.freeze)({kind:"UpdateQueryNode"}),cloneWithFromItems:(e,i)=>(0,t.freeze)({...e,from:e.from?r.FromNode.cloneWithFroms(e.from,i):r.FromNode.create(i)}),cloneWithUpdates:(e,r)=>(0,t.freeze)({...e,updates:e.updates?(0,t.freeze)([...e.updates,...r]):r}),cloneWithLimit:(e,r)=>(0,t.freeze)({...e,limit:r})});e.s(["UpdateQueryNode",0,o])},36142,e=>{"use strict";var t=e.i(97278);let r=(0,t.freeze)({is:e=>"UsingNode"===e.kind,create:e=>(0,t.freeze)({kind:"UsingNode",tables:(0,t.freeze)(e)}),cloneWithTables:(e,r)=>(0,t.freeze)({...e,tables:(0,t.freeze)([...e.tables,...r])})});e.s(["UsingNode",0,r])},41809,6341,41256,3524,e=>{"use strict";e.s(["DeleteQueryNode",()=>n],41809);var t=e.i(97278),r=e.i(80385),i=e.i(36142),o=e.i(84190);let n=(0,t.freeze)({is:e=>"DeleteQueryNode"===e.kind,create:(e,i)=>(0,t.freeze)({kind:"DeleteQueryNode",from:r.FromNode.create(e),...i&&{with:i}}),cloneWithOrderByItems:(e,t)=>o.QueryNode.cloneWithOrderByItems(e,t),cloneWithoutOrderBy:e=>o.QueryNode.cloneWithoutOrderBy(e),cloneWithLimit:(e,r)=>(0,t.freeze)({...e,limit:r}),cloneWithoutLimit:e=>(0,t.freeze)({...e,limit:void 0}),cloneWithUsing:(e,r)=>(0,t.freeze)({...e,using:void 0!==e.using?i.UsingNode.cloneWithTables(e.using,r):i.UsingNode.create(r)})});var s=e.i(21663),a=e.i(14255);let d=(0,t.freeze)({is:e=>"WhereNode"===e.kind,create:e=>(0,t.freeze)({kind:"WhereNode",where:e}),cloneWithOperation:(e,r,i)=>(0,t.freeze)({...e,where:"And"===r?s.AndNode.create(e.where,i):a.OrNode.create(e.where,i)})});e.s(["WhereNode",0,d],6341);let p=(0,t.freeze)({is:e=>"ReturningNode"===e.kind,create:e=>(0,t.freeze)({kind:"ReturningNode",selections:(0,t.freeze)(e)}),cloneWithSelections:(e,r)=>(0,t.freeze)({...e,selections:e.selections?(0,t.freeze)([...e.selections,...r]):(0,t.freeze)(r)})});e.s(["ReturningNode",0,p],41256);let h=(0,t.freeze)({is:e=>"ExplainNode"===e.kind,create:(e,r)=>(0,t.freeze)({kind:"ExplainNode",format:e,options:r})});e.s(["ExplainNode",0,h],3524)},63116,e=>{"use strict";var t=e.i(97278);let r=(0,t.freeze)({is:e=>"WhenNode"===e.kind,create:e=>(0,t.freeze)({kind:"WhenNode",condition:e}),cloneWithResult:(e,r)=>(0,t.freeze)({...e,result:r})});e.s(["WhenNode",0,r])},84190,7593,e=>{"use strict";e.s(["QueryNode",()=>c],84190);var t=e.i(57002),r=e.i(92817),i=e.i(71932),o=e.i(41809),n=e.i(6341),s=e.i(97278),a=e.i(41256),d=e.i(3524),p=e.i(63116);let h=(0,s.freeze)({is:e=>"MergeQueryNode"===e.kind,create:(e,t)=>(0,s.freeze)({kind:"MergeQueryNode",into:e,...t&&{with:t}}),cloneWithUsing:(e,t)=>(0,s.freeze)({...e,using:t}),cloneWithWhen:(e,t)=>(0,s.freeze)({...e,whens:e.whens?(0,s.freeze)([...e.whens,t]):(0,s.freeze)([t])}),cloneWithThen:(e,t)=>(0,s.freeze)({...e,whens:e.whens?(0,s.freeze)([...e.whens.slice(0,-1),p.WhenNode.cloneWithResult(e.whens[e.whens.length-1],t)]):void 0})});e.s(["MergeQueryNode",0,h],7593);let u=(0,s.freeze)({is:e=>"OutputNode"===e.kind,create:e=>(0,s.freeze)({kind:"OutputNode",selections:(0,s.freeze)(e)}),cloneWithSelections:(e,t)=>(0,s.freeze)({...e,selections:e.selections?(0,s.freeze)([...e.selections,...t]):(0,s.freeze)(t)})});var l=e.i(10824);let c=(0,s.freeze)({is:e=>r.SelectQueryNode.is(e)||t.InsertQueryNode.is(e)||i.UpdateQueryNode.is(e)||o.DeleteQueryNode.is(e)||h.is(e),cloneWithEndModifier:(e,t)=>(0,s.freeze)({...e,endModifiers:e.endModifiers?(0,s.freeze)([...e.endModifiers,t]):(0,s.freeze)([t])}),cloneWithWhere:(e,t)=>(0,s.freeze)({...e,where:e.where?n.WhereNode.cloneWithOperation(e.where,"And",t):n.WhereNode.create(t)}),cloneWithJoin:(e,t)=>(0,s.freeze)({...e,joins:e.joins?(0,s.freeze)([...e.joins,t]):(0,s.freeze)([t])}),cloneWithReturning:(e,t)=>(0,s.freeze)({...e,returning:e.returning?a.ReturningNode.cloneWithSelections(e.returning,t):a.ReturningNode.create(t)}),cloneWithoutReturning:e=>(0,s.freeze)({...e,returning:void 0}),cloneWithoutWhere:e=>(0,s.freeze)({...e,where:void 0}),cloneWithExplain:(e,t,r)=>(0,s.freeze)({...e,explain:d.ExplainNode.create(t,r?.toOperationNode())}),cloneWithTop:(e,t)=>(0,s.freeze)({...e,top:t}),cloneWithOutput:(e,t)=>(0,s.freeze)({...e,output:e.output?u.cloneWithSelections(e.output,t):u.create(t)}),cloneWithOrderByItems:(e,t)=>(0,s.freeze)({...e,orderBy:e.orderBy?l.OrderByNode.cloneWithItems(e.orderBy,t):l.OrderByNode.create(t)}),cloneWithoutOrderBy:e=>(0,s.freeze)({...e,orderBy:void 0})})},12912,26028,e=>{"use strict";e.s(["OverBuilder",()=>a],12912);var t=e.i(35954),r=e.i(84190),i=e.i(65900),o=e.i(97278);let n=(0,o.freeze)({is:e=>"PartitionByItemNode"===e.kind,create:e=>(0,o.freeze)({kind:"PartitionByItemNode",partitionBy:e})});var s=e.i(22921);class a{#t;constructor(e){this.#t=(0,o.freeze)(e)}orderBy(...e){return new a({overNode:t.OverNode.cloneWithOrderByItems(this.#t.overNode,(0,i.parseOrderBy)(e))})}clearOrderBy(){return new a({overNode:r.QueryNode.cloneWithoutOrderBy(this.#t.overNode)})}partitionBy(e){return new a({overNode:t.OverNode.cloneWithPartitionByItems(this.#t.overNode,(0,s.parseReferenceExpressionOrList)(e).map(n.create))})}$call(e){return e(this)}toOperationNode(){return this.#t.overNode}}var d=e.i(9818),p=e.i(87316);let h=(0,o.freeze)({is:e=>"SelectionNode"===e.kind,create:e=>(0,o.freeze)({kind:"SelectionNode",selection:e}),createSelectAll:()=>(0,o.freeze)({kind:"SelectionNode",selection:p.SelectAllNode.create()}),createSelectAllFromTable:e=>(0,o.freeze)({kind:"SelectionNode",selection:d.ReferenceNode.createSelectAll(e)})});e.s(["SelectionNode",0,h],26028)},48150,36909,94430,32729,7970,9361,70201,10166,81821,74515,e=>{"use strict";e.s(["InsertQueryBuilder",()=>Q],48150),e.s(["parseSelectAll",()=>h,"parseSelectArg",()=>d],36909);var t=e.i(97278),r=e.i(26028),i=e.i(22921),o=e.i(55505),n=e.i(57852),s=e.i(82158),a=e.i(63690);function d(e){return(0,t.isFunction)(e)?d(e((0,a.expressionBuilder)())):(0,t.isReadonlyArray)(e)?e.map(e=>p(e)):[p(e)]}function p(e){return(0,t.isString)(e)?r.SelectionNode.create((0,i.parseAliasedStringReference)(e)):(0,o.isDynamicReferenceBuilder)(e)?r.SelectionNode.create(e.toOperationNode()):r.SelectionNode.create((0,n.parseAliasedExpression)(e))}function h(e){return e?Array.isArray(e)?e.map(u):[u(e)]:[r.SelectionNode.createSelectAll()]}function u(e){if((0,t.isString)(e))return r.SelectionNode.createSelectAllFromTable((0,s.parseTable)(e));throw Error(`invalid value selectAll expression: ${JSON.stringify(e)}`)}e.s(["parseInsertExpression",()=>g],94430);var l=e.i(62380),c=e.i(56332),f=e.i(88657),N=e.i(30664);let m=(0,t.freeze)({is:e=>"ValuesNode"===e.kind,create:e=>(0,t.freeze)({kind:"ValuesNode",values:(0,t.freeze)(e)})}),y=(0,t.freeze)({is:e=>"DefaultInsertValueNode"===e.kind,create:()=>(0,t.freeze)({kind:"DefaultInsertValueNode"})});function g(e){var r;let i,o=(0,t.isFunction)(e)?e((0,a.expressionBuilder)()):e;return i=function(e){let t=new Map;for(let r of e)for(let e of Object.keys(r))t.has(e)||void 0===r[e]||t.set(e,t.size);return t}(r=(0,t.isReadonlyArray)(o)?o:(0,t.freeze)([o])),[(0,t.freeze)([...i.keys()].map(l.ColumnNode.create)),m.create(r.map(e=>(function(e,r){let i=Object.keys(e),o=Array.from({length:r.size}),s=!1,a=i.length;for(let d of i){let i=r.get(d);if((0,t.isUndefined)(i)){a--;continue}let p=e[d];((0,t.isUndefined)(p)||(0,n.isExpressionOrFactory)(p))&&(s=!0),o[i]=p}if(a<r.size||s){let e=y.create();return f.ValueListNode.create(o.map(r=>(0,t.isUndefined)(r)?e:(0,N.parseValueExpression)(r)))}return c.PrimitiveValueListNode.create(o)})(e,i)))]}var v=e.i(57002),w=e.i(84190);let O=(0,t.freeze)({is:e=>"ColumnUpdateNode"===e.kind,create:(e,r)=>(0,t.freeze)({kind:"ColumnUpdateNode",column:e,value:r})});function b(e){return Object.entries((0,t.isFunction)(e)?e((0,a.expressionBuilder)()):e).filter(([e,t])=>void 0!==t).map(([e,t])=>O.create(l.ColumnNode.create(e),(0,N.parseValueExpression)(t)))}let x=(0,t.freeze)({is:e=>"OnDuplicateKeyNode"===e.kind,create:e=>(0,t.freeze)({kind:"OnDuplicateKeyNode",updates:e})});class W{insertId;numInsertedOrUpdatedRows;constructor(e,t){this.insertId=e,this.numInsertedOrUpdatedRows=t}}class S extends Error{node;constructor(e){super("no result"),this.node=e}}function C(e){return Object.prototype.hasOwnProperty.call(e,"prototype")}e.s(["NoResultError",()=>S,"isNoResultErrorConstructor",()=>C],32729);var I=e.i(90543),B=e.i(6341);let z=(0,t.freeze)({is:e=>"OnConflictNode"===e.kind,create:()=>(0,t.freeze)({kind:"OnConflictNode"}),cloneWith:(e,r)=>(0,t.freeze)({...e,...r}),cloneWithIndexWhere:(e,r)=>(0,t.freeze)({...e,indexWhere:e.indexWhere?B.WhereNode.cloneWithOperation(e.indexWhere,"And",r):B.WhereNode.create(r)}),cloneWithIndexOrWhere:(e,r)=>(0,t.freeze)({...e,indexWhere:e.indexWhere?B.WhereNode.cloneWithOperation(e.indexWhere,"Or",r):B.WhereNode.create(r)}),cloneWithUpdateWhere:(e,r)=>(0,t.freeze)({...e,updateWhere:e.updateWhere?B.WhereNode.cloneWithOperation(e.updateWhere,"And",r):B.WhereNode.create(r)}),cloneWithUpdateOrWhere:(e,r)=>(0,t.freeze)({...e,updateWhere:e.updateWhere?B.WhereNode.cloneWithOperation(e.updateWhere,"Or",r):B.WhereNode.create(r)}),cloneWithoutIndexWhere:e=>(0,t.freeze)({...e,indexWhere:void 0}),cloneWithoutUpdateWhere:e=>(0,t.freeze)({...e,updateWhere:void 0})});var E=e.i(62393);class k{#t;constructor(e){this.#t=(0,t.freeze)(e)}column(e){let r=l.ColumnNode.create(e);return new k({...this.#t,onConflictNode:z.cloneWith(this.#t.onConflictNode,{columns:this.#t.onConflictNode.columns?(0,t.freeze)([...this.#t.onConflictNode.columns,r]):(0,t.freeze)([r])})})}columns(e){let r=e.map(l.ColumnNode.create);return new k({...this.#t,onConflictNode:z.cloneWith(this.#t.onConflictNode,{columns:this.#t.onConflictNode.columns?(0,t.freeze)([...this.#t.onConflictNode.columns,...r]):(0,t.freeze)(r)})})}constraint(e){return new k({...this.#t,onConflictNode:z.cloneWith(this.#t.onConflictNode,{constraint:I.IdentifierNode.create(e)})})}expression(e){return new k({...this.#t,onConflictNode:z.cloneWith(this.#t.onConflictNode,{indexExpression:e.toOperationNode()})})}where(...e){return new k({...this.#t,onConflictNode:z.cloneWithIndexWhere(this.#t.onConflictNode,(0,E.parseValueBinaryOperationOrExpression)(e))})}whereRef(e,t,r){return new k({...this.#t,onConflictNode:z.cloneWithIndexWhere(this.#t.onConflictNode,(0,E.parseReferentialBinaryOperation)(e,t,r))})}clearWhere(){return new k({...this.#t,onConflictNode:z.cloneWithoutIndexWhere(this.#t.onConflictNode)})}doNothing(){return new q({...this.#t,onConflictNode:z.cloneWith(this.#t.onConflictNode,{doNothing:!0})})}doUpdateSet(e){return new T({...this.#t,onConflictNode:z.cloneWith(this.#t.onConflictNode,{updates:b(e)})})}$call(e){return e(this)}}class q{#t;constructor(e){this.#t=(0,t.freeze)(e)}toOperationNode(){return this.#t.onConflictNode}}class T{#t;constructor(e){this.#t=(0,t.freeze)(e)}where(...e){return new T({...this.#t,onConflictNode:z.cloneWithUpdateWhere(this.#t.onConflictNode,(0,E.parseValueBinaryOperationOrExpression)(e))})}whereRef(e,t,r){return new T({...this.#t,onConflictNode:z.cloneWithUpdateWhere(this.#t.onConflictNode,(0,E.parseReferentialBinaryOperation)(e,t,r))})}clearWhere(){return new T({...this.#t,onConflictNode:z.cloneWithoutUpdateWhere(this.#t.onConflictNode)})}$call(e){return e(this)}toOperationNode(){return this.#t.onConflictNode}}let A=(0,t.freeze)({is:e=>"TopNode"===e.kind,create:(e,r)=>(0,t.freeze)({kind:"TopNode",expression:e,modifiers:r})});function R(e,r){var i;if(!(0,t.isNumber)(e)&&!(0,t.isBigInt)(e))throw Error(`Invalid top expression: ${e}`);if(!(0,t.isUndefined)(r)&&"percent"!==(i=r)&&"with ties"!==i&&"percent with ties"!==i)throw Error(`Invalid top modifiers: ${r}`);return A.create(e,r)}e.s(["parseTop",()=>R],7970);let L=(0,t.freeze)({is:e=>"OrActionNode"===e.kind,create:e=>(0,t.freeze)({kind:"OrActionNode",action:e})});class Q{#t;constructor(e){this.#t=(0,t.freeze)(e)}values(e){let[t,r]=g(e);return new Q({...this.#t,queryNode:v.InsertQueryNode.cloneWith(this.#t.queryNode,{columns:t,values:r})})}columns(e){return new Q({...this.#t,queryNode:v.InsertQueryNode.cloneWith(this.#t.queryNode,{columns:(0,t.freeze)(e.map(l.ColumnNode.create))})})}expression(e){return new Q({...this.#t,queryNode:v.InsertQueryNode.cloneWith(this.#t.queryNode,{values:(0,n.parseExpression)(e)})})}defaultValues(){return new Q({...this.#t,queryNode:v.InsertQueryNode.cloneWith(this.#t.queryNode,{defaultValues:!0})})}modifyEnd(e){return new Q({...this.#t,queryNode:w.QueryNode.cloneWithEndModifier(this.#t.queryNode,e.toOperationNode())})}ignore(){return new Q({...this.#t,queryNode:v.InsertQueryNode.cloneWith(this.#t.queryNode,{orAction:L.create("ignore")})})}orIgnore(){return new Q({...this.#t,queryNode:v.InsertQueryNode.cloneWith(this.#t.queryNode,{orAction:L.create("ignore")})})}orAbort(){return new Q({...this.#t,queryNode:v.InsertQueryNode.cloneWith(this.#t.queryNode,{orAction:L.create("abort")})})}orFail(){return new Q({...this.#t,queryNode:v.InsertQueryNode.cloneWith(this.#t.queryNode,{orAction:L.create("fail")})})}orReplace(){return new Q({...this.#t,queryNode:v.InsertQueryNode.cloneWith(this.#t.queryNode,{orAction:L.create("replace")})})}orRollback(){return new Q({...this.#t,queryNode:v.InsertQueryNode.cloneWith(this.#t.queryNode,{orAction:L.create("rollback")})})}top(e,t){return new Q({...this.#t,queryNode:w.QueryNode.cloneWithTop(this.#t.queryNode,R(e,t))})}onConflict(e){return new Q({...this.#t,queryNode:v.InsertQueryNode.cloneWith(this.#t.queryNode,{onConflict:e(new k({onConflictNode:z.create()})).toOperationNode()})})}onDuplicateKeyUpdate(e){return new Q({...this.#t,queryNode:v.InsertQueryNode.cloneWith(this.#t.queryNode,{onDuplicateKey:x.create(b(e))})})}returning(e){return new Q({...this.#t,queryNode:w.QueryNode.cloneWithReturning(this.#t.queryNode,d(e))})}returningAll(){return new Q({...this.#t,queryNode:w.QueryNode.cloneWithReturning(this.#t.queryNode,h())})}output(e){return new Q({...this.#t,queryNode:w.QueryNode.cloneWithOutput(this.#t.queryNode,d(e))})}outputAll(e){return new Q({...this.#t,queryNode:w.QueryNode.cloneWithOutput(this.#t.queryNode,h(e))})}clearReturning(){return new Q({...this.#t,queryNode:w.QueryNode.cloneWithoutReturning(this.#t.queryNode)})}$call(e){return e(this)}$if(e,t){return e?t(this):new Q({...this.#t})}$castTo(){return new Q(this.#t)}$narrowType(){return new Q(this.#t)}$assertType(){return new Q(this.#t)}withPlugin(e){return new Q({...this.#t,executor:this.#t.executor.withPlugin(e)})}toOperationNode(){return this.#t.executor.transformQuery(this.#t.queryNode,this.#t.queryId)}compile(){return this.#t.executor.compileQuery(this.toOperationNode(),this.#t.queryId)}async execute(){let e=this.compile(),t=await this.#t.executor.executeQuery(e),{adapter:r}=this.#t.executor,i=e.query;return i.returning&&r.supportsReturning||i.output&&r.supportsOutput?t.rows:[new W(t.insertId,t.numAffectedRows??BigInt(0))]}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=S){let t=await this.executeTakeFirst();if(void 0===t)throw C(e)?new e(this.toOperationNode()):e(this.toOperationNode());return t}async *stream(e=100){let t=this.compile();for await(let r of this.#t.executor.stream(t,e))yield*r.rows}async explain(e,t){let r=new Q({...this.#t,queryNode:w.QueryNode.cloneWithExplain(this.#t.queryNode,e,t)});return await r.execute()}}e.s(["DeleteQueryBuilder",()=>P],70201);var M=e.i(45982);class D{numDeletedRows;constructor(e){this.numDeletedRows=e}}var F=e.i(41809);let U=(0,t.freeze)({is:e=>"LimitNode"===e.kind,create:e=>(0,t.freeze)({kind:"LimitNode",limit:e})});e.s(["LimitNode",0,U],9361);var V=e.i(65900);class P{#t;constructor(e){this.#t=(0,t.freeze)(e)}where(...e){return new P({...this.#t,queryNode:w.QueryNode.cloneWithWhere(this.#t.queryNode,(0,E.parseValueBinaryOperationOrExpression)(e))})}whereRef(e,t,r){return new P({...this.#t,queryNode:w.QueryNode.cloneWithWhere(this.#t.queryNode,(0,E.parseReferentialBinaryOperation)(e,t,r))})}clearWhere(){return new P({...this.#t,queryNode:w.QueryNode.cloneWithoutWhere(this.#t.queryNode)})}top(e,t){return new P({...this.#t,queryNode:w.QueryNode.cloneWithTop(this.#t.queryNode,R(e,t))})}using(e){return new P({...this.#t,queryNode:F.DeleteQueryNode.cloneWithUsing(this.#t.queryNode,(0,s.parseTableExpressionOrList)(e))})}innerJoin(...e){return this.#r("InnerJoin",e)}leftJoin(...e){return this.#r("LeftJoin",e)}rightJoin(...e){return this.#r("RightJoin",e)}fullJoin(...e){return this.#r("FullJoin",e)}#r(e,t){return new P({...this.#t,queryNode:w.QueryNode.cloneWithJoin(this.#t.queryNode,(0,M.parseJoin)(e,t))})}returning(e){return new P({...this.#t,queryNode:w.QueryNode.cloneWithReturning(this.#t.queryNode,d(e))})}returningAll(e){return new P({...this.#t,queryNode:w.QueryNode.cloneWithReturning(this.#t.queryNode,h(e))})}output(e){return new P({...this.#t,queryNode:w.QueryNode.cloneWithOutput(this.#t.queryNode,d(e))})}outputAll(e){return new P({...this.#t,queryNode:w.QueryNode.cloneWithOutput(this.#t.queryNode,h(e))})}clearReturning(){return new P({...this.#t,queryNode:w.QueryNode.cloneWithoutReturning(this.#t.queryNode)})}clearLimit(){return new P({...this.#t,queryNode:F.DeleteQueryNode.cloneWithoutLimit(this.#t.queryNode)})}orderBy(...e){return new P({...this.#t,queryNode:w.QueryNode.cloneWithOrderByItems(this.#t.queryNode,(0,V.parseOrderBy)(e))})}clearOrderBy(){return new P({...this.#t,queryNode:w.QueryNode.cloneWithoutOrderBy(this.#t.queryNode)})}limit(e){return new P({...this.#t,queryNode:F.DeleteQueryNode.cloneWithLimit(this.#t.queryNode,U.create((0,N.parseValueExpression)(e)))})}modifyEnd(e){return new P({...this.#t,queryNode:w.QueryNode.cloneWithEndModifier(this.#t.queryNode,e.toOperationNode())})}$call(e){return e(this)}$if(e,t){return e?t(this):new P({...this.#t})}$castTo(){return new P(this.#t)}$narrowType(){return new P(this.#t)}$assertType(){return new P(this.#t)}withPlugin(e){return new P({...this.#t,executor:this.#t.executor.withPlugin(e)})}toOperationNode(){return this.#t.executor.transformQuery(this.#t.queryNode,this.#t.queryId)}compile(){return this.#t.executor.compileQuery(this.toOperationNode(),this.#t.queryId)}async execute(){let e=this.compile(),t=await this.#t.executor.executeQuery(e),{adapter:r}=this.#t.executor,i=e.query;return i.returning&&r.supportsReturning||i.output&&r.supportsOutput?t.rows:[new D(t.numAffectedRows??BigInt(0))]}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=S){let t=await this.executeTakeFirst();if(void 0===t)throw C(e)?new e(this.toOperationNode()):e(this.toOperationNode());return t}async *stream(e=100){let t=this.compile();for await(let r of this.#t.executor.stream(t,e))yield*r.rows}async explain(e,t){let r=new P({...this.#t,queryNode:w.QueryNode.cloneWithExplain(this.#t.queryNode,e,t)});return await r.execute()}}e.s(["UpdateQueryBuilder",()=>$],10166);var J=e.i(71932);class j{numUpdatedRows;numChangedRows;constructor(e,t){this.numUpdatedRows=e,this.numChangedRows=t}}class ${#t;constructor(e){this.#t=(0,t.freeze)(e)}where(...e){return new $({...this.#t,queryNode:w.QueryNode.cloneWithWhere(this.#t.queryNode,(0,E.parseValueBinaryOperationOrExpression)(e))})}whereRef(e,t,r){return new $({...this.#t,queryNode:w.QueryNode.cloneWithWhere(this.#t.queryNode,(0,E.parseReferentialBinaryOperation)(e,t,r))})}clearWhere(){return new $({...this.#t,queryNode:w.QueryNode.cloneWithoutWhere(this.#t.queryNode)})}top(e,t){return new $({...this.#t,queryNode:w.QueryNode.cloneWithTop(this.#t.queryNode,R(e,t))})}from(e){return new $({...this.#t,queryNode:J.UpdateQueryNode.cloneWithFromItems(this.#t.queryNode,(0,s.parseTableExpressionOrList)(e))})}innerJoin(...e){return this.#r("InnerJoin",e)}leftJoin(...e){return this.#r("LeftJoin",e)}rightJoin(...e){return this.#r("RightJoin",e)}fullJoin(...e){return this.#r("FullJoin",e)}#r(e,t){return new $({...this.#t,queryNode:w.QueryNode.cloneWithJoin(this.#t.queryNode,(0,M.parseJoin)(e,t))})}orderBy(...e){return new $({...this.#t,queryNode:w.QueryNode.cloneWithOrderByItems(this.#t.queryNode,(0,V.parseOrderBy)(e))})}clearOrderBy(){return new $({...this.#t,queryNode:w.QueryNode.cloneWithoutOrderBy(this.#t.queryNode)})}limit(e){return new $({...this.#t,queryNode:J.UpdateQueryNode.cloneWithLimit(this.#t.queryNode,U.create((0,N.parseValueExpression)(e)))})}set(...e){return new $({...this.#t,queryNode:J.UpdateQueryNode.cloneWithUpdates(this.#t.queryNode,function(...e){return 2===e.length?[O.create((0,i.parseReferenceExpression)(e[0]),(0,N.parseValueExpression)(e[1]))]:b(e[0])}(...e))})}returning(e){return new $({...this.#t,queryNode:w.QueryNode.cloneWithReturning(this.#t.queryNode,d(e))})}returningAll(e){return new $({...this.#t,queryNode:w.QueryNode.cloneWithReturning(this.#t.queryNode,h(e))})}output(e){return new $({...this.#t,queryNode:w.QueryNode.cloneWithOutput(this.#t.queryNode,d(e))})}outputAll(e){return new $({...this.#t,queryNode:w.QueryNode.cloneWithOutput(this.#t.queryNode,h(e))})}modifyEnd(e){return new $({...this.#t,queryNode:w.QueryNode.cloneWithEndModifier(this.#t.queryNode,e.toOperationNode())})}clearReturning(){return new $({...this.#t,queryNode:w.QueryNode.cloneWithoutReturning(this.#t.queryNode)})}$call(e){return e(this)}$if(e,t){return e?t(this):new $({...this.#t})}$castTo(){return new $(this.#t)}$narrowType(){return new $(this.#t)}$assertType(){return new $(this.#t)}withPlugin(e){return new $({...this.#t,executor:this.#t.executor.withPlugin(e)})}toOperationNode(){return this.#t.executor.transformQuery(this.#t.queryNode,this.#t.queryId)}compile(){return this.#t.executor.compileQuery(this.toOperationNode(),this.#t.queryId)}async execute(){let e=this.compile(),t=await this.#t.executor.executeQuery(e),{adapter:r}=this.#t.executor,i=e.query;return i.returning&&r.supportsReturning||i.output&&r.supportsOutput?t.rows:[new j(t.numAffectedRows??BigInt(0),t.numChangedRows)]}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=S){let t=await this.executeTakeFirst();if(void 0===t)throw C(e)?new e(this.toOperationNode()):e(this.toOperationNode());return t}async *stream(e=100){let t=this.compile();for await(let r of this.#t.executor.stream(t,e))yield*r.rows}async explain(e,t){let r=new $({...this.#t,queryNode:w.QueryNode.cloneWithExplain(this.#t.queryNode,e,t)});return await r.execute()}}e.s(["parseCommonTableExpression",()=>X],81821);var K=e.i(30868);let G=(0,t.freeze)({is:e=>"CommonTableExpressionNameNode"===e.kind,create:(e,r)=>(0,t.freeze)({kind:"CommonTableExpressionNameNode",table:K.TableNode.create(e),columns:r?(0,t.freeze)(r.map(l.ColumnNode.create)):void 0})});var _=e.i(56018);let H=(0,t.freeze)({is:e=>"CommonTableExpressionNode"===e.kind,create:(e,r)=>(0,t.freeze)({kind:"CommonTableExpressionNode",name:e,expression:r}),cloneWith:(e,r)=>(0,t.freeze)({...e,...r})});class Y{#t;constructor(e){this.#t=(0,t.freeze)(e)}materialized(){return new Y({...this.#t,node:H.cloneWith(this.#t.node,{materialized:!0})})}notMaterialized(){return new Y({...this.#t,node:H.cloneWith(this.#t.node,{materialized:!1})})}toOperationNode(){return this.#t.node}}function X(e,r){var i;let o=r((0,_.createQueryCreator)()).toOperationNode();return(0,t.isFunction)(e)?e((i=o,e=>new Y({node:H.create(Z(e),i)}))).toOperationNode():H.create(Z(e),o)}function Z(e){if(!e.includes("("))return G.create(e);{let t=e.split(/[\(\)]/),r=t[0],i=t[1].split(",").map(e=>e.trim());return G.create(r,i)}}let ee=(0,t.freeze)({is:e=>"WithNode"===e.kind,create:(e,r)=>(0,t.freeze)({kind:"WithNode",expressions:(0,t.freeze)([e]),...r}),cloneWithExpression:(e,r)=>(0,t.freeze)({...e,expressions:(0,t.freeze)([...e.expressions,r])})});e.s(["WithNode",0,ee],74515)},80235,67570,e=>{"use strict";let t=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"];function r(e){let r="";for(let i=0;i<e;++i)r+=t[~~(Math.random()*t.length)];return r}function i(){return new o}e.s(["randomString",()=>r],67570);class o{#i;get queryId(){return void 0===this.#i&&(this.#i=r(8)),this.#i}}e.s(["createQueryId",()=>i],80235)},55685,e=>{"use strict";var t=e.i(97278);class r{nodeStack=[];#o=(0,t.freeze)({AliasNode:this.transformAlias.bind(this),ColumnNode:this.transformColumn.bind(this),IdentifierNode:this.transformIdentifier.bind(this),SchemableIdentifierNode:this.transformSchemableIdentifier.bind(this),RawNode:this.transformRaw.bind(this),ReferenceNode:this.transformReference.bind(this),SelectQueryNode:this.transformSelectQuery.bind(this),SelectionNode:this.transformSelection.bind(this),TableNode:this.transformTable.bind(this),FromNode:this.transformFrom.bind(this),SelectAllNode:this.transformSelectAll.bind(this),AndNode:this.transformAnd.bind(this),OrNode:this.transformOr.bind(this),ValueNode:this.transformValue.bind(this),ValueListNode:this.transformValueList.bind(this),PrimitiveValueListNode:this.transformPrimitiveValueList.bind(this),ParensNode:this.transformParens.bind(this),JoinNode:this.transformJoin.bind(this),OperatorNode:this.transformOperator.bind(this),WhereNode:this.transformWhere.bind(this),InsertQueryNode:this.transformInsertQuery.bind(this),DeleteQueryNode:this.transformDeleteQuery.bind(this),ReturningNode:this.transformReturning.bind(this),CreateTableNode:this.transformCreateTable.bind(this),AddColumnNode:this.transformAddColumn.bind(this),ColumnDefinitionNode:this.transformColumnDefinition.bind(this),DropTableNode:this.transformDropTable.bind(this),DataTypeNode:this.transformDataType.bind(this),OrderByNode:this.transformOrderBy.bind(this),OrderByItemNode:this.transformOrderByItem.bind(this),GroupByNode:this.transformGroupBy.bind(this),GroupByItemNode:this.transformGroupByItem.bind(this),UpdateQueryNode:this.transformUpdateQuery.bind(this),ColumnUpdateNode:this.transformColumnUpdate.bind(this),LimitNode:this.transformLimit.bind(this),OffsetNode:this.transformOffset.bind(this),OnConflictNode:this.transformOnConflict.bind(this),OnDuplicateKeyNode:this.transformOnDuplicateKey.bind(this),CreateIndexNode:this.transformCreateIndex.bind(this),DropIndexNode:this.transformDropIndex.bind(this),ListNode:this.transformList.bind(this),PrimaryKeyConstraintNode:this.transformPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.transformUniqueConstraint.bind(this),ReferencesNode:this.transformReferences.bind(this),CheckConstraintNode:this.transformCheckConstraint.bind(this),WithNode:this.transformWith.bind(this),CommonTableExpressionNode:this.transformCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.transformCommonTableExpressionName.bind(this),HavingNode:this.transformHaving.bind(this),CreateSchemaNode:this.transformCreateSchema.bind(this),DropSchemaNode:this.transformDropSchema.bind(this),AlterTableNode:this.transformAlterTable.bind(this),DropColumnNode:this.transformDropColumn.bind(this),RenameColumnNode:this.transformRenameColumn.bind(this),AlterColumnNode:this.transformAlterColumn.bind(this),ModifyColumnNode:this.transformModifyColumn.bind(this),AddConstraintNode:this.transformAddConstraint.bind(this),DropConstraintNode:this.transformDropConstraint.bind(this),RenameConstraintNode:this.transformRenameConstraint.bind(this),ForeignKeyConstraintNode:this.transformForeignKeyConstraint.bind(this),CreateViewNode:this.transformCreateView.bind(this),RefreshMaterializedViewNode:this.transformRefreshMaterializedView.bind(this),DropViewNode:this.transformDropView.bind(this),GeneratedNode:this.transformGenerated.bind(this),DefaultValueNode:this.transformDefaultValue.bind(this),OnNode:this.transformOn.bind(this),ValuesNode:this.transformValues.bind(this),SelectModifierNode:this.transformSelectModifier.bind(this),CreateTypeNode:this.transformCreateType.bind(this),DropTypeNode:this.transformDropType.bind(this),ExplainNode:this.transformExplain.bind(this),DefaultInsertValueNode:this.transformDefaultInsertValue.bind(this),AggregateFunctionNode:this.transformAggregateFunction.bind(this),OverNode:this.transformOver.bind(this),PartitionByNode:this.transformPartitionBy.bind(this),PartitionByItemNode:this.transformPartitionByItem.bind(this),SetOperationNode:this.transformSetOperation.bind(this),BinaryOperationNode:this.transformBinaryOperation.bind(this),UnaryOperationNode:this.transformUnaryOperation.bind(this),UsingNode:this.transformUsing.bind(this),FunctionNode:this.transformFunction.bind(this),CaseNode:this.transformCase.bind(this),WhenNode:this.transformWhen.bind(this),JSONReferenceNode:this.transformJSONReference.bind(this),JSONPathNode:this.transformJSONPath.bind(this),JSONPathLegNode:this.transformJSONPathLeg.bind(this),JSONOperatorChainNode:this.transformJSONOperatorChain.bind(this),TupleNode:this.transformTuple.bind(this),MergeQueryNode:this.transformMergeQuery.bind(this),MatchedNode:this.transformMatched.bind(this),AddIndexNode:this.transformAddIndex.bind(this),CastNode:this.transformCast.bind(this),FetchNode:this.transformFetch.bind(this),TopNode:this.transformTop.bind(this),OutputNode:this.transformOutput.bind(this),OrActionNode:this.transformOrAction.bind(this),CollateNode:this.transformCollate.bind(this)});transformNode(e,r){if(!e)return e;this.nodeStack.push(e);let i=this.transformNodeImpl(e,r);return this.nodeStack.pop(),(0,t.freeze)(i)}transformNodeImpl(e,t){return this.#o[e.kind](e,t)}transformNodeList(e,r){return e?(0,t.freeze)(e.map(e=>this.transformNode(e,r))):e}transformSelectQuery(e,t){return{kind:"SelectQueryNode",from:this.transformNode(e.from,t),selections:this.transformNodeList(e.selections,t),distinctOn:this.transformNodeList(e.distinctOn,t),joins:this.transformNodeList(e.joins,t),groupBy:this.transformNode(e.groupBy,t),orderBy:this.transformNode(e.orderBy,t),where:this.transformNode(e.where,t),frontModifiers:this.transformNodeList(e.frontModifiers,t),endModifiers:this.transformNodeList(e.endModifiers,t),limit:this.transformNode(e.limit,t),offset:this.transformNode(e.offset,t),with:this.transformNode(e.with,t),having:this.transformNode(e.having,t),explain:this.transformNode(e.explain,t),setOperations:this.transformNodeList(e.setOperations,t),fetch:this.transformNode(e.fetch,t),top:this.transformNode(e.top,t)}}transformSelection(e,t){return{kind:"SelectionNode",selection:this.transformNode(e.selection,t)}}transformColumn(e,t){return{kind:"ColumnNode",column:this.transformNode(e.column,t)}}transformAlias(e,t){return{kind:"AliasNode",node:this.transformNode(e.node,t),alias:this.transformNode(e.alias,t)}}transformTable(e,t){return{kind:"TableNode",table:this.transformNode(e.table,t)}}transformFrom(e,t){return{kind:"FromNode",froms:this.transformNodeList(e.froms,t)}}transformReference(e,t){return{kind:"ReferenceNode",column:this.transformNode(e.column,t),table:this.transformNode(e.table,t)}}transformAnd(e,t){return{kind:"AndNode",left:this.transformNode(e.left,t),right:this.transformNode(e.right,t)}}transformOr(e,t){return{kind:"OrNode",left:this.transformNode(e.left,t),right:this.transformNode(e.right,t)}}transformValueList(e,t){return{kind:"ValueListNode",values:this.transformNodeList(e.values,t)}}transformParens(e,t){return{kind:"ParensNode",node:this.transformNode(e.node,t)}}transformJoin(e,t){return{kind:"JoinNode",joinType:e.joinType,table:this.transformNode(e.table,t),on:this.transformNode(e.on,t)}}transformRaw(e,r){return{kind:"RawNode",sqlFragments:(0,t.freeze)([...e.sqlFragments]),parameters:this.transformNodeList(e.parameters,r)}}transformWhere(e,t){return{kind:"WhereNode",where:this.transformNode(e.where,t)}}transformInsertQuery(e,t){return{kind:"InsertQueryNode",into:this.transformNode(e.into,t),columns:this.transformNodeList(e.columns,t),values:this.transformNode(e.values,t),returning:this.transformNode(e.returning,t),onConflict:this.transformNode(e.onConflict,t),onDuplicateKey:this.transformNode(e.onDuplicateKey,t),endModifiers:this.transformNodeList(e.endModifiers,t),with:this.transformNode(e.with,t),ignore:e.ignore,orAction:this.transformNode(e.orAction,t),replace:e.replace,explain:this.transformNode(e.explain,t),defaultValues:e.defaultValues,top:this.transformNode(e.top,t),output:this.transformNode(e.output,t)}}transformValues(e,t){return{kind:"ValuesNode",values:this.transformNodeList(e.values,t)}}transformDeleteQuery(e,t){return{kind:"DeleteQueryNode",from:this.transformNode(e.from,t),using:this.transformNode(e.using,t),joins:this.transformNodeList(e.joins,t),where:this.transformNode(e.where,t),returning:this.transformNode(e.returning,t),endModifiers:this.transformNodeList(e.endModifiers,t),with:this.transformNode(e.with,t),orderBy:this.transformNode(e.orderBy,t),limit:this.transformNode(e.limit,t),explain:this.transformNode(e.explain,t),top:this.transformNode(e.top,t),output:this.transformNode(e.output,t)}}transformReturning(e,t){return{kind:"ReturningNode",selections:this.transformNodeList(e.selections,t)}}transformCreateTable(e,t){return{kind:"CreateTableNode",table:this.transformNode(e.table,t),columns:this.transformNodeList(e.columns,t),constraints:this.transformNodeList(e.constraints,t),temporary:e.temporary,ifNotExists:e.ifNotExists,onCommit:e.onCommit,frontModifiers:this.transformNodeList(e.frontModifiers,t),endModifiers:this.transformNodeList(e.endModifiers,t),selectQuery:this.transformNode(e.selectQuery,t)}}transformColumnDefinition(e,t){return{kind:"ColumnDefinitionNode",column:this.transformNode(e.column,t),dataType:this.transformNode(e.dataType,t),references:this.transformNode(e.references,t),primaryKey:e.primaryKey,autoIncrement:e.autoIncrement,unique:e.unique,notNull:e.notNull,unsigned:e.unsigned,defaultTo:this.transformNode(e.defaultTo,t),check:this.transformNode(e.check,t),generated:this.transformNode(e.generated,t),frontModifiers:this.transformNodeList(e.frontModifiers,t),endModifiers:this.transformNodeList(e.endModifiers,t),nullsNotDistinct:e.nullsNotDistinct,identity:e.identity,ifNotExists:e.ifNotExists}}transformAddColumn(e,t){return{kind:"AddColumnNode",column:this.transformNode(e.column,t)}}transformDropTable(e,t){return{kind:"DropTableNode",table:this.transformNode(e.table,t),ifExists:e.ifExists,cascade:e.cascade}}transformOrderBy(e,t){return{kind:"OrderByNode",items:this.transformNodeList(e.items,t)}}transformOrderByItem(e,t){return{kind:"OrderByItemNode",orderBy:this.transformNode(e.orderBy,t),direction:this.transformNode(e.direction,t),collation:this.transformNode(e.collation,t),nulls:e.nulls}}transformGroupBy(e,t){return{kind:"GroupByNode",items:this.transformNodeList(e.items,t)}}transformGroupByItem(e,t){return{kind:"GroupByItemNode",groupBy:this.transformNode(e.groupBy,t)}}transformUpdateQuery(e,t){return{kind:"UpdateQueryNode",table:this.transformNode(e.table,t),from:this.transformNode(e.from,t),joins:this.transformNodeList(e.joins,t),where:this.transformNode(e.where,t),updates:this.transformNodeList(e.updates,t),returning:this.transformNode(e.returning,t),endModifiers:this.transformNodeList(e.endModifiers,t),with:this.transformNode(e.with,t),explain:this.transformNode(e.explain,t),limit:this.transformNode(e.limit,t),top:this.transformNode(e.top,t),output:this.transformNode(e.output,t),orderBy:this.transformNode(e.orderBy,t)}}transformColumnUpdate(e,t){return{kind:"ColumnUpdateNode",column:this.transformNode(e.column,t),value:this.transformNode(e.value,t)}}transformLimit(e,t){return{kind:"LimitNode",limit:this.transformNode(e.limit,t)}}transformOffset(e,t){return{kind:"OffsetNode",offset:this.transformNode(e.offset,t)}}transformOnConflict(e,t){return{kind:"OnConflictNode",columns:this.transformNodeList(e.columns,t),constraint:this.transformNode(e.constraint,t),indexExpression:this.transformNode(e.indexExpression,t),indexWhere:this.transformNode(e.indexWhere,t),updates:this.transformNodeList(e.updates,t),updateWhere:this.transformNode(e.updateWhere,t),doNothing:e.doNothing}}transformOnDuplicateKey(e,t){return{kind:"OnDuplicateKeyNode",updates:this.transformNodeList(e.updates,t)}}transformCreateIndex(e,t){return{kind:"CreateIndexNode",name:this.transformNode(e.name,t),table:this.transformNode(e.table,t),columns:this.transformNodeList(e.columns,t),unique:e.unique,using:this.transformNode(e.using,t),ifNotExists:e.ifNotExists,where:this.transformNode(e.where,t),nullsNotDistinct:e.nullsNotDistinct}}transformList(e,t){return{kind:"ListNode",items:this.transformNodeList(e.items,t)}}transformDropIndex(e,t){return{kind:"DropIndexNode",name:this.transformNode(e.name,t),table:this.transformNode(e.table,t),ifExists:e.ifExists,cascade:e.cascade}}transformPrimaryKeyConstraint(e,t){return{kind:"PrimaryKeyConstraintNode",columns:this.transformNodeList(e.columns,t),name:this.transformNode(e.name,t),deferrable:e.deferrable,initiallyDeferred:e.initiallyDeferred}}transformUniqueConstraint(e,t){return{kind:"UniqueConstraintNode",columns:this.transformNodeList(e.columns,t),name:this.transformNode(e.name,t),nullsNotDistinct:e.nullsNotDistinct,deferrable:e.deferrable,initiallyDeferred:e.initiallyDeferred}}transformForeignKeyConstraint(e,t){return{kind:"ForeignKeyConstraintNode",columns:this.transformNodeList(e.columns,t),references:this.transformNode(e.references,t),name:this.transformNode(e.name,t),onDelete:e.onDelete,onUpdate:e.onUpdate,deferrable:e.deferrable,initiallyDeferred:e.initiallyDeferred}}transformSetOperation(e,t){return{kind:"SetOperationNode",operator:e.operator,expression:this.transformNode(e.expression,t),all:e.all}}transformReferences(e,t){return{kind:"ReferencesNode",table:this.transformNode(e.table,t),columns:this.transformNodeList(e.columns,t),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformCheckConstraint(e,t){return{kind:"CheckConstraintNode",expression:this.transformNode(e.expression,t),name:this.transformNode(e.name,t)}}transformWith(e,t){return{kind:"WithNode",expressions:this.transformNodeList(e.expressions,t),recursive:e.recursive}}transformCommonTableExpression(e,t){return{kind:"CommonTableExpressionNode",name:this.transformNode(e.name,t),materialized:e.materialized,expression:this.transformNode(e.expression,t)}}transformCommonTableExpressionName(e,t){return{kind:"CommonTableExpressionNameNode",table:this.transformNode(e.table,t),columns:this.transformNodeList(e.columns,t)}}transformHaving(e,t){return{kind:"HavingNode",having:this.transformNode(e.having,t)}}transformCreateSchema(e,t){return{kind:"CreateSchemaNode",schema:this.transformNode(e.schema,t),ifNotExists:e.ifNotExists}}transformDropSchema(e,t){return{kind:"DropSchemaNode",schema:this.transformNode(e.schema,t),ifExists:e.ifExists,cascade:e.cascade}}transformAlterTable(e,t){return{kind:"AlterTableNode",table:this.transformNode(e.table,t),renameTo:this.transformNode(e.renameTo,t),setSchema:this.transformNode(e.setSchema,t),columnAlterations:this.transformNodeList(e.columnAlterations,t),addConstraint:this.transformNode(e.addConstraint,t),dropConstraint:this.transformNode(e.dropConstraint,t),renameConstraint:this.transformNode(e.renameConstraint,t),addIndex:this.transformNode(e.addIndex,t),dropIndex:this.transformNode(e.dropIndex,t)}}transformDropColumn(e,t){return{kind:"DropColumnNode",column:this.transformNode(e.column,t)}}transformRenameColumn(e,t){return{kind:"RenameColumnNode",column:this.transformNode(e.column,t),renameTo:this.transformNode(e.renameTo,t)}}transformAlterColumn(e,t){return{kind:"AlterColumnNode",column:this.transformNode(e.column,t),dataType:this.transformNode(e.dataType,t),dataTypeExpression:this.transformNode(e.dataTypeExpression,t),setDefault:this.transformNode(e.setDefault,t),dropDefault:e.dropDefault,setNotNull:e.setNotNull,dropNotNull:e.dropNotNull}}transformModifyColumn(e,t){return{kind:"ModifyColumnNode",column:this.transformNode(e.column,t)}}transformAddConstraint(e,t){return{kind:"AddConstraintNode",constraint:this.transformNode(e.constraint,t)}}transformDropConstraint(e,t){return{kind:"DropConstraintNode",constraintName:this.transformNode(e.constraintName,t),ifExists:e.ifExists,modifier:e.modifier}}transformRenameConstraint(e,t){return{kind:"RenameConstraintNode",oldName:this.transformNode(e.oldName,t),newName:this.transformNode(e.newName,t)}}transformCreateView(e,t){return{kind:"CreateViewNode",name:this.transformNode(e.name,t),temporary:e.temporary,orReplace:e.orReplace,ifNotExists:e.ifNotExists,materialized:e.materialized,columns:this.transformNodeList(e.columns,t),as:this.transformNode(e.as,t)}}transformRefreshMaterializedView(e,t){return{kind:"RefreshMaterializedViewNode",name:this.transformNode(e.name,t),concurrently:e.concurrently,withNoData:e.withNoData}}transformDropView(e,t){return{kind:"DropViewNode",name:this.transformNode(e.name,t),ifExists:e.ifExists,materialized:e.materialized,cascade:e.cascade}}transformGenerated(e,t){return{kind:"GeneratedNode",byDefault:e.byDefault,always:e.always,identity:e.identity,stored:e.stored,expression:this.transformNode(e.expression,t)}}transformDefaultValue(e,t){return{kind:"DefaultValueNode",defaultValue:this.transformNode(e.defaultValue,t)}}transformOn(e,t){return{kind:"OnNode",on:this.transformNode(e.on,t)}}transformSelectModifier(e,t){return{kind:"SelectModifierNode",modifier:e.modifier,rawModifier:this.transformNode(e.rawModifier,t),of:this.transformNodeList(e.of,t)}}transformCreateType(e,t){return{kind:"CreateTypeNode",name:this.transformNode(e.name,t),enum:this.transformNode(e.enum,t)}}transformDropType(e,t){return{kind:"DropTypeNode",name:this.transformNode(e.name,t),ifExists:e.ifExists}}transformExplain(e,t){return{kind:"ExplainNode",format:e.format,options:this.transformNode(e.options,t)}}transformSchemableIdentifier(e,t){return{kind:"SchemableIdentifierNode",schema:this.transformNode(e.schema,t),identifier:this.transformNode(e.identifier,t)}}transformAggregateFunction(e,t){return{kind:"AggregateFunctionNode",func:e.func,aggregated:this.transformNodeList(e.aggregated,t),distinct:e.distinct,orderBy:this.transformNode(e.orderBy,t),withinGroup:this.transformNode(e.withinGroup,t),filter:this.transformNode(e.filter,t),over:this.transformNode(e.over,t)}}transformOver(e,t){return{kind:"OverNode",orderBy:this.transformNode(e.orderBy,t),partitionBy:this.transformNode(e.partitionBy,t)}}transformPartitionBy(e,t){return{kind:"PartitionByNode",items:this.transformNodeList(e.items,t)}}transformPartitionByItem(e,t){return{kind:"PartitionByItemNode",partitionBy:this.transformNode(e.partitionBy,t)}}transformBinaryOperation(e,t){return{kind:"BinaryOperationNode",leftOperand:this.transformNode(e.leftOperand,t),operator:this.transformNode(e.operator,t),rightOperand:this.transformNode(e.rightOperand,t)}}transformUnaryOperation(e,t){return{kind:"UnaryOperationNode",operator:this.transformNode(e.operator,t),operand:this.transformNode(e.operand,t)}}transformUsing(e,t){return{kind:"UsingNode",tables:this.transformNodeList(e.tables,t)}}transformFunction(e,t){return{kind:"FunctionNode",func:e.func,arguments:this.transformNodeList(e.arguments,t)}}transformCase(e,t){return{kind:"CaseNode",value:this.transformNode(e.value,t),when:this.transformNodeList(e.when,t),else:this.transformNode(e.else,t),isStatement:e.isStatement}}transformWhen(e,t){return{kind:"WhenNode",condition:this.transformNode(e.condition,t),result:this.transformNode(e.result,t)}}transformJSONReference(e,t){return{kind:"JSONReferenceNode",reference:this.transformNode(e.reference,t),traversal:this.transformNode(e.traversal,t)}}transformJSONPath(e,t){return{kind:"JSONPathNode",inOperator:this.transformNode(e.inOperator,t),pathLegs:this.transformNodeList(e.pathLegs,t)}}transformJSONPathLeg(e,t){return{kind:"JSONPathLegNode",type:e.type,value:e.value}}transformJSONOperatorChain(e,t){return{kind:"JSONOperatorChainNode",operator:this.transformNode(e.operator,t),values:this.transformNodeList(e.values,t)}}transformTuple(e,t){return{kind:"TupleNode",values:this.transformNodeList(e.values,t)}}transformMergeQuery(e,t){return{kind:"MergeQueryNode",into:this.transformNode(e.into,t),using:this.transformNode(e.using,t),whens:this.transformNodeList(e.whens,t),with:this.transformNode(e.with,t),top:this.transformNode(e.top,t),endModifiers:this.transformNodeList(e.endModifiers,t),output:this.transformNode(e.output,t),returning:this.transformNode(e.returning,t)}}transformMatched(e,t){return{kind:"MatchedNode",not:e.not,bySource:e.bySource}}transformAddIndex(e,t){return{kind:"AddIndexNode",name:this.transformNode(e.name,t),columns:this.transformNodeList(e.columns,t),unique:e.unique,using:this.transformNode(e.using,t),ifNotExists:e.ifNotExists}}transformCast(e,t){return{kind:"CastNode",expression:this.transformNode(e.expression,t),dataType:this.transformNode(e.dataType,t)}}transformFetch(e,t){return{kind:"FetchNode",rowCount:this.transformNode(e.rowCount,t),modifier:e.modifier}}transformTop(e,t){return{kind:"TopNode",expression:e.expression,modifiers:e.modifiers}}transformOutput(e,t){return{kind:"OutputNode",selections:this.transformNodeList(e.selections,t)}}transformDataType(e,t){return e}transformSelectAll(e,t){return e}transformIdentifier(e,t){return e}transformValue(e,t){return e}transformPrimitiveValueList(e,t){return e}transformOperator(e,t){return e}transformDefaultInsertValue(e,t){return e}transformOrAction(e,t){return e}transformCollate(e,t){return e}}e.s(["OperationNodeTransformer",()=>r],55685)},290,e=>{"use strict";var t=e.i(32160),r=e.i(90543),i=e.i(88176),o=e.i(85034),n=e.i(55685),s=e.i(39970),a=e.i(30868),d=e.i(36142);let p=(0,e.i(97278).freeze)({AlterTableNode:!0,CreateIndexNode:!0,CreateSchemaNode:!0,CreateTableNode:!0,CreateTypeNode:!0,CreateViewNode:!0,RefreshMaterializedViewNode:!0,DeleteQueryNode:!0,DropIndexNode:!0,DropSchemaNode:!0,DropTableNode:!0,DropTypeNode:!0,DropViewNode:!0,InsertQueryNode:!0,RawNode:!0,SelectQueryNode:!0,UpdateQueryNode:!0,MergeQueryNode:!0}),h={json_agg:!0,to_json:!0};class u extends n.OperationNodeTransformer{#n;#s=new Set;#a=new Set;constructor(e){super(),this.#n=e}transformNodeImpl(e,t){if(!this.#d(e))return super.transformNodeImpl(e,t);let r=this.#p(e);for(let e of r)this.#a.add(e);let i=this.#h(e);for(let e of i)this.#s.add(e);let o=super.transformNodeImpl(e,t);for(let e of i)this.#s.delete(e);for(let e of r)this.#a.delete(e);return o}transformSchemableIdentifier(e,t){let i=super.transformSchemableIdentifier(e,t);return i.schema||!this.#s.has(e.identifier.name)?i:{...i,schema:r.IdentifierNode.create(this.#n)}}transformReferences(e,t){let r=super.transformReferences(e,t);return r.table.table.schema?r:{...r,table:a.TableNode.createWithSchema(this.#n,r.table.table.identifier.name)}}transformAggregateFunction(e,t){return{...super.transformAggregateFunction({...e,aggregated:[]},t),aggregated:this.#u(e,t,"aggregated")}}transformFunction(e,t){return{...super.transformFunction({...e,arguments:[]},t),arguments:this.#u(e,t,"arguments")}}transformSelectModifier(e,t){return{...super.transformSelectModifier({...e,of:void 0},t),of:e.of?.map(e=>a.TableNode.is(e)&&!e.table.schema?{...e,table:this.transformIdentifier(e.table.identifier,t)}:this.transformNode(e,t))}}#u(e,t,r){return h[e.func]?e[r].map(e=>!a.TableNode.is(e)||e.table.schema?this.transformNode(e,t):{...e,table:this.transformIdentifier(e.table.identifier,t)}):this.transformNodeList(e[r],t)}#d(e){return e.kind in p}#h(e){let t=new Set;if("name"in e&&e.name&&s.SchemableIdentifierNode.is(e.name)&&this.#l(e.name,t),"from"in e&&e.from)for(let r of e.from.froms)this.#c(r,t);if("into"in e&&e.into&&this.#c(e.into,t),"table"in e&&e.table&&this.#c(e.table,t),"joins"in e&&e.joins)for(let r of e.joins)this.#c(r.table,t);return"using"in e&&e.using&&(i.JoinNode.is(e.using)?this.#c(e.using.table,t):this.#c(e.using,t)),t}#p(e){let t=new Set;return"with"in e&&e.with&&this.#f(e.with,t),t}#c(e,r){if(a.TableNode.is(e))return this.#l(e.table,r);if(t.AliasNode.is(e)&&a.TableNode.is(e.node))return this.#l(e.node.table,r);if(o.ListNode.is(e)){for(let t of e.items)this.#c(t,r);return}if(d.UsingNode.is(e)){for(let t of e.tables)this.#c(t,r);return}}#l(e,t){let r=e.identifier.name;this.#s.has(r)||this.#a.has(r)||t.add(r)}#f(e,t){for(let r of e.expressions){let e=r.name.table.table.identifier.name;this.#a.has(e)||t.add(e)}}}class l{#N;constructor(e){this.#N=new u(e)}transformQuery(e){return this.#N.transformNode(e.node,e.queryId)}async transformResult(e){return e.result}}e.s(["WithSchemaPlugin",()=>l],290)},45982,29746,92799,78530,13590,94601,56018,94637,68221,e=>{"use strict";e.s(["parseJoin",()=>G],45982);var t=e.i(88176),r=e.i(62393);e.s(["createJoinBuilder",()=>$,"createOverBuilder",()=>K,"createQueryCreator",()=>j],56018);var i=e.i(35954),o=e.i(33724),n=e.i(12912);e.s(["QueryCreator",()=>J],94601);var s=e.i(34773),a=e.i(48150),d=e.i(70201),p=e.i(10166),h=e.i(41809),u=e.i(57002),l=e.i(92817),c=e.i(71932),f=e.i(82158),N=e.i(81821),m=e.i(74515),y=e.i(80235),g=e.i(290),v=e.i(97278),w=e.i(36909),O=e.i(7593),b=e.i(84190),x=e.i(94430);let W=(0,v.freeze)({is:e=>"MatchedNode"===e.kind,create:(e,t=!1)=>(0,v.freeze)({kind:"MatchedNode",not:e,bySource:t})});var S=e.i(41806),C=e.i(60911),I=e.i(63116);function B(e,t,i){return I.WhenNode.create((0,r.parseFilterList)([W.create(!e.isMatched,e.bySource),...t&&t.length>0?[3===t.length&&i?(0,r.parseReferentialBinaryOperation)(t[0],t[1],t[2]):(0,r.parseValueBinaryOperationOrExpression)(t)]:[]],"and",!1))}function z(e){return(0,v.isString)(e)?C.RawNode.create([e],[]):(0,S.isOperationNodeSource)(e)?e.toOperationNode():e}var E=e.i(7970);class k{#m;#y;#g;constructor(){this.#m=new Promise((e,t)=>{this.#g=t,this.#y=e})}get promise(){return this.#m}resolve=e=>{this.#y&&this.#y(e)};reject=e=>{this.#g&&this.#g(e)}}async function q(e){let t=new k,r=new k;return e.provideConnection(async e=>(t.resolve(e),await r.promise)).catch(e=>t.reject(e)),(0,v.freeze)({connection:await t.promise,release:r.resolve})}e.s(["Deferred",()=>k],29746),e.s(["provideControlledConnection",()=>q],92799);var T=e.i(65942);let A=(0,v.freeze)([]);class R{#v;constructor(e=A){this.#v=e}get plugins(){return this.#v}transformQuery(e,t){for(let r of this.#v){let i=r.transformQuery({node:e,queryId:t});if(i.kind===e.kind)e=i;else throw Error(`KyselyPlugin.transformQuery must return a node of the same kind that was given to it. The plugin was given a ${e.kind} but it returned a ${i.kind}`)}return e}async executeQuery(e){return await this.provideConnection(async t=>{let r=await t.executeQuery(e);return"numUpdatedOrDeletedRows"in r&&(0,T.logOnce)("kysely:warning: outdated driver/plugin detected! `QueryResult.numUpdatedOrDeletedRows` has been replaced with `QueryResult.numAffectedRows`."),await this.#w(r,e.queryId)})}async *stream(e,t){let{connection:r,release:i}=await q(this);try{for await(let i of r.streamQuery(e,t))yield await this.#w(i,e.queryId)}finally{i()}}async #w(e,t){for(let r of this.#v)e=await r.transformResult({result:e,queryId:t});return e}}e.s(["QueryExecutorBase",()=>R],78530);class L extends R{get adapter(){throw Error("this query cannot be compiled to SQL")}compileQuery(){throw Error("this query cannot be compiled to SQL")}provideConnection(){throw Error("this query cannot be executed")}withConnectionProvider(){throw Error("this query cannot have a connection provider")}withPlugin(e){return new L([...this.plugins,e])}withPlugins(e){return new L([...this.plugins,...e])}withPluginAtFront(e){return new L([e,...this.plugins])}withoutPlugins(){return new L([])}}let Q=new L;e.s(["NOOP_QUERY_EXECUTOR",0,Q],13590);class M{numChangedRows;constructor(e){this.numChangedRows=e}}var D=e.i(32729);class F{#t;constructor(e){this.#t=(0,v.freeze)(e)}modifyEnd(e){return new F({...this.#t,queryNode:b.QueryNode.cloneWithEndModifier(this.#t.queryNode,e.toOperationNode())})}top(e,t){return new F({...this.#t,queryNode:b.QueryNode.cloneWithTop(this.#t.queryNode,(0,E.parseTop)(e,t))})}using(...e){return new U({...this.#t,queryNode:O.MergeQueryNode.cloneWithUsing(this.#t.queryNode,G("Using",e))})}returning(e){return new F({...this.#t,queryNode:b.QueryNode.cloneWithReturning(this.#t.queryNode,(0,w.parseSelectArg)(e))})}returningAll(e){return new F({...this.#t,queryNode:b.QueryNode.cloneWithReturning(this.#t.queryNode,(0,w.parseSelectAll)(e))})}output(e){return new F({...this.#t,queryNode:b.QueryNode.cloneWithOutput(this.#t.queryNode,(0,w.parseSelectArg)(e))})}outputAll(e){return new F({...this.#t,queryNode:b.QueryNode.cloneWithOutput(this.#t.queryNode,(0,w.parseSelectAll)(e))})}}class U{#t;constructor(e){this.#t=(0,v.freeze)(e)}modifyEnd(e){return new U({...this.#t,queryNode:b.QueryNode.cloneWithEndModifier(this.#t.queryNode,e.toOperationNode())})}top(e,t){return new U({...this.#t,queryNode:b.QueryNode.cloneWithTop(this.#t.queryNode,(0,E.parseTop)(e,t))})}whenMatched(){return this.#O([])}whenMatchedAnd(...e){return this.#O(e)}whenMatchedAndRef(e,t,r){return this.#O([e,t,r],!0)}#O(e,t){return new V({...this.#t,queryNode:O.MergeQueryNode.cloneWithWhen(this.#t.queryNode,B({isMatched:!0},e,t))})}whenNotMatched(){return this.#b([])}whenNotMatchedAnd(...e){return this.#b(e)}whenNotMatchedAndRef(e,t,r){return this.#b([e,t,r],!0)}whenNotMatchedBySource(){return this.#b([],!1,!0)}whenNotMatchedBySourceAnd(...e){return this.#b(e,!1,!0)}whenNotMatchedBySourceAndRef(e,t,r){return this.#b([e,t,r],!0,!0)}returning(e){return new U({...this.#t,queryNode:b.QueryNode.cloneWithReturning(this.#t.queryNode,(0,w.parseSelectArg)(e))})}returningAll(e){return new U({...this.#t,queryNode:b.QueryNode.cloneWithReturning(this.#t.queryNode,(0,w.parseSelectAll)(e))})}output(e){return new U({...this.#t,queryNode:b.QueryNode.cloneWithOutput(this.#t.queryNode,(0,w.parseSelectArg)(e))})}outputAll(e){return new U({...this.#t,queryNode:b.QueryNode.cloneWithOutput(this.#t.queryNode,(0,w.parseSelectAll)(e))})}#b(e,t=!1,r=!1){let i={...this.#t,queryNode:O.MergeQueryNode.cloneWithWhen(this.#t.queryNode,B({isMatched:!1,bySource:r},e,t))};return new(r?V:P)(i)}$call(e){return e(this)}$if(e,t){return e?t(this):new U({...this.#t})}toOperationNode(){return this.#t.executor.transformQuery(this.#t.queryNode,this.#t.queryId)}compile(){return this.#t.executor.compileQuery(this.toOperationNode(),this.#t.queryId)}async execute(){let e=this.compile(),t=await this.#t.executor.executeQuery(e),{adapter:r}=this.#t.executor,i=e.query;return i.returning&&r.supportsReturning||i.output&&r.supportsOutput?t.rows:[new M(t.numAffectedRows)]}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=D.NoResultError){let t=await this.executeTakeFirst();if(void 0===t)throw(0,D.isNoResultErrorConstructor)(e)?new e(this.toOperationNode()):e(this.toOperationNode());return t}}class V{#t;constructor(e){this.#t=(0,v.freeze)(e)}thenDelete(){return new U({...this.#t,queryNode:O.MergeQueryNode.cloneWithThen(this.#t.queryNode,z("delete"))})}thenDoNothing(){return new U({...this.#t,queryNode:O.MergeQueryNode.cloneWithThen(this.#t.queryNode,z("do nothing"))})}thenUpdate(e){return new U({...this.#t,queryNode:O.MergeQueryNode.cloneWithThen(this.#t.queryNode,z(e(new p.UpdateQueryBuilder({queryId:this.#t.queryId,executor:Q,queryNode:c.UpdateQueryNode.createWithoutTable()}))))})}thenUpdateSet(...e){return this.thenUpdate(t=>t.set(...e))}}class P{#t;constructor(e){this.#t=(0,v.freeze)(e)}thenDoNothing(){return new U({...this.#t,queryNode:O.MergeQueryNode.cloneWithThen(this.#t.queryNode,z("do nothing"))})}thenInsertValues(e){let[t,r]=(0,x.parseInsertExpression)(e);return new U({...this.#t,queryNode:O.MergeQueryNode.cloneWithThen(this.#t.queryNode,z(u.InsertQueryNode.cloneWith(u.InsertQueryNode.createWithoutInto(),{columns:t,values:r})))})}}class J{#t;constructor(e){this.#t=(0,v.freeze)(e)}selectFrom(e){return(0,s.createSelectQueryBuilder)({queryId:(0,y.createQueryId)(),executor:this.#t.executor,queryNode:l.SelectQueryNode.createFrom((0,f.parseTableExpressionOrList)(e),this.#t.withNode)})}selectNoFrom(e){return(0,s.createSelectQueryBuilder)({queryId:(0,y.createQueryId)(),executor:this.#t.executor,queryNode:l.SelectQueryNode.cloneWithSelections(l.SelectQueryNode.create(this.#t.withNode),(0,w.parseSelectArg)(e))})}insertInto(e){return new a.InsertQueryBuilder({queryId:(0,y.createQueryId)(),executor:this.#t.executor,queryNode:u.InsertQueryNode.create((0,f.parseTable)(e),this.#t.withNode)})}replaceInto(e){return new a.InsertQueryBuilder({queryId:(0,y.createQueryId)(),executor:this.#t.executor,queryNode:u.InsertQueryNode.create((0,f.parseTable)(e),this.#t.withNode,!0)})}deleteFrom(e){return new d.DeleteQueryBuilder({queryId:(0,y.createQueryId)(),executor:this.#t.executor,queryNode:h.DeleteQueryNode.create((0,f.parseTableExpressionOrList)(e),this.#t.withNode)})}updateTable(e){return new p.UpdateQueryBuilder({queryId:(0,y.createQueryId)(),executor:this.#t.executor,queryNode:c.UpdateQueryNode.create((0,f.parseTableExpressionOrList)(e),this.#t.withNode)})}mergeInto(e){return new F({queryId:(0,y.createQueryId)(),executor:this.#t.executor,queryNode:O.MergeQueryNode.create((0,f.parseAliasedTable)(e),this.#t.withNode)})}with(e,t){let r=(0,N.parseCommonTableExpression)(e,t);return new J({...this.#t,withNode:this.#t.withNode?m.WithNode.cloneWithExpression(this.#t.withNode,r):m.WithNode.create(r)})}withRecursive(e,t){let r=(0,N.parseCommonTableExpression)(e,t);return new J({...this.#t,withNode:this.#t.withNode?m.WithNode.cloneWithExpression(this.#t.withNode,r):m.WithNode.create(r,{recursive:!0})})}withPlugin(e){return new J({...this.#t,executor:this.#t.executor.withPlugin(e)})}withoutPlugins(){return new J({...this.#t,executor:this.#t.executor.withoutPlugins()})}withSchema(e){return new J({...this.#t,executor:this.#t.executor.withPluginAtFront(new g.WithSchemaPlugin(e))})}}function j(){return new J({executor:Q})}function $(e,r){return new o.JoinBuilder({joinNode:t.JoinNode.create(e,(0,f.parseTableExpression)(r))})}function K(){return new n.OverBuilder({overNode:i.OverNode.create()})}function G(e,i){var o,n,s,a,d,p,h,u;if(3===i.length){return o=e,n=i[0],s=i[1],a=i[2],t.JoinNode.createWithOn(o,(0,f.parseTableExpression)(n),(0,r.parseReferentialBinaryOperation)(s,"=",a))}if(2===i.length){return d=e,p=i[0],(0,i[1])($(d,p)).toOperationNode()}if(1===i.length){return h=e,u=i[0],t.JoinNode.create(h,(0,f.parseTableExpression)(u))}throw Error("not implemented")}let _=(0,v.freeze)({is:e=>"OffsetNode"===e.kind,create:e=>(0,v.freeze)({kind:"OffsetNode",offset:e})});e.s(["OffsetNode",0,_],94637),e.s(["parseGroupBy",()=>Z],68221);let H=(0,v.freeze)({is:e=>"GroupByItemNode"===e.kind,create:e=>(0,v.freeze)({kind:"GroupByItemNode",groupBy:e})});var Y=e.i(63690),X=e.i(22921);function Z(e){return e=(0,v.isFunction)(e)?e((0,Y.expressionBuilder)()):e,(0,X.parseReferenceExpressionOrList)(e).map(H.create)}},35189,e=>{"use strict";var t=e.i(97278);let r=(0,t.freeze)({is:e=>"SetOperationNode"===e.kind,create:(e,r,i)=>(0,t.freeze)({kind:"SetOperationNode",operator:e,expression:r,all:i})});e.s(["SetOperationNode",0,r])},34773,24866,62080,47129,58354,50582,e=>{"use strict";e.s(["createSelectQueryBuilder",()=>A],34773);var t=e.i(32160),r=e.i(99258),i=e.i(45982),o=e.i(82158),n=e.i(36909),s=e.i(22921),a=e.i(92817),d=e.i(84190),p=e.i(65900),h=e.i(9361),u=e.i(94637),l=e.i(97278),c=e.i(68221),f=e.i(32729),N=e.i(90543),m=e.i(63690),y=e.i(35189),g=e.i(57852);function v(e,t,r){return(0,l.isFunction)(t)&&(t=t((0,m.createExpressionBuilder)())),(0,l.isReadonlyArray)(t)||(t=[t]),t.map(t=>y.SetOperationNode.create(e,(0,g.parseExpression)(t),r))}var w=e.i(62393);e.s(["ExpressionWrapper",()=>S],24866);var O=e.i(21663),b=e.i(41806),x=e.i(14255),W=e.i(59827);class S{#x;constructor(e){this.#x=e}get expressionType(){}as(e){return new C(this,e)}or(...e){return new I(x.OrNode.create(this.#x,(0,w.parseValueBinaryOperationOrExpression)(e)))}and(...e){return new B(O.AndNode.create(this.#x,(0,w.parseValueBinaryOperationOrExpression)(e)))}$castTo(){return new S(this.#x)}$notNull(){return new S(this.#x)}toOperationNode(){return this.#x}}class C{#W;#S;constructor(e,t){this.#W=e,this.#S=t}get expression(){return this.#W}get alias(){return this.#S}toOperationNode(){return t.AliasNode.create(this.#W.toOperationNode(),(0,b.isOperationNodeSource)(this.#S)?this.#S.toOperationNode():N.IdentifierNode.create(this.#S))}}class I{#x;constructor(e){this.#x=e}get expressionType(){}as(e){return new C(this,e)}or(...e){return new I(x.OrNode.create(this.#x,(0,w.parseValueBinaryOperationOrExpression)(e)))}$castTo(){return new I(this.#x)}toOperationNode(){return W.ParensNode.create(this.#x)}}class B{#x;constructor(e){this.#x=e}get expressionType(){}as(e){return new C(this,e)}and(...e){return new B(O.AndNode.create(this.#x,(0,w.parseValueBinaryOperationOrExpression)(e)))}$castTo(){return new B(this.#x)}toOperationNode(){return W.ParensNode.create(this.#x)}}var z=e.i(30664),E=e.i(28442);let k=(0,l.freeze)({is:e=>"FetchNode"===e.kind,create:(e,t)=>({kind:"FetchNode",rowCount:E.ValueNode.create(e),modifier:t})});var q=e.i(7970);class T{#t;constructor(e){this.#t=(0,l.freeze)(e)}get expressionType(){}get isSelectQueryBuilder(){return!0}where(...e){return new T({...this.#t,queryNode:d.QueryNode.cloneWithWhere(this.#t.queryNode,(0,w.parseValueBinaryOperationOrExpression)(e))})}whereRef(e,t,r){return new T({...this.#t,queryNode:d.QueryNode.cloneWithWhere(this.#t.queryNode,(0,w.parseReferentialBinaryOperation)(e,t,r))})}having(...e){return new T({...this.#t,queryNode:a.SelectQueryNode.cloneWithHaving(this.#t.queryNode,(0,w.parseValueBinaryOperationOrExpression)(e))})}havingRef(e,t,r){return new T({...this.#t,queryNode:a.SelectQueryNode.cloneWithHaving(this.#t.queryNode,(0,w.parseReferentialBinaryOperation)(e,t,r))})}select(e){return new T({...this.#t,queryNode:a.SelectQueryNode.cloneWithSelections(this.#t.queryNode,(0,n.parseSelectArg)(e))})}distinctOn(e){return new T({...this.#t,queryNode:a.SelectQueryNode.cloneWithDistinctOn(this.#t.queryNode,(0,s.parseReferenceExpressionOrList)(e))})}modifyFront(e){return new T({...this.#t,queryNode:a.SelectQueryNode.cloneWithFrontModifier(this.#t.queryNode,r.SelectModifierNode.createWithExpression(e.toOperationNode()))})}modifyEnd(e){return new T({...this.#t,queryNode:d.QueryNode.cloneWithEndModifier(this.#t.queryNode,r.SelectModifierNode.createWithExpression(e.toOperationNode()))})}distinct(){return new T({...this.#t,queryNode:a.SelectQueryNode.cloneWithFrontModifier(this.#t.queryNode,r.SelectModifierNode.create("Distinct"))})}forUpdate(e){return new T({...this.#t,queryNode:d.QueryNode.cloneWithEndModifier(this.#t.queryNode,r.SelectModifierNode.create("ForUpdate",e?(0,l.asArray)(e).map(o.parseTable):void 0))})}forShare(e){return new T({...this.#t,queryNode:d.QueryNode.cloneWithEndModifier(this.#t.queryNode,r.SelectModifierNode.create("ForShare",e?(0,l.asArray)(e).map(o.parseTable):void 0))})}forKeyShare(e){return new T({...this.#t,queryNode:d.QueryNode.cloneWithEndModifier(this.#t.queryNode,r.SelectModifierNode.create("ForKeyShare",e?(0,l.asArray)(e).map(o.parseTable):void 0))})}forNoKeyUpdate(e){return new T({...this.#t,queryNode:d.QueryNode.cloneWithEndModifier(this.#t.queryNode,r.SelectModifierNode.create("ForNoKeyUpdate",e?(0,l.asArray)(e).map(o.parseTable):void 0))})}skipLocked(){return new T({...this.#t,queryNode:d.QueryNode.cloneWithEndModifier(this.#t.queryNode,r.SelectModifierNode.create("SkipLocked"))})}noWait(){return new T({...this.#t,queryNode:d.QueryNode.cloneWithEndModifier(this.#t.queryNode,r.SelectModifierNode.create("NoWait"))})}selectAll(e){return new T({...this.#t,queryNode:a.SelectQueryNode.cloneWithSelections(this.#t.queryNode,(0,n.parseSelectAll)(e))})}innerJoin(...e){return this.#r("InnerJoin",e)}leftJoin(...e){return this.#r("LeftJoin",e)}rightJoin(...e){return this.#r("RightJoin",e)}fullJoin(...e){return this.#r("FullJoin",e)}crossJoin(...e){return this.#r("CrossJoin",e)}innerJoinLateral(...e){return this.#r("LateralInnerJoin",e)}leftJoinLateral(...e){return this.#r("LateralLeftJoin",e)}crossJoinLateral(...e){return this.#r("LateralCrossJoin",e)}crossApply(...e){return this.#r("CrossApply",e)}outerApply(...e){return this.#r("OuterApply",e)}#r(e,t){return new T({...this.#t,queryNode:d.QueryNode.cloneWithJoin(this.#t.queryNode,(0,i.parseJoin)(e,t))})}orderBy(...e){return new T({...this.#t,queryNode:d.QueryNode.cloneWithOrderByItems(this.#t.queryNode,(0,p.parseOrderBy)(e))})}groupBy(e){return new T({...this.#t,queryNode:a.SelectQueryNode.cloneWithGroupByItems(this.#t.queryNode,(0,c.parseGroupBy)(e))})}limit(e){return new T({...this.#t,queryNode:a.SelectQueryNode.cloneWithLimit(this.#t.queryNode,h.LimitNode.create((0,z.parseValueExpression)(e)))})}offset(e){return new T({...this.#t,queryNode:a.SelectQueryNode.cloneWithOffset(this.#t.queryNode,u.OffsetNode.create((0,z.parseValueExpression)(e)))})}fetch(e,t="only"){return new T({...this.#t,queryNode:a.SelectQueryNode.cloneWithFetch(this.#t.queryNode,function(e,t){var r;if(!(0,l.isNumber)(e)&&!(0,l.isBigInt)(e))throw Error(`Invalid fetch row count: ${e}`);if("only"!==(r=t)&&"with ties"!==r)throw Error(`Invalid fetch modifier: ${t}`);return k.create(e,t)}(e,t))})}top(e,t){return new T({...this.#t,queryNode:d.QueryNode.cloneWithTop(this.#t.queryNode,(0,q.parseTop)(e,t))})}union(e){return new T({...this.#t,queryNode:a.SelectQueryNode.cloneWithSetOperations(this.#t.queryNode,v("union",e,!1))})}unionAll(e){return new T({...this.#t,queryNode:a.SelectQueryNode.cloneWithSetOperations(this.#t.queryNode,v("union",e,!0))})}intersect(e){return new T({...this.#t,queryNode:a.SelectQueryNode.cloneWithSetOperations(this.#t.queryNode,v("intersect",e,!1))})}intersectAll(e){return new T({...this.#t,queryNode:a.SelectQueryNode.cloneWithSetOperations(this.#t.queryNode,v("intersect",e,!0))})}except(e){return new T({...this.#t,queryNode:a.SelectQueryNode.cloneWithSetOperations(this.#t.queryNode,v("except",e,!1))})}exceptAll(e){return new T({...this.#t,queryNode:a.SelectQueryNode.cloneWithSetOperations(this.#t.queryNode,v("except",e,!0))})}as(e){return new R(this,e)}clearSelect(){return new T({...this.#t,queryNode:a.SelectQueryNode.cloneWithoutSelections(this.#t.queryNode)})}clearWhere(){return new T({...this.#t,queryNode:d.QueryNode.cloneWithoutWhere(this.#t.queryNode)})}clearLimit(){return new T({...this.#t,queryNode:a.SelectQueryNode.cloneWithoutLimit(this.#t.queryNode)})}clearOffset(){return new T({...this.#t,queryNode:a.SelectQueryNode.cloneWithoutOffset(this.#t.queryNode)})}clearOrderBy(){return new T({...this.#t,queryNode:d.QueryNode.cloneWithoutOrderBy(this.#t.queryNode)})}clearGroupBy(){return new T({...this.#t,queryNode:a.SelectQueryNode.cloneWithoutGroupBy(this.#t.queryNode)})}$call(e){return e(this)}$if(e,t){return e?t(this):new T({...this.#t})}$castTo(){return new T(this.#t)}$narrowType(){return new T(this.#t)}$assertType(){return new T(this.#t)}$asTuple(){return new S(this.toOperationNode())}$asScalar(){return new S(this.toOperationNode())}withPlugin(e){return new T({...this.#t,executor:this.#t.executor.withPlugin(e)})}toOperationNode(){return this.#t.executor.transformQuery(this.#t.queryNode,this.#t.queryId)}compile(){return this.#t.executor.compileQuery(this.toOperationNode(),this.#t.queryId)}async execute(){let e=this.compile();return(await this.#t.executor.executeQuery(e)).rows}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=f.NoResultError){let t=await this.executeTakeFirst();if(void 0===t)throw(0,f.isNoResultErrorConstructor)(e)?new e(this.toOperationNode()):e(this.toOperationNode());return t}async *stream(e=100){let t=this.compile();for await(let r of this.#t.executor.stream(t,e))yield*r.rows}async explain(e,t){let r=new T({...this.#t,queryNode:d.QueryNode.cloneWithExplain(this.#t.queryNode,e,t)});return await r.execute()}}function A(e){return new T(e)}class R{#C;#S;constructor(e,t){this.#C=e,this.#S=t}get expression(){return this.#C}get alias(){return this.#S}get isAliasedSelectQueryBuilder(){return!0}toOperationNode(){return t.AliasNode.create(this.#C.toOperationNode(),N.IdentifierNode.create(this.#S))}}e.s(["createFunctionModule",()=>P],62080);var L=e.i(6341),Q=e.i(10824);let M=(0,l.freeze)({is:e=>"AggregateFunctionNode"===e.kind,create:(e,t=[])=>(0,l.freeze)({kind:"AggregateFunctionNode",func:e,aggregated:t}),cloneWithDistinct:e=>(0,l.freeze)({...e,distinct:!0}),cloneWithOrderBy(e,t,r=!1){let i=r?"withinGroup":"orderBy";return(0,l.freeze)({...e,[i]:e[i]?Q.OrderByNode.cloneWithItems(e[i],t):Q.OrderByNode.create(t)})},cloneWithFilter:(e,t)=>(0,l.freeze)({...e,filter:e.filter?L.WhereNode.cloneWithOperation(e.filter,"And",t):L.WhereNode.create(t)}),cloneWithOrFilter:(e,t)=>(0,l.freeze)({...e,filter:e.filter?L.WhereNode.cloneWithOperation(e.filter,"Or",t):L.WhereNode.create(t)}),cloneWithOver:(e,t)=>(0,l.freeze)({...e,over:t})}),D=(0,l.freeze)({is:e=>"FunctionNode"===e.kind,create:(e,t)=>(0,l.freeze)({kind:"FunctionNode",func:e,arguments:t})});var F=e.i(56018);class U{#t;constructor(e){this.#t=(0,l.freeze)(e)}get expressionType(){}as(e){return new V(this,e)}distinct(){return new U({...this.#t,aggregateFunctionNode:M.cloneWithDistinct(this.#t.aggregateFunctionNode)})}orderBy(...e){return new U({...this.#t,aggregateFunctionNode:d.QueryNode.cloneWithOrderByItems(this.#t.aggregateFunctionNode,(0,p.parseOrderBy)(e))})}clearOrderBy(){return new U({...this.#t,aggregateFunctionNode:d.QueryNode.cloneWithoutOrderBy(this.#t.aggregateFunctionNode)})}withinGroupOrderBy(...e){return new U({...this.#t,aggregateFunctionNode:M.cloneWithOrderBy(this.#t.aggregateFunctionNode,(0,p.parseOrderBy)(e),!0)})}filterWhere(...e){return new U({...this.#t,aggregateFunctionNode:M.cloneWithFilter(this.#t.aggregateFunctionNode,(0,w.parseValueBinaryOperationOrExpression)(e))})}filterWhereRef(e,t,r){return new U({...this.#t,aggregateFunctionNode:M.cloneWithFilter(this.#t.aggregateFunctionNode,(0,w.parseReferentialBinaryOperation)(e,t,r))})}over(e){let t=(0,F.createOverBuilder)();return new U({...this.#t,aggregateFunctionNode:M.cloneWithOver(this.#t.aggregateFunctionNode,(e?e(t):t).toOperationNode())})}$call(e){return e(this)}$castTo(){return new U(this.#t)}$notNull(){return new U(this.#t)}toOperationNode(){return this.#t.aggregateFunctionNode}}class V{#I;#S;constructor(e,t){this.#I=e,this.#S=t}get expression(){return this.#I}get alias(){return this.#S}toOperationNode(){return t.AliasNode.create(this.#I.toOperationNode(),N.IdentifierNode.create(this.#S))}}function P(){let e=(e,t)=>new S(D.create(e,(0,s.parseReferenceExpressionOrList)(t??[]))),t=(e,t)=>new U({aggregateFunctionNode:M.create(e,t?(0,s.parseReferenceExpressionOrList)(t):void 0)});return Object.assign(e,{agg:t,avg:e=>t("avg",[e]),coalesce:(...t)=>e("coalesce",t),count:e=>t("count",[e]),countAll:e=>new U({aggregateFunctionNode:M.create("count",(0,n.parseSelectAll)(e))}),max:e=>t("max",[e]),min:e=>t("min",[e]),sum:e=>t("sum",[e]),any:t=>e("any",[t]),jsonAgg:e=>new U({aggregateFunctionNode:M.create("json_agg",[(0,l.isString)(e)?(0,o.parseTable)(e):e.toOperationNode()])}),toJson:e=>new S(D.create("to_json",[(0,l.isString)(e)?(0,o.parseTable)(e):e.toOperationNode()]))})}e.s(["parseUnaryOperation",()=>$],47129);var J=e.i(20183);let j=(0,l.freeze)({is:e=>"UnaryOperationNode"===e.kind,create:(e,t)=>(0,l.freeze)({kind:"UnaryOperationNode",operator:e,operand:t})});function $(e,t){return j.create(J.OperatorNode.create(e),(0,s.parseReferenceExpression)(t))}e.s(["CaseBuilder",()=>_],50582);var K=e.i(63116);let G=(0,l.freeze)({is:e=>"CaseNode"===e.kind,create:e=>(0,l.freeze)({kind:"CaseNode",value:e}),cloneWithWhen:(e,t)=>(0,l.freeze)({...e,when:(0,l.freeze)(e.when?[...e.when,t]:[t])}),cloneWithThen:(e,t)=>(0,l.freeze)({...e,when:e.when?(0,l.freeze)([...e.when.slice(0,-1),K.WhenNode.cloneWithResult(e.when[e.when.length-1],t)]):void 0}),cloneWith:(e,t)=>(0,l.freeze)({...e,...t})});e.s(["CaseNode",0,G],58354);class _{#t;constructor(e){this.#t=(0,l.freeze)(e)}when(...e){return new H({...this.#t,node:G.cloneWithWhen(this.#t.node,K.WhenNode.create((0,w.parseValueBinaryOperationOrExpression)(e)))})}}class H{#t;constructor(e){this.#t=(0,l.freeze)(e)}then(e){return new Y({...this.#t,node:G.cloneWithThen(this.#t.node,(0,z.isSafeImmediateValue)(e)?(0,z.parseSafeImmediateValue)(e):(0,z.parseValueExpression)(e))})}}class Y{#t;constructor(e){this.#t=(0,l.freeze)(e)}when(...e){return new H({...this.#t,node:G.cloneWithWhen(this.#t.node,K.WhenNode.create((0,w.parseValueBinaryOperationOrExpression)(e)))})}else(e){return new X({...this.#t,node:G.cloneWith(this.#t.node,{else:(0,z.isSafeImmediateValue)(e)?(0,z.parseSafeImmediateValue)(e):(0,z.parseValueExpression)(e)})})}end(){return new S(G.cloneWith(this.#t.node,{isStatement:!1}))}endCase(){return new S(G.cloneWith(this.#t.node,{isStatement:!0}))}}class X{#t;constructor(e){this.#t=(0,l.freeze)(e)}end(){return new S(G.cloneWith(this.#t.node,{isStatement:!1}))}endCase(){return new S(G.cloneWith(this.#t.node,{isStatement:!0}))}}},65310,e=>{"use strict";var t=e.i(97278);let r=(0,t.freeze)({is:e=>"JSONPathLegNode"===e.kind,create:(e,r)=>(0,t.freeze)({kind:"JSONPathLegNode",type:e,value:r})});e.s(["JSONPathLegNode",0,r])},57852,53234,63690,e=>{"use strict";e.s(["isExpressionOrFactory",()=>V,"parseAliasedExpression",()=>U,"parseExpression",()=>F],57852);var t=e.i(32669),r=e.i(41806);e.s(["createExpressionBuilder",()=>M,"expressionBuilder",()=>D],63690);var i=e.i(34773),o=e.i(92817),n=e.i(82158),s=e.i(290),a=e.i(80235),d=e.i(62080),p=e.i(22921),h=e.i(62393),u=e.i(59827),l=e.i(24866),c=e.i(20183),f=e.i(47129),N=e.i(30664),m=e.i(13590),y=e.i(50582),g=e.i(58354),v=e.i(97278),w=e.i(32160),O=e.i(90543),b=e.i(10172),x=e.i(65310),W=e.i(32011),S=e.i(58867),C=e.i(28442);class I{#x;constructor(e){this.#x=e}at(e){return this.#B("ArrayLocation",e)}key(e){return this.#B("Member",e)}#B(e,t){return new B(S.JSONReferenceNode.is(this.#x)?S.JSONReferenceNode.cloneWithTraversal(this.#x,W.JSONPathNode.is(this.#x.traversal)?W.JSONPathNode.cloneWithLeg(this.#x.traversal,x.JSONPathLegNode.create(e,t)):b.JSONOperatorChainNode.cloneWithValue(this.#x.traversal,C.ValueNode.createImmediate(t))):W.JSONPathNode.cloneWithLeg(this.#x,x.JSONPathLegNode.create(e,t)))}}class B extends I{#x;constructor(e){super(e),this.#x=e}get expressionType(){}as(e){return new z(this,e)}$castTo(){return new B(this.#x)}$notNull(){return new B(this.#x)}toOperationNode(){return this.#x}}class z{#z;#S;constructor(e,t){this.#z=e,this.#S=t}get expression(){return this.#z}get alias(){return this.#S}toOperationNode(){return w.AliasNode.create(this.#z.toOperationNode(),(0,r.isOperationNodeSource)(this.#S)?this.#S.toOperationNode():O.IdentifierNode.create(this.#S))}}var E=e.i(75264),k=e.i(21663);let q=(0,v.freeze)({is:e=>"TupleNode"===e.kind,create:e=>(0,v.freeze)({kind:"TupleNode",values:(0,v.freeze)(e)})}),T=["varchar","char","text","integer","int2","int4","int8","smallint","bigint","boolean","real","double precision","float4","float8","decimal","numeric","binary","bytea","date","datetime","time","timetz","timestamp","timestamptz","serial","bigserial","uuid","json","jsonb","blob","varbinary","int4range","int4multirange","int8range","int8multirange","numrange","nummultirange","tsrange","tsmultirange","tstzrange","tstzmultirange","daterange","datemultirange"],A=[/^varchar\(\d+\)$/,/^char\(\d+\)$/,/^decimal\(\d+, \d+\)$/,/^numeric\(\d+, \d+\)$/,/^binary\(\d+\)$/,/^datetime\(\d+\)$/,/^time\(\d+\)$/,/^timetz\(\d+\)$/,/^timestamp\(\d+\)$/,/^timestamptz\(\d+\)$/,/^varbinary\(\d+\)$/],R=(0,v.freeze)({is:e=>"DataTypeNode"===e.kind,create:e=>(0,v.freeze)({kind:"DataTypeNode",dataType:e})});function L(e){if((0,r.isOperationNodeSource)(e))return e.toOperationNode();if(T.includes(e)||A.some(t=>t.test(e)))return R.create(e);throw Error(`invalid column data type ${JSON.stringify(e)}`)}e.s(["parseDataTypeExpression",()=>L],53234);let Q=(0,v.freeze)({is:e=>"CastNode"===e.kind,create:(e,t)=>(0,v.freeze)({kind:"CastNode",expression:e,dataType:t})});function M(e=m.NOOP_QUERY_EXECUTOR){function t(e,t){return new l.ExpressionWrapper((0,f.parseUnaryOperation)(e,t))}let r=Object.assign(function(e,t,r){return new l.ExpressionWrapper((0,h.parseValueBinaryOperation)(e,t,r))},{fn:void 0,eb:void 0,selectFrom:t=>(0,i.createSelectQueryBuilder)({queryId:(0,a.createQueryId)(),executor:e,queryNode:o.SelectQueryNode.createFrom((0,n.parseTableExpressionOrList)(t))}),case:e=>new y.CaseBuilder({node:g.CaseNode.create((0,v.isUndefined)(e)?void 0:(0,p.parseReferenceExpression)(e))}),ref:(e,t)=>(0,v.isUndefined)(t)?new l.ExpressionWrapper((0,p.parseStringReference)(e)):new I((0,p.parseJSONReference)(e,t)),jsonPath:()=>new I(W.JSONPathNode.create()),table:e=>new l.ExpressionWrapper((0,n.parseTable)(e)),val:e=>new l.ExpressionWrapper((0,N.parseValueExpression)(e)),refTuple:(...e)=>new l.ExpressionWrapper(q.create(e.map(p.parseReferenceExpression))),tuple:(...e)=>new l.ExpressionWrapper(q.create(e.map(N.parseValueExpression))),lit:e=>new l.ExpressionWrapper((0,N.parseSafeImmediateValue)(e)),unary:t,not:e=>t("not",e),exists:e=>t("exists",e),neg:e=>t("-",e),between:(e,t,r)=>new l.ExpressionWrapper(E.BinaryOperationNode.create((0,p.parseReferenceExpression)(e),c.OperatorNode.create("between"),k.AndNode.create((0,N.parseValueExpression)(t),(0,N.parseValueExpression)(r)))),betweenSymmetric:(e,t,r)=>new l.ExpressionWrapper(E.BinaryOperationNode.create((0,p.parseReferenceExpression)(e),c.OperatorNode.create("between symmetric"),k.AndNode.create((0,N.parseValueExpression)(t),(0,N.parseValueExpression)(r)))),and:e=>new l.ExpressionWrapper((0,v.isReadonlyArray)(e)?(0,h.parseFilterList)(e,"and"):(0,h.parseFilterObject)(e,"and")),or:e=>new l.ExpressionWrapper((0,v.isReadonlyArray)(e)?(0,h.parseFilterList)(e,"or"):(0,h.parseFilterObject)(e,"or")),parens(...e){let t=(0,h.parseValueBinaryOperationOrExpression)(e);return new l.ExpressionWrapper(u.ParensNode.is(t)?t:u.ParensNode.create(t))},cast:(e,t)=>new l.ExpressionWrapper(Q.create((0,p.parseReferenceExpression)(e),L(t))),withSchema:t=>M(e.withPluginAtFront(new s.WithSchemaPlugin(t)))});return r.fn=(0,d.createFunctionModule)(),r.eb=r,r}function D(e){return M()}function F(e){if((0,r.isOperationNodeSource)(e))return e.toOperationNode();if((0,v.isFunction)(e))return e(M()).toOperationNode();throw Error(`invalid expression: ${JSON.stringify(e)}`)}function U(e){if((0,r.isOperationNodeSource)(e))return e.toOperationNode();if((0,v.isFunction)(e))return e(M()).toOperationNode();throw Error(`invalid aliased expression: ${JSON.stringify(e)}`)}function V(e){return(0,t.isExpression)(e)||(0,t.isAliasedExpression)(e)||(0,v.isFunction)(e)}},82158,81151,e=>{"use strict";e.s(["parseAliasedTable",()=>l,"parseTable",()=>c,"parseTableExpression",()=>u,"parseTableExpressionOrList",()=>h],82158);var t=e.i(97278),r=e.i(32160),i=e.i(30868),o=e.i(57852),n=e.i(90543);e.s(["DynamicTableBuilder",()=>a,"isAliasedDynamicTableBuilder",()=>p],81151);var s=e.i(41806);class a{#E;get table(){return this.#E}constructor(e){this.#E=e}as(e){return new d(this.#E,e)}}class d{#E;#S;get table(){return this.#E}get alias(){return this.#S}constructor(e,t){this.#E=e,this.#S=t}toOperationNode(){return r.AliasNode.create(c(this.#E),n.IdentifierNode.create(this.#S))}}function p(e){return(0,t.isObject)(e)&&(0,s.isOperationNodeSource)(e)&&(0,t.isString)(e.table)&&(0,t.isString)(e.alias)}function h(e){return(0,t.isReadonlyArray)(e)?e.map(e=>u(e)):[u(e)]}function u(e){return(0,t.isString)(e)?l(e):p(e)?e.toOperationNode():(0,o.parseAliasedExpression)(e)}function l(e){let t=" as ";if(!e.includes(t))return c(e);{let[i,o]=e.split(t).map(f);return r.AliasNode.create(c(i),n.IdentifierNode.create(o))}}function c(e){if(!e.includes("."))return i.TableNode.create(e);{let[t,r]=e.split(".").map(f);return i.TableNode.createWithSchema(t,r)}}function f(e){return e.trim()}},25587,e=>{"use strict";var t=e.i(97278),r=e.i(39970);let i=(0,t.freeze)({is:e=>"CreateViewNode"===e.kind,create:e=>(0,t.freeze)({kind:"CreateViewNode",name:r.SchemableIdentifierNode.create(e)}),cloneWith:(e,r)=>(0,t.freeze)({...e,...r})});e.s(["CreateViewNode",0,i])},87827,e=>{"use strict";class t{transformQuery(e){return e.node}async transformResult(e){return e.result}}e.s(["NoopPlugin",()=>t])},45294,e=>{"use strict";e.i(87827),e.i(290),(0,e.i(97278).freeze)({__noMigrations__:!0}),e.s(["DEFAULT_MIGRATION_LOCK_TABLE",0,"kysely_migration_lock","DEFAULT_MIGRATION_TABLE",0,"kysely_migration"])},48057,e=>{"use strict";var t=e.i(90543),r=e.i(41806),i=e.i(60911),o=e.i(28442),n=e.i(22921),s=e.i(82158),a=e.i(30664),d=e.i(80235),p=e.i(32160),h=e.i(97278),u=e.i(13590);class l{#t;constructor(e){this.#t=(0,h.freeze)(e)}get expressionType(){}get isRawBuilder(){return!0}as(e){return new f(this,e)}$castTo(){return new l({...this.#t})}$notNull(){return new l(this.#t)}withPlugin(e){return new l({...this.#t,plugins:void 0!==this.#t.plugins?(0,h.freeze)([...this.#t.plugins,e]):(0,h.freeze)([e])})}toOperationNode(){return this.#k(this.#q())}compile(e){return this.#T(this.#q(e))}async execute(e){let t=this.#q(e);return t.executeQuery(this.#T(t))}#q(e){let t=void 0!==e?e.getExecutor():u.NOOP_QUERY_EXECUTOR;return void 0!==this.#t.plugins?t.withPlugins(this.#t.plugins):t}#k(e){return e.transformQuery(this.#t.rawNode,this.#t.queryId)}#T(e){return e.compileQuery(this.#k(e),this.#t.queryId)}}function c(e){return new l(e)}class f{#A;#S;constructor(e,t){this.#A=e,this.#S=t}get expression(){return this.#A}get alias(){return this.#S}get rawBuilder(){return this.#A}toOperationNode(){return p.AliasNode.create(this.#A.toOperationNode(),(0,r.isOperationNodeSource)(this.#S)?this.#S.toOperationNode():t.IdentifierNode.create(this.#S))}}let N=Object.assign((e,...t)=>c({queryId:(0,d.createQueryId)(),rawNode:i.RawNode.create(e,t?.map(m)??[])}),{ref:e=>c({queryId:(0,d.createQueryId)(),rawNode:i.RawNode.createWithChild((0,n.parseStringReference)(e))}),val:e=>c({queryId:(0,d.createQueryId)(),rawNode:i.RawNode.createWithChild((0,a.parseValueExpression)(e))}),value(e){return this.val(e)},table:e=>c({queryId:(0,d.createQueryId)(),rawNode:i.RawNode.createWithChild((0,s.parseTable)(e))}),id(...e){let r=Array(e.length+1).fill(".");return r[0]="",r[r.length-1]="",c({queryId:(0,d.createQueryId)(),rawNode:i.RawNode.create(r,e.map(t.IdentifierNode.create))})},lit:e=>c({queryId:(0,d.createQueryId)(),rawNode:i.RawNode.createWithChild(o.ValueNode.createImmediate(e))}),literal(e){return this.lit(e)},raw:e=>c({queryId:(0,d.createQueryId)(),rawNode:i.RawNode.createWithSql(e)}),join(e,t=N`, `){let r=Array(Math.max(2*e.length-1,0)),o=t.toOperationNode();for(let t=0;t<e.length;++t)r[2*t]=m(e[t]),t!==e.length-1&&(r[2*t+1]=o);return c({queryId:(0,d.createQueryId)(),rawNode:i.RawNode.createWithChildren(r)})}});function m(e){return(0,r.isOperationNodeSource)(e)?e.toOperationNode():(0,a.parseValueExpression)(e)}e.s(["sql",0,N],48057)},83751,e=>{"use strict";var t=e.i(60911),r=e.i(97278),i=e.i(80235);let o=(0,r.freeze)({raw:(e,o=[])=>(0,r.freeze)({sql:e,query:t.RawNode.createWithSql(e),parameters:(0,r.freeze)(o),queryId:(0,i.createQueryId)()})});e.s(["CompiledQuery",0,o])},19981,e=>{"use strict";var t=e.i(97278);class r{nodeStack=[];get parentNode(){return this.nodeStack[this.nodeStack.length-2]}#R=(0,t.freeze)({AliasNode:this.visitAlias.bind(this),ColumnNode:this.visitColumn.bind(this),IdentifierNode:this.visitIdentifier.bind(this),SchemableIdentifierNode:this.visitSchemableIdentifier.bind(this),RawNode:this.visitRaw.bind(this),ReferenceNode:this.visitReference.bind(this),SelectQueryNode:this.visitSelectQuery.bind(this),SelectionNode:this.visitSelection.bind(this),TableNode:this.visitTable.bind(this),FromNode:this.visitFrom.bind(this),SelectAllNode:this.visitSelectAll.bind(this),AndNode:this.visitAnd.bind(this),OrNode:this.visitOr.bind(this),ValueNode:this.visitValue.bind(this),ValueListNode:this.visitValueList.bind(this),PrimitiveValueListNode:this.visitPrimitiveValueList.bind(this),ParensNode:this.visitParens.bind(this),JoinNode:this.visitJoin.bind(this),OperatorNode:this.visitOperator.bind(this),WhereNode:this.visitWhere.bind(this),InsertQueryNode:this.visitInsertQuery.bind(this),DeleteQueryNode:this.visitDeleteQuery.bind(this),ReturningNode:this.visitReturning.bind(this),CreateTableNode:this.visitCreateTable.bind(this),AddColumnNode:this.visitAddColumn.bind(this),ColumnDefinitionNode:this.visitColumnDefinition.bind(this),DropTableNode:this.visitDropTable.bind(this),DataTypeNode:this.visitDataType.bind(this),OrderByNode:this.visitOrderBy.bind(this),OrderByItemNode:this.visitOrderByItem.bind(this),GroupByNode:this.visitGroupBy.bind(this),GroupByItemNode:this.visitGroupByItem.bind(this),UpdateQueryNode:this.visitUpdateQuery.bind(this),ColumnUpdateNode:this.visitColumnUpdate.bind(this),LimitNode:this.visitLimit.bind(this),OffsetNode:this.visitOffset.bind(this),OnConflictNode:this.visitOnConflict.bind(this),OnDuplicateKeyNode:this.visitOnDuplicateKey.bind(this),CreateIndexNode:this.visitCreateIndex.bind(this),DropIndexNode:this.visitDropIndex.bind(this),ListNode:this.visitList.bind(this),PrimaryKeyConstraintNode:this.visitPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.visitUniqueConstraint.bind(this),ReferencesNode:this.visitReferences.bind(this),CheckConstraintNode:this.visitCheckConstraint.bind(this),WithNode:this.visitWith.bind(this),CommonTableExpressionNode:this.visitCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.visitCommonTableExpressionName.bind(this),HavingNode:this.visitHaving.bind(this),CreateSchemaNode:this.visitCreateSchema.bind(this),DropSchemaNode:this.visitDropSchema.bind(this),AlterTableNode:this.visitAlterTable.bind(this),DropColumnNode:this.visitDropColumn.bind(this),RenameColumnNode:this.visitRenameColumn.bind(this),AlterColumnNode:this.visitAlterColumn.bind(this),ModifyColumnNode:this.visitModifyColumn.bind(this),AddConstraintNode:this.visitAddConstraint.bind(this),DropConstraintNode:this.visitDropConstraint.bind(this),RenameConstraintNode:this.visitRenameConstraint.bind(this),ForeignKeyConstraintNode:this.visitForeignKeyConstraint.bind(this),CreateViewNode:this.visitCreateView.bind(this),RefreshMaterializedViewNode:this.visitRefreshMaterializedView.bind(this),DropViewNode:this.visitDropView.bind(this),GeneratedNode:this.visitGenerated.bind(this),DefaultValueNode:this.visitDefaultValue.bind(this),OnNode:this.visitOn.bind(this),ValuesNode:this.visitValues.bind(this),SelectModifierNode:this.visitSelectModifier.bind(this),CreateTypeNode:this.visitCreateType.bind(this),DropTypeNode:this.visitDropType.bind(this),ExplainNode:this.visitExplain.bind(this),DefaultInsertValueNode:this.visitDefaultInsertValue.bind(this),AggregateFunctionNode:this.visitAggregateFunction.bind(this),OverNode:this.visitOver.bind(this),PartitionByNode:this.visitPartitionBy.bind(this),PartitionByItemNode:this.visitPartitionByItem.bind(this),SetOperationNode:this.visitSetOperation.bind(this),BinaryOperationNode:this.visitBinaryOperation.bind(this),UnaryOperationNode:this.visitUnaryOperation.bind(this),UsingNode:this.visitUsing.bind(this),FunctionNode:this.visitFunction.bind(this),CaseNode:this.visitCase.bind(this),WhenNode:this.visitWhen.bind(this),JSONReferenceNode:this.visitJSONReference.bind(this),JSONPathNode:this.visitJSONPath.bind(this),JSONPathLegNode:this.visitJSONPathLeg.bind(this),JSONOperatorChainNode:this.visitJSONOperatorChain.bind(this),TupleNode:this.visitTuple.bind(this),MergeQueryNode:this.visitMergeQuery.bind(this),MatchedNode:this.visitMatched.bind(this),AddIndexNode:this.visitAddIndex.bind(this),CastNode:this.visitCast.bind(this),FetchNode:this.visitFetch.bind(this),TopNode:this.visitTop.bind(this),OutputNode:this.visitOutput.bind(this),OrActionNode:this.visitOrAction.bind(this),CollateNode:this.visitCollate.bind(this)});visitNode=e=>{this.nodeStack.push(e),this.#R[e.kind](e),this.nodeStack.pop()}}e.s(["OperationNodeVisitor",()=>r])},80121,e=>{"use strict";var t=e.i(96071),r=e.i(57002),i=e.i(19981),o=e.i(20183),n=e.i(59827),s=e.i(60911),a=e.i(97278),d=e.i(25587),p=e.i(35189),h=e.i(63116),u=e.i(65942);let l=/'/g;class c extends i.OperationNodeVisitor{#L="";#Q=[];get numParameters(){return this.#Q.length}compileQuery(e,t){return this.#L="",this.#Q=[],this.nodeStack.splice(0,this.nodeStack.length),this.visitNode(e),(0,a.freeze)({query:e,queryId:t,sql:this.getSql(),parameters:[...this.#Q]})}getSql(){return this.#L}visitSelectQuery(e){let i=void 0!==this.parentNode&&!n.ParensNode.is(this.parentNode)&&!r.InsertQueryNode.is(this.parentNode)&&!t.CreateTableNode.is(this.parentNode)&&!d.CreateViewNode.is(this.parentNode)&&!p.SetOperationNode.is(this.parentNode);void 0===this.parentNode&&e.explain&&(this.visitNode(e.explain),this.append(" ")),i&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("select"),e.distinctOn&&(this.append(" "),this.compileDistinctOn(e.distinctOn)),e.frontModifiers?.length&&(this.append(" "),this.compileList(e.frontModifiers," ")),e.top&&(this.append(" "),this.visitNode(e.top)),e.selections&&(this.append(" "),this.compileList(e.selections)),e.from&&(this.append(" "),this.visitNode(e.from)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.groupBy&&(this.append(" "),this.visitNode(e.groupBy)),e.having&&(this.append(" "),this.visitNode(e.having)),e.setOperations&&(this.append(" "),this.compileList(e.setOperations," ")),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.offset&&(this.append(" "),this.visitNode(e.offset)),e.fetch&&(this.append(" "),this.visitNode(e.fetch)),e.endModifiers?.length&&(this.append(" "),this.compileList(this.sortSelectModifiers([...e.endModifiers])," ")),i&&this.append(")")}visitFrom(e){this.append("from "),this.compileList(e.froms)}visitSelection(e){this.visitNode(e.selection)}visitColumn(e){this.visitNode(e.column)}compileDistinctOn(e){this.append("distinct on ("),this.compileList(e),this.append(")")}compileList(e,t=", "){let r=e.length-1;for(let i=0;i<=r;i++)this.visitNode(e[i]),i<r&&this.append(t)}visitWhere(e){this.append("where "),this.visitNode(e.where)}visitHaving(e){this.append("having "),this.visitNode(e.having)}visitInsertQuery(e){let t=void 0!==this.parentNode&&!n.ParensNode.is(this.parentNode)&&!s.RawNode.is(this.parentNode)&&!h.WhenNode.is(this.parentNode);void 0===this.parentNode&&e.explain&&(this.visitNode(e.explain),this.append(" ")),t&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append(e.replace?"replace":"insert"),e.ignore&&((0,u.logOnce)("`InsertQueryNode.ignore` is deprecated. Use `InsertQueryNode.orAction` instead."),this.append(" ignore")),e.orAction&&(this.append(" "),this.visitNode(e.orAction)),e.top&&(this.append(" "),this.visitNode(e.top)),e.into&&(this.append(" into "),this.visitNode(e.into)),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.output&&(this.append(" "),this.visitNode(e.output)),e.values&&(this.append(" "),this.visitNode(e.values)),e.defaultValues&&(this.append(" "),this.append("default values")),e.onConflict&&(this.append(" "),this.visitNode(e.onConflict)),e.onDuplicateKey&&(this.append(" "),this.visitNode(e.onDuplicateKey)),e.returning&&(this.append(" "),this.visitNode(e.returning)),t&&this.append(")"),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitValues(e){this.append("values "),this.compileList(e.values)}visitDeleteQuery(e){let t=void 0!==this.parentNode&&!n.ParensNode.is(this.parentNode)&&!s.RawNode.is(this.parentNode);void 0===this.parentNode&&e.explain&&(this.visitNode(e.explain),this.append(" ")),t&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("delete "),e.top&&(this.visitNode(e.top),this.append(" ")),this.visitNode(e.from),e.output&&(this.append(" "),this.visitNode(e.output)),e.using&&(this.append(" "),this.visitNode(e.using)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.returning&&(this.append(" "),this.visitNode(e.returning)),t&&this.append(")"),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitReturning(e){this.append("returning "),this.compileList(e.selections)}visitAlias(e){this.visitNode(e.node),this.append(" as "),this.visitNode(e.alias)}visitReference(e){e.table&&(this.visitNode(e.table),this.append(".")),this.visitNode(e.column)}visitSelectAll(e){this.append("*")}visitIdentifier(e){this.append(this.getLeftIdentifierWrapper()),this.compileUnwrappedIdentifier(e),this.append(this.getRightIdentifierWrapper())}compileUnwrappedIdentifier(e){if(!(0,a.isString)(e.name))throw Error("a non-string identifier was passed to compileUnwrappedIdentifier.");this.append(this.sanitizeIdentifier(e.name))}visitAnd(e){this.visitNode(e.left),this.append(" and "),this.visitNode(e.right)}visitOr(e){this.visitNode(e.left),this.append(" or "),this.visitNode(e.right)}visitValue(e){e.immediate?this.appendImmediateValue(e.value):this.appendValue(e.value)}visitValueList(e){this.append("("),this.compileList(e.values),this.append(")")}visitTuple(e){this.append("("),this.compileList(e.values),this.append(")")}visitPrimitiveValueList(e){this.append("(");let{values:t}=e;for(let e=0;e<t.length;++e)this.appendValue(t[e]),e!==t.length-1&&this.append(", ");this.append(")")}visitParens(e){this.append("("),this.visitNode(e.node),this.append(")")}visitJoin(e){this.append(m[e.joinType]),this.append(" "),this.visitNode(e.table),e.on&&(this.append(" "),this.visitNode(e.on))}visitOn(e){this.append("on "),this.visitNode(e.on)}visitRaw(e){let{sqlFragments:t,parameters:r}=e;for(let e=0;e<t.length;++e)this.append(t[e]),r.length>e&&this.visitNode(r[e])}visitOperator(e){this.append(e.operator)}visitTable(e){this.visitNode(e.table)}visitSchemableIdentifier(e){e.schema&&(this.visitNode(e.schema),this.append(".")),this.visitNode(e.identifier)}visitCreateTable(e){this.append("create "),e.frontModifiers&&e.frontModifiers.length>0&&(this.compileList(e.frontModifiers," "),this.append(" ")),e.temporary&&this.append("temporary "),this.append("table "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.table),e.selectQuery?(this.append(" as "),this.visitNode(e.selectQuery)):(this.append(" ("),this.compileList([...e.columns,...e.constraints??[]]),this.append(")"),e.onCommit&&(this.append(" on commit "),this.append(e.onCommit)),e.endModifiers&&e.endModifiers.length>0&&(this.append(" "),this.compileList(e.endModifiers," ")))}visitColumnDefinition(e){e.ifNotExists&&this.append("if not exists "),this.visitNode(e.column),this.append(" "),this.visitNode(e.dataType),e.unsigned&&this.append(" unsigned"),e.frontModifiers&&e.frontModifiers.length>0&&(this.append(" "),this.compileList(e.frontModifiers," ")),e.generated&&(this.append(" "),this.visitNode(e.generated)),e.identity&&this.append(" identity"),e.defaultTo&&(this.append(" "),this.visitNode(e.defaultTo)),e.notNull&&this.append(" not null"),e.unique&&this.append(" unique"),e.nullsNotDistinct&&this.append(" nulls not distinct"),e.primaryKey&&this.append(" primary key"),e.autoIncrement&&(this.append(" "),this.append(this.getAutoIncrement())),e.references&&(this.append(" "),this.visitNode(e.references)),e.check&&(this.append(" "),this.visitNode(e.check)),e.endModifiers&&e.endModifiers.length>0&&(this.append(" "),this.compileList(e.endModifiers," "))}getAutoIncrement(){return"auto_increment"}visitReferences(e){this.append("references "),this.visitNode(e.table),this.append(" ("),this.compileList(e.columns),this.append(")"),e.onDelete&&(this.append(" on delete "),this.append(e.onDelete)),e.onUpdate&&(this.append(" on update "),this.append(e.onUpdate))}visitDropTable(e){this.append("drop table "),e.ifExists&&this.append("if exists "),this.visitNode(e.table),e.cascade&&this.append(" cascade")}visitDataType(e){this.append(e.dataType)}visitOrderBy(e){this.append("order by "),this.compileList(e.items)}visitOrderByItem(e){this.visitNode(e.orderBy),e.collation&&(this.append(" "),this.visitNode(e.collation)),e.direction&&(this.append(" "),this.visitNode(e.direction)),e.nulls&&(this.append(" nulls "),this.append(e.nulls))}visitGroupBy(e){this.append("group by "),this.compileList(e.items)}visitGroupByItem(e){this.visitNode(e.groupBy)}visitUpdateQuery(e){let t=void 0!==this.parentNode&&!n.ParensNode.is(this.parentNode)&&!s.RawNode.is(this.parentNode)&&!h.WhenNode.is(this.parentNode);if(void 0===this.parentNode&&e.explain&&(this.visitNode(e.explain),this.append(" ")),t&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("update "),e.top&&(this.visitNode(e.top),this.append(" ")),e.table&&(this.visitNode(e.table),this.append(" ")),this.append("set "),e.updates&&this.compileList(e.updates),e.output&&(this.append(" "),this.visitNode(e.output)),e.from&&(this.append(" "),this.visitNode(e.from)),e.joins){if(!e.from)throw Error("Joins in an update query are only supported as a part of a PostgreSQL 'update set from join' query. If you want to create a MySQL 'update join set' query, see https://kysely.dev/docs/examples/update/my-sql-joins");this.append(" "),this.compileList(e.joins," ")}e.where&&(this.append(" "),this.visitNode(e.where)),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.returning&&(this.append(" "),this.visitNode(e.returning)),t&&this.append(")"),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitColumnUpdate(e){this.visitNode(e.column),this.append(" = "),this.visitNode(e.value)}visitLimit(e){this.append("limit "),this.visitNode(e.limit)}visitOffset(e){this.append("offset "),this.visitNode(e.offset)}visitOnConflict(e){this.append("on conflict"),e.columns?(this.append(" ("),this.compileList(e.columns),this.append(")")):e.constraint?(this.append(" on constraint "),this.visitNode(e.constraint)):e.indexExpression&&(this.append(" ("),this.visitNode(e.indexExpression),this.append(")")),e.indexWhere&&(this.append(" "),this.visitNode(e.indexWhere)),!0===e.doNothing?this.append(" do nothing"):e.updates&&(this.append(" do update set "),this.compileList(e.updates),e.updateWhere&&(this.append(" "),this.visitNode(e.updateWhere)))}visitOnDuplicateKey(e){this.append("on duplicate key update "),this.compileList(e.updates)}visitCreateIndex(e){this.append("create "),e.unique&&this.append("unique "),this.append("index "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.name),e.table&&(this.append(" on "),this.visitNode(e.table)),e.using&&(this.append(" using "),this.visitNode(e.using)),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.nullsNotDistinct&&this.append(" nulls not distinct"),e.where&&(this.append(" "),this.visitNode(e.where))}visitDropIndex(e){this.append("drop index "),e.ifExists&&this.append("if exists "),this.visitNode(e.name),e.table&&(this.append(" on "),this.visitNode(e.table)),e.cascade&&this.append(" cascade")}visitCreateSchema(e){this.append("create schema "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.schema)}visitDropSchema(e){this.append("drop schema "),e.ifExists&&this.append("if exists "),this.visitNode(e.schema),e.cascade&&this.append(" cascade")}visitPrimaryKeyConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("primary key ("),this.compileList(e.columns),this.append(")"),this.buildDeferrable(e)}buildDeferrable(e){void 0!==e.deferrable&&(e.deferrable?this.append(" deferrable"):this.append(" not deferrable")),void 0!==e.initiallyDeferred&&(e.initiallyDeferred?this.append(" initially deferred"):this.append(" initially immediate"))}visitUniqueConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("unique"),e.nullsNotDistinct&&this.append(" nulls not distinct"),this.append(" ("),this.compileList(e.columns),this.append(")"),this.buildDeferrable(e)}visitCheckConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("check ("),this.visitNode(e.expression),this.append(")")}visitForeignKeyConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("foreign key ("),this.compileList(e.columns),this.append(") "),this.visitNode(e.references),e.onDelete&&(this.append(" on delete "),this.append(e.onDelete)),e.onUpdate&&(this.append(" on update "),this.append(e.onUpdate)),this.buildDeferrable(e)}visitList(e){this.compileList(e.items)}visitWith(e){this.append("with "),e.recursive&&this.append("recursive "),this.compileList(e.expressions)}visitCommonTableExpression(e){this.visitNode(e.name),this.append(" as "),(0,a.isBoolean)(e.materialized)&&(e.materialized||this.append("not "),this.append("materialized ")),this.visitNode(e.expression)}visitCommonTableExpressionName(e){this.visitNode(e.table),e.columns&&(this.append("("),this.compileList(e.columns),this.append(")"))}visitAlterTable(e){this.append("alter table "),this.visitNode(e.table),this.append(" "),e.renameTo&&(this.append("rename to "),this.visitNode(e.renameTo)),e.setSchema&&(this.append("set schema "),this.visitNode(e.setSchema)),e.addConstraint&&this.visitNode(e.addConstraint),e.dropConstraint&&this.visitNode(e.dropConstraint),e.renameConstraint&&this.visitNode(e.renameConstraint),e.columnAlterations&&this.compileColumnAlterations(e.columnAlterations),e.addIndex&&this.visitNode(e.addIndex),e.dropIndex&&this.visitNode(e.dropIndex)}visitAddColumn(e){this.append("add column "),this.visitNode(e.column)}visitRenameColumn(e){this.append("rename column "),this.visitNode(e.column),this.append(" to "),this.visitNode(e.renameTo)}visitDropColumn(e){this.append("drop column "),this.visitNode(e.column)}visitAlterColumn(e){this.append("alter column "),this.visitNode(e.column),this.append(" "),e.dataType&&(this.announcesNewColumnDataType()&&this.append("type "),this.visitNode(e.dataType),e.dataTypeExpression&&(this.append("using "),this.visitNode(e.dataTypeExpression))),e.setDefault&&(this.append("set default "),this.visitNode(e.setDefault)),e.dropDefault&&this.append("drop default"),e.setNotNull&&this.append("set not null"),e.dropNotNull&&this.append("drop not null")}visitModifyColumn(e){this.append("modify column "),this.visitNode(e.column)}visitAddConstraint(e){this.append("add "),this.visitNode(e.constraint)}visitDropConstraint(e){this.append("drop constraint "),e.ifExists&&this.append("if exists "),this.visitNode(e.constraintName),"cascade"===e.modifier?this.append(" cascade"):"restrict"===e.modifier&&this.append(" restrict")}visitRenameConstraint(e){this.append("rename constraint "),this.visitNode(e.oldName),this.append(" to "),this.visitNode(e.newName)}visitSetOperation(e){this.append(e.operator),this.append(" "),e.all&&this.append("all "),this.visitNode(e.expression)}visitCreateView(e){this.append("create "),e.orReplace&&this.append("or replace "),e.materialized&&this.append("materialized "),e.temporary&&this.append("temporary "),this.append("view "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.name),this.append(" "),e.columns&&(this.append("("),this.compileList(e.columns),this.append(") ")),e.as&&(this.append("as "),this.visitNode(e.as))}visitRefreshMaterializedView(e){this.append("refresh materialized view "),e.concurrently&&this.append("concurrently "),this.visitNode(e.name),e.withNoData?this.append(" with no data"):this.append(" with data")}visitDropView(e){this.append("drop "),e.materialized&&this.append("materialized "),this.append("view "),e.ifExists&&this.append("if exists "),this.visitNode(e.name),e.cascade&&this.append(" cascade")}visitGenerated(e){this.append("generated "),e.always&&this.append("always "),e.byDefault&&this.append("by default "),this.append("as "),e.identity&&this.append("identity"),e.expression&&(this.append("("),this.visitNode(e.expression),this.append(")")),e.stored&&this.append(" stored")}visitDefaultValue(e){this.append("default "),this.visitNode(e.defaultValue)}visitSelectModifier(e){e.rawModifier?this.visitNode(e.rawModifier):this.append(f[e.modifier]),e.of&&(this.append(" of "),this.compileList(e.of,", "))}visitCreateType(e){this.append("create type "),this.visitNode(e.name),e.enum&&(this.append(" as enum "),this.visitNode(e.enum))}visitDropType(e){this.append("drop type "),e.ifExists&&this.append("if exists "),this.visitNode(e.name)}visitExplain(e){this.append("explain"),(e.options||e.format)&&(this.append(" "),this.append(this.getLeftExplainOptionsWrapper()),e.options&&(this.visitNode(e.options),e.format&&this.append(this.getExplainOptionsDelimiter())),e.format&&(this.append("format"),this.append(this.getExplainOptionAssignment()),this.append(e.format)),this.append(this.getRightExplainOptionsWrapper()))}visitDefaultInsertValue(e){this.append("default")}visitAggregateFunction(e){this.append(e.func),this.append("("),e.distinct&&this.append("distinct "),this.compileList(e.aggregated),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),this.append(")"),e.withinGroup&&(this.append(" within group ("),this.visitNode(e.withinGroup),this.append(")")),e.filter&&(this.append(" filter("),this.visitNode(e.filter),this.append(")")),e.over&&(this.append(" "),this.visitNode(e.over))}visitOver(e){this.append("over("),e.partitionBy&&(this.visitNode(e.partitionBy),e.orderBy&&this.append(" ")),e.orderBy&&this.visitNode(e.orderBy),this.append(")")}visitPartitionBy(e){this.append("partition by "),this.compileList(e.items)}visitPartitionByItem(e){this.visitNode(e.partitionBy)}visitBinaryOperation(e){this.visitNode(e.leftOperand),this.append(" "),this.visitNode(e.operator),this.append(" "),this.visitNode(e.rightOperand)}visitUnaryOperation(e){this.visitNode(e.operator),this.isMinusOperator(e.operator)||this.append(" "),this.visitNode(e.operand)}isMinusOperator(e){return o.OperatorNode.is(e)&&"-"===e.operator}visitUsing(e){this.append("using "),this.compileList(e.tables)}visitFunction(e){this.append(e.func),this.append("("),this.compileList(e.arguments),this.append(")")}visitCase(e){this.append("case"),e.value&&(this.append(" "),this.visitNode(e.value)),e.when&&(this.append(" "),this.compileList(e.when," ")),e.else&&(this.append(" else "),this.visitNode(e.else)),this.append(" end"),e.isStatement&&this.append(" case")}visitWhen(e){this.append("when "),this.visitNode(e.condition),e.result&&(this.append(" then "),this.visitNode(e.result))}visitJSONReference(e){this.visitNode(e.reference),this.visitNode(e.traversal)}visitJSONPath(e){for(let t of(e.inOperator&&this.visitNode(e.inOperator),this.append("'$"),e.pathLegs))this.visitNode(t);this.append("'")}visitJSONPathLeg(e){let t="ArrayLocation"===e.type;this.append(t?"[":"."),this.append(String(e.value)),t&&this.append("]")}visitJSONOperatorChain(e){for(let t=0,r=e.values.length;t<r;t++)t===r-1?this.visitNode(e.operator):this.append("->"),this.visitNode(e.values[t])}visitMergeQuery(e){e.with&&(this.visitNode(e.with),this.append(" ")),this.append("merge "),e.top&&(this.visitNode(e.top),this.append(" ")),this.append("into "),this.visitNode(e.into),e.using&&(this.append(" "),this.visitNode(e.using)),e.whens&&(this.append(" "),this.compileList(e.whens," ")),e.returning&&(this.append(" "),this.visitNode(e.returning)),e.output&&(this.append(" "),this.visitNode(e.output)),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitMatched(e){e.not&&this.append("not "),this.append("matched"),e.bySource&&this.append(" by source")}visitAddIndex(e){this.append("add "),e.unique&&this.append("unique "),this.append("index "),this.visitNode(e.name),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.using&&(this.append(" using "),this.visitNode(e.using))}visitCast(e){this.append("cast("),this.visitNode(e.expression),this.append(" as "),this.visitNode(e.dataType),this.append(")")}visitFetch(e){this.append("fetch next "),this.visitNode(e.rowCount),this.append(` rows ${e.modifier}`)}visitOutput(e){this.append("output "),this.compileList(e.selections)}visitTop(e){this.append(`top(${e.expression})`),e.modifiers&&this.append(` ${e.modifiers}`)}visitOrAction(e){this.append(e.action)}visitCollate(e){this.append("collate "),this.visitNode(e.collation)}append(e){this.#L+=e}appendValue(e){this.addParameter(e),this.append(this.getCurrentParameterPlaceholder())}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getCurrentParameterPlaceholder(){return"$"+this.numParameters}getLeftExplainOptionsWrapper(){return"("}getExplainOptionAssignment(){return" "}getExplainOptionsDelimiter(){return", "}getRightExplainOptionsWrapper(){return")"}sanitizeIdentifier(e){let t=this.getLeftIdentifierWrapper(),r=this.getRightIdentifierWrapper(),i="";for(let o of e)i+=o,o===t?i+=t:o===r&&(i+=r);return i}sanitizeStringLiteral(e){return e.replace(l,"''")}addParameter(e){this.#Q.push(e)}appendImmediateValue(e){if((0,a.isString)(e))this.appendStringLiteral(e);else if((0,a.isNumber)(e)||(0,a.isBoolean)(e)||(0,a.isBigInt)(e))this.append(e.toString());else if((0,a.isNull)(e))this.append("null");else if((0,a.isDate)(e))this.appendImmediateValue(e.toISOString());else throw Error(`invalid immediate value ${e}`)}appendStringLiteral(e){this.append("'"),this.append(this.sanitizeStringLiteral(e)),this.append("'")}sortSelectModifiers(e){return e.sort((e,t)=>e.modifier&&t.modifier?N[e.modifier]-N[t.modifier]:1),(0,a.freeze)(e)}compileColumnAlterations(e){this.compileList(e)}announcesNewColumnDataType(){return!0}}let f=(0,a.freeze)({ForKeyShare:"for key share",ForNoKeyUpdate:"for no key update",ForUpdate:"for update",ForShare:"for share",NoWait:"nowait",SkipLocked:"skip locked",Distinct:"distinct"}),N=(0,a.freeze)({ForKeyShare:1,ForNoKeyUpdate:1,ForUpdate:1,ForShare:1,NoWait:2,SkipLocked:2,Distinct:0}),m=(0,a.freeze)({InnerJoin:"inner join",LeftJoin:"left join",RightJoin:"right join",FullJoin:"full join",CrossJoin:"cross join",LateralInnerJoin:"inner join lateral",LateralLeftJoin:"left join lateral",LateralCrossJoin:"cross join lateral",OuterApply:"outer apply",CrossApply:"cross apply",Using:"using"});e.s(["DefaultQueryCompiler",()=>c])}]);