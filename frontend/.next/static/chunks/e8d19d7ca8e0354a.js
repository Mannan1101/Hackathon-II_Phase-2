(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return n}});let n=e=>{}},85044,e=>{"use strict";function t(e){switch(e){case"a-z":return"abcdefghijklmnopqrstuvwxyz";case"A-Z":return"ABCDEFGHIJKLMNOPQRSTUVWXYZ";case"0-9":return"0123456789";case"-_":return"-_";default:throw Error(`Unsupported alphabet: ${e}`)}}function r(...e){let n=e.map(t).join("");if(0===n.length)throw Error("No valid characters provided for random string generation.");let a=n.length;return(e,...r)=>{let i;if(e<=0)throw Error("Length must be a positive integer.");let o=n,s=a;r.length>0&&(s=(o=r.map(t).join("")).length);let l=Math.floor(256/s)*s,d=new Uint8Array(2*e),u=d.length,c="",f=u;for(;c.length<e;)f>=u&&(crypto.getRandomValues(d),f=0),(i=d[f++])<l&&(c+=o[i%s]);return c}}e.s(["createRandomStringGenerator",()=>r])},31335,e=>{"use strict";var t=e.i(47167);let r=Object.create(null),n=e=>globalThis.process?.env||globalThis.Deno?.env.toObject()||globalThis.__env__||(e?r:globalThis),a=new Proxy(r,{get:(e,t)=>n()[t]??r[t],has:(e,t)=>t in n()||t in r,set:(e,t,r)=>(n(!0)[t]=r,!0),deleteProperty(e,t){if(!t)return!1;let r=n(!0);return delete r[t],!0},ownKeys:()=>Object.keys(n(!0))}),i=void 0!==t.default&&t.default.env&&"production"||"",o="production"===i,s=()=>"dev"===i||"development"===i,l=()=>{var e;return"test"===i||!!(e=a.TEST)&&"false"!==e};function d(e,r){return void 0!==t.default&&t.default.env?t.default.env[e]??r:"undefined"!=typeof Deno?Deno.env.get(e)??r:"undefined"!=typeof Bun?Bun.env[e]??r:r}function u(e,t=!0){let r=d(e);return r?"0"!==r&&"false"!==r.toLowerCase()&&""!==r:t}let c=Object.freeze({get BETTER_AUTH_SECRET(){return d("BETTER_AUTH_SECRET")},get AUTH_SECRET(){return d("AUTH_SECRET")},get BETTER_AUTH_TELEMETRY(){return d("BETTER_AUTH_TELEMETRY")},get BETTER_AUTH_TELEMETRY_ID(){return d("BETTER_AUTH_TELEMETRY_ID")},get NODE_ENV(){return d("NODE_ENV","development")},get PACKAGE_VERSION(){return d("PACKAGE_VERSION","0.0.0")},get BETTER_AUTH_TELEMETRY_ENDPOINT(){return d("BETTER_AUTH_TELEMETRY_ENDPOINT","https://telemetry.better-auth.com/v1/track")}}),f={eterm:4,cons25:4,console:4,cygwin:4,dtterm:4,gnome:4,hurd:4,jfbterm:4,konsole:4,kterm:4,mlterm:4,mosh:24,putty:4,st:4,"rxvt-unicode-24bit":24,terminator:24,"xterm-kitty":24},p=new Map(Object.entries({APPVEYOR:8,BUILDKITE:8,CIRCLECI:24,DRONE:8,GITEA_ACTIONS:24,GITHUB_ACTIONS:24,GITLAB_CI:8,TRAVIS:8})),m=[/ansi/,/color/,/linux/,/direct/,/^con[0-9]*x[0-9]/,/^rxvt/,/^screen/,/^xterm/,/^vt100/,/^vt220/];function h(){if(void 0!==d("FORCE_COLOR"))switch(d("FORCE_COLOR")){case"":case"1":case"true":return 4;case"2":return 8;case"3":return 24;default:return 1}if(void 0!==d("NODE_DISABLE_COLORS")&&""!==d("NODE_DISABLE_COLORS")||void 0!==d("NO_COLOR")&&""!==d("NO_COLOR")||"dumb"===d("TERM"))return 1;if(d("TMUX"))return 24;if("TF_BUILD"in a&&"AGENT_NAME"in a)return 4;if("CI"in a){for(let{0:e,1:t}of p)if(e in a)return t;return"codeship"===d("CI_NAME")?8:1}if("TEAMCITY_VERSION"in a)return null!==/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.exec(d("TEAMCITY_VERSION"))?4:1;switch(d("TERM_PROGRAM")){case"iTerm.app":if(!d("TERM_PROGRAM_VERSION")||null!==/^[0-2]\./.exec(d("TERM_PROGRAM_VERSION")))return 8;return 24;case"HyperTerm":case"MacTerm":return 24;case"Apple_Terminal":return 8}if("truecolor"===d("COLORTERM")||"24bit"===d("COLORTERM"))return 24;if(d("TERM")){if(null!==/truecolor/.exec(d("TERM")))return 24;if(null!==/^xterm-256/.exec(d("TERM")))return 8;let e=d("TERM").toLowerCase();if(f[e])return f[e];if(m.some(t=>null!==t.exec(e)))return 4}return d("COLORTERM")?4:1}let g={reset:"\x1b[0m",bright:"\x1b[1m",dim:"\x1b[2m",undim:"\x1b[22m",underscore:"\x1b[4m",blink:"\x1b[5m",reverse:"\x1b[7m",hidden:"\x1b[8m",fg:{black:"\x1b[30m",red:"\x1b[31m",green:"\x1b[32m",yellow:"\x1b[33m",blue:"\x1b[34m",magenta:"\x1b[35m",cyan:"\x1b[36m",white:"\x1b[37m"},bg:{black:"\x1b[40m",red:"\x1b[41m",green:"\x1b[42m",yellow:"\x1b[43m",blue:"\x1b[44m",magenta:"\x1b[45m",cyan:"\x1b[46m",white:"\x1b[47m"}},y=["debug","info","success","warn","error"];function b(e,t){return y.indexOf(t)>=y.indexOf(e)}let E={info:g.fg.blue,success:g.fg.green,warn:g.fg.yellow,error:g.fg.red,debug:g.fg.magenta},N=e=>{let t=e?.disabled!==!0,r=e?.level??"error",n=e?.disableColors!==void 0?!e.disableColors:1!==h();return{...Object.fromEntries(y.map(a=>[a,(...[i,...o])=>((a,i,o=[])=>{let s;if(!t||!b(r,a))return;let l=(s=new Date().toISOString(),n?`${g.dim}${s}${g.reset} ${E[a]}${a.toUpperCase()}${g.reset} ${g.bright}[Better Auth]:${g.reset} ${i}`:`${s} ${a.toUpperCase()} [Better Auth]: ${i}`);e&&"function"==typeof e.log?e.log("success"===a?"info":a,i,...o):"error"===a?console.error(l,...o):"warn"===a?console.warn(l,...o):console.log(l,...o)})(a,i,o)])),get level(){return r}}},T=N();e.s(["a",()=>b,"c",()=>a,"d",()=>s,"f",()=>o,"i",()=>T,"l",()=>u,"m",()=>i,"n",()=>N,"o",()=>h,"p",()=>l,"r",()=>y,"s",()=>c,"t",()=>g,"u",()=>d])},41935,62830,e=>{"use strict";var t=e.i(31335),r=e.i(85044);function n(e){return e}let a=e=>(0,r.createRandomStringGenerator)("a-z","A-Z","0-9")(e||32);function i(e){try{if("string"!=typeof e)return e;return JSON.parse(e,function(e,t){if("string"==typeof t&&/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:\.\d+)?Z$/.test(t)){let e=new Date(t);if(!isNaN(e.getTime()))return e}return t})}catch(e){return t.i.error("Error parsing JSON",{error:e}),null}}function o(e){return e.charAt(0).toUpperCase()+e.slice(1)}e.s(["i",()=>n,"n",()=>i,"r",()=>a,"t",()=>o],41935);let s={USER_NOT_FOUND:"User not found",FAILED_TO_CREATE_USER:"Failed to create user",FAILED_TO_CREATE_SESSION:"Failed to create session",FAILED_TO_UPDATE_USER:"Failed to update user",FAILED_TO_GET_SESSION:"Failed to get session",INVALID_PASSWORD:"Invalid password",INVALID_EMAIL:"Invalid email",INVALID_EMAIL_OR_PASSWORD:"Invalid email or password",SOCIAL_ACCOUNT_ALREADY_LINKED:"Social account already linked",PROVIDER_NOT_FOUND:"Provider not found",INVALID_TOKEN:"Invalid token",ID_TOKEN_NOT_SUPPORTED:"id_token not supported",FAILED_TO_GET_USER_INFO:"Failed to get user info",USER_EMAIL_NOT_FOUND:"User email not found",EMAIL_NOT_VERIFIED:"Email not verified",PASSWORD_TOO_SHORT:"Password too short",PASSWORD_TOO_LONG:"Password too long",USER_ALREADY_EXISTS:"User already exists.",USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL:"User already exists. Use another email.",EMAIL_CAN_NOT_BE_UPDATED:"Email can not be updated",CREDENTIAL_ACCOUNT_NOT_FOUND:"Credential account not found",SESSION_EXPIRED:"Session expired. Re-authenticate to perform this action.",FAILED_TO_UNLINK_LAST_ACCOUNT:"You can't unlink your last account",ACCOUNT_NOT_FOUND:"Account not found",USER_ALREADY_HAS_PASSWORD:"User already has a password. Provide that to delete the account.",CROSS_SITE_NAVIGATION_LOGIN_BLOCKED:"Cross-site navigation login blocked. This request appears to be a CSRF attack.",VERIFICATION_EMAIL_NOT_ENABLED:"Verification email isn't enabled",EMAIL_ALREADY_VERIFIED:"Email is already verified",EMAIL_MISMATCH:"Email mismatch",SESSION_NOT_FRESH:"Session is not fresh",LINKED_ACCOUNT_ALREADY_EXISTS:"Linked account already exists",INVALID_ORIGIN:"Invalid origin",INVALID_CALLBACK_URL:"Invalid callbackURL",INVALID_REDIRECT_URL:"Invalid redirectURL",INVALID_ERROR_CALLBACK_URL:"Invalid errorCallbackURL",INVALID_NEW_USER_CALLBACK_URL:"Invalid newUserCallbackURL",MISSING_OR_NULL_ORIGIN:"Missing or null Origin",CALLBACK_URL_REQUIRED:"callbackURL is required",FAILED_TO_CREATE_VERIFICATION:"Unable to create verification",FIELD_NOT_ALLOWED:"Field not allowed to be set",ASYNC_VALIDATION_NOT_SUPPORTED:"Async validation is not supported",VALIDATION_ERROR:"Validation Error",MISSING_FIELD:"Field is required"};var l=class extends Error{constructor(e,t){super(e),this.name="BetterAuthError",this.message=e,this.cause=t,this.stack=""}};e.s(["n",()=>s,"t",()=>l],62830)},91762,e=>{"use strict";let t=e=>{let t=(e.plugins??[]).reduce((e,t)=>{let r=t.schema;if(!r)return e;for(let[t,n]of Object.entries(r))e[t]={fields:{...e[t]?.fields,...n.fields},modelName:n.modelName||t};return e},{}),r=e.rateLimit?.storage==="database",n={rateLimit:{modelName:e.rateLimit?.modelName||"rateLimit",fields:{key:{type:"string",fieldName:e.rateLimit?.fields?.key||"key"},count:{type:"number",fieldName:e.rateLimit?.fields?.count||"count"},lastRequest:{type:"number",bigint:!0,fieldName:e.rateLimit?.fields?.lastRequest||"lastRequest"}}}},{user:a,session:i,account:o,verification:s,...l}=t,d={session:{modelName:e.session?.modelName||"session",fields:{expiresAt:{type:"date",required:!0,fieldName:e.session?.fields?.expiresAt||"expiresAt"},token:{type:"string",required:!0,fieldName:e.session?.fields?.token||"token",unique:!0},createdAt:{type:"date",required:!0,fieldName:e.session?.fields?.createdAt||"createdAt",defaultValue:()=>new Date},updatedAt:{type:"date",required:!0,fieldName:e.session?.fields?.updatedAt||"updatedAt",onUpdate:()=>new Date},ipAddress:{type:"string",required:!1,fieldName:e.session?.fields?.ipAddress||"ipAddress"},userAgent:{type:"string",required:!1,fieldName:e.session?.fields?.userAgent||"userAgent"},userId:{type:"string",fieldName:e.session?.fields?.userId||"userId",references:{model:e.user?.modelName||"user",field:"id",onDelete:"cascade"},required:!0,index:!0},...i?.fields,...e.session?.additionalFields},order:2}};return{user:{modelName:e.user?.modelName||"user",fields:{name:{type:"string",required:!0,fieldName:e.user?.fields?.name||"name",sortable:!0},email:{type:"string",unique:!0,required:!0,fieldName:e.user?.fields?.email||"email",sortable:!0},emailVerified:{type:"boolean",defaultValue:!1,required:!0,fieldName:e.user?.fields?.emailVerified||"emailVerified",input:!1},image:{type:"string",required:!1,fieldName:e.user?.fields?.image||"image"},createdAt:{type:"date",defaultValue:()=>new Date,required:!0,fieldName:e.user?.fields?.createdAt||"createdAt"},updatedAt:{type:"date",defaultValue:()=>new Date,onUpdate:()=>new Date,required:!0,fieldName:e.user?.fields?.updatedAt||"updatedAt"},...a?.fields,...e.user?.additionalFields},order:1},...!e.secondaryStorage||e.session?.storeSessionInDatabase?d:{},account:{modelName:e.account?.modelName||"account",fields:{accountId:{type:"string",required:!0,fieldName:e.account?.fields?.accountId||"accountId"},providerId:{type:"string",required:!0,fieldName:e.account?.fields?.providerId||"providerId"},userId:{type:"string",references:{model:e.user?.modelName||"user",field:"id",onDelete:"cascade"},required:!0,fieldName:e.account?.fields?.userId||"userId",index:!0},accessToken:{type:"string",required:!1,fieldName:e.account?.fields?.accessToken||"accessToken"},refreshToken:{type:"string",required:!1,fieldName:e.account?.fields?.refreshToken||"refreshToken"},idToken:{type:"string",required:!1,fieldName:e.account?.fields?.idToken||"idToken"},accessTokenExpiresAt:{type:"date",required:!1,fieldName:e.account?.fields?.accessTokenExpiresAt||"accessTokenExpiresAt"},refreshTokenExpiresAt:{type:"date",required:!1,fieldName:e.account?.fields?.refreshTokenExpiresAt||"refreshTokenExpiresAt"},scope:{type:"string",required:!1,fieldName:e.account?.fields?.scope||"scope"},password:{type:"string",required:!1,fieldName:e.account?.fields?.password||"password"},createdAt:{type:"date",required:!0,fieldName:e.account?.fields?.createdAt||"createdAt",defaultValue:()=>new Date},updatedAt:{type:"date",required:!0,fieldName:e.account?.fields?.updatedAt||"updatedAt",onUpdate:()=>new Date},...o?.fields,...e.account?.additionalFields},order:3},verification:{modelName:e.verification?.modelName||"verification",fields:{identifier:{type:"string",required:!0,fieldName:e.verification?.fields?.identifier||"identifier",index:!0},value:{type:"string",required:!0,fieldName:e.verification?.fields?.value||"value"},expiresAt:{type:"date",required:!0,fieldName:e.verification?.fields?.expiresAt||"expiresAt"},createdAt:{type:"date",required:!0,defaultValue:()=>new Date,fieldName:e.verification?.fields?.createdAt||"createdAt"},updatedAt:{type:"date",required:!0,defaultValue:()=>new Date,onUpdate:()=>new Date,fieldName:e.verification?.fields?.updatedAt||"updatedAt"},...s?.fields,...e.verification?.additionalFields},order:4},...l,...r?n:{}}};e.s(["t",()=>t])},76239,e=>{"use strict";var t=e.i(91762),r=e.i(31335),n=e.i(41935),a=e.i(62830);let i=({usePlural:e,schema:t})=>r=>{if(e&&"s"===r.charAt(r.length-1)){let e=r.slice(0,-1),n=t[e]?e:void 0;if(n||(n=Object.entries(t).find(([t,r])=>r.modelName===e)?.[0]),n)return n}let n=t[r]?r:void 0;if(n||(n=Object.entries(t).find(([e,t])=>t.modelName===r)?.[0]),!n)throw new a.t(`Model "${r}" not found in schema`);return n},o=({schema:e,usePlural:t})=>{let r=i({schema:e,usePlural:t});return({field:t,model:n})=>{if("id"===t||"_id"===t)return"id";let i=r(n),o=e[i]?.fields[t];if(!o){let r=Object.entries(e[i].fields).find(([e,r])=>r.fieldName===t);r&&(o=r[1],t=r[0])}if(!o)throw new a.t(`Field ${t} not found in model ${i}`);return t}},s=({usePlural:e,schema:t,disableIdGeneration:a,options:o,customIdGenerator:s,supportsUUIDs:l})=>{let d=i({usePlural:e,schema:t});return({customModelName:e,forceAllowId:t})=>{let i=o.advanced?.database?.useNumberId||o.advanced?.database?.generateId==="serial",u=o.advanced?.database?.generateId==="uuid",c=!a&&(!i||!!t)&&(!u||!l),f=d(e??"id");return{type:i?"number":"string",required:!!c,...c?{defaultValue(){if(a)return;let e=o.advanced?.database?.generateId;if(!1!==e&&!i)return"function"==typeof e?e({model:f}):s?s({model:f}):"uuid"===e?crypto.randomUUID():(0,n.r)()}}:{},transform:{input:e=>{if(e){if(i){let t=Number(e);if(isNaN(t))return;return t}if(u){if(c&&!t)return e;if(a||l)return;if(t&&"string"==typeof e)if(/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e))return e;else{let e=Error().stack?.split("\n").filter((e,t)=>1!==t).join("\n").replace("Error:","");r.i.warn("[Adapter Factory] - Invalid UUID value for field `id` provided when `forceAllowId` is true. Generating a new UUID.",e)}return"string"==typeof e||l?void 0:crypto.randomUUID()}return e}},output:e=>{if(e)return String(e)}}}}},l=({schema:e,usePlural:t})=>{let r=i({schema:e,usePlural:t}),n=o({schema:e,usePlural:t});return function({model:t,field:a}){let i=r(t),o=n({model:i,field:a});return e[i]?.fields[o]?.fieldName||o}},d=({usePlural:e,schema:t})=>{let r=i({schema:t,usePlural:e});return n=>{let a=r(n);return t&&t[a]&&t[a].modelName!==n?e?`${t[a].modelName}s`:t[a].modelName:e?`${n}s`:n}},u=[],c=-1,f=({adapter:e,config:f})=>y=>{let b=Math.random().toString(36).substring(2,15),E={...f,supportsBooleans:f.supportsBooleans??!0,supportsDates:f.supportsDates??!0,supportsJSON:f.supportsJSON??!1,adapterName:f.adapterName??f.adapterId,supportsNumericIds:f.supportsNumericIds??!0,supportsUUIDs:f.supportsUUIDs??!1,supportsArrays:f.supportsArrays??!1,transaction:f.transaction??!1,disableTransformInput:f.disableTransformInput??!1,disableTransformOutput:f.disableTransformOutput??!1,disableTransformJoin:f.disableTransformJoin??!1};if((y.advanced?.database?.useNumberId===!0||y.advanced?.database?.generateId==="serial")&&!1===E.supportsNumericIds)throw new a.t(`[${E.adapterName}] Your database or database adapter does not support numeric ids. Please disable "useNumberId" in your config.`);let N=(0,t.t)(y),T=(...e)=>{if(!0===E.debugLogs||"object"==typeof E.debugLogs){let t=(0,r.n)({level:"info"});if("object"==typeof E.debugLogs&&"isRunningAdapterTests"in E.debugLogs){E.debugLogs.isRunningAdapterTests&&(e.shift(),u.push({instance:b,args:e}));return}if("object"!=typeof E.debugLogs||!E.debugLogs.logCondition||E.debugLogs.logCondition?.())if("object"==typeof e[0]&&"method"in e[0]){let r=e.shift().method;if("object"==typeof E.debugLogs){if("create"===r&&!E.debugLogs.create)return;else if("update"===r&&!E.debugLogs.update)return;else if("updateMany"===r&&!E.debugLogs.updateMany)return;else if("findOne"===r&&!E.debugLogs.findOne)return;else if("findMany"===r&&!E.debugLogs.findMany)return;else if("delete"===r&&!E.debugLogs.delete)return;else if("deleteMany"===r&&!E.debugLogs.deleteMany)return;else if("count"===r&&!E.debugLogs.count)return}t.info(`[${E.adapterName}]`,...e)}else t.info(`[${E.adapterName}]`,...e)}},I=(0,r.n)(y.logger),A=i({usePlural:E.usePlural,schema:N}),v=o({usePlural:E.usePlural,schema:N}),O=d({usePlural:E.usePlural,schema:N}),_=l({schema:N,usePlural:E.usePlural}),w=s({schema:N,options:y,usePlural:E.usePlural,disableIdGeneration:E.disableIdGeneration,customIdGenerator:E.customIdGenerator,supportsUUIDs:E.supportsUUIDs}),R=(({usePlural:e,schema:t,options:r,customIdGenerator:n,disableIdGeneration:l})=>{let d=i({usePlural:e,schema:t}),u=o({usePlural:e,schema:t}),c=s({usePlural:e,schema:t,options:r,customIdGenerator:n,disableIdGeneration:l});return({model:e,field:r})=>{let n=d(e),i=u({field:r,model:n}),o=t[n].fields;o.id=c({customModelName:n});let s=o[i];if(!s)throw new a.t(`Field ${r} not found in model ${e}`);return s}})({schema:N,options:y,usePlural:E.usePlural,disableIdGeneration:E.disableIdGeneration,customIdGenerator:E.customIdGenerator}),x=async(e,t,r,n)=>{let a={},i=N[t].fields,o=E.mapKeysTransformInput??{},s=y.advanced?.database?.useNumberId||y.advanced?.database?.generateId==="serial";for(let l in i.id=w({customModelName:t,forceAllowId:n&&"id"in e}),i){let n=e[l],d=i[l],u=o[l]||i[l].fieldName||l;if(void 0===n&&(void 0===d.defaultValue&&!d.transform?.input&&!("update"===r&&d.onUpdate)||"update"===r&&!d.onUpdate))continue;if(d&&"date"===d.type&&!(n instanceof Date)&&"string"==typeof n)try{n=new Date(n)}catch{I.error("[Adapter Factory] Failed to convert string to date",{value:n,field:l})}let c=function(e,t,r){if("update"===r)return void 0===e&&void 0!==t.onUpdate?"function"==typeof t.onUpdate?t.onUpdate():t.onUpdate:e;return"create"===r&&(void 0===e||!0===t.required&&null===e)&&void 0!==t.defaultValue?"function"==typeof t.defaultValue?t.defaultValue():t.defaultValue:e}(n,d,r);d.transform?.input&&(c=await d.transform.input(c)),d.references?.field==="id"&&s?c=Array.isArray(c)?c.map(e=>null!==e?Number(e):null):null!==c?Number(c):null:!1===E.supportsJSON&&"object"==typeof c&&"json"===d.type||!1===E.supportsArrays&&Array.isArray(c)&&("string[]"===d.type||"number[]"===d.type)?c=JSON.stringify(c):!1===E.supportsDates&&c instanceof Date&&"date"===d.type?c=c.toISOString():!1===E.supportsBooleans&&"boolean"==typeof c&&(c=+!!c),E.customTransformInput&&(c=E.customTransformInput({data:c,action:r,field:u,fieldAttributes:d,model:O(t),schema:N,options:y})),void 0!==c&&(a[u]=c)}return a},$=async(e,t,r=[],a)=>{let i=async(e,t,r=[])=>{if(!e)return null;let a=E.mapKeysTransformOutput??{},i={},o=N[A(t)].fields;for(let s in o[Object.entries(a).find(([e,t])=>"id"===t)?.[0]??"id"]={type:y.advanced?.database?.useNumberId||y.advanced?.database?.generateId==="serial"?"number":"string"},o){if(r.length&&!r.includes(s))continue;let l=o[s];if(l){let o=l.fieldName||s,d=e[Object.entries(a).find(([e,t])=>t===o)?.[0]||o];l.transform?.output&&(d=await l.transform.output(d));let u=a[s]||s;"id"===o||l.references?.field==="id"?null!=d&&(d=String(d)):!1===E.supportsJSON&&"string"==typeof d&&"json"===l.type||!1===E.supportsArrays&&"string"==typeof d&&("string[]"===l.type||"number[]"===l.type)?d=(0,n.n)(d):!1===E.supportsDates&&"string"==typeof d&&"date"===l.type?d=new Date(d):!1===E.supportsBooleans&&"number"==typeof d&&"boolean"===l.type&&(d=1===d),E.customTransformOutput&&(d=E.customTransformOutput({data:d,field:u,fieldAttributes:l,select:r,model:O(t),schema:N,options:y})),i[u]=d}}return i};if(!a||0===Object.keys(a).length)return await i(e,t,r);t=A(t);let o=await i(e,t,r),s=Object.entries(a).map(([e,t])=>({modelName:O(e),defaultModelName:A(e),joinConfig:t}));if(!e)return null;for(let{modelName:r,defaultModelName:n,joinConfig:a}of s){let s=await (async()=>y.experimental?.joins?e[r]:await j({baseModel:t,baseData:o,joinModel:r,specificJoinConfig:a}))();null==s&&(s="one-to-one"===a.relation?null:[]),"one-to-many"!==a.relation||Array.isArray(s)||(s=[s]);let l=[];if(Array.isArray(s))for(let e of s){let t=await i(e,r,[]);l.push(t)}else{let e=await i(s,r,[]);l.push(e)}o[n]=("one-to-one"===a.relation?l[0]:l)??null}return o},L=({model:e,where:t,action:r})=>{if(!t)return;let n=E.mapKeysTransformInput??{};return t.map(t=>{let{field:i,value:o,operator:s="eq",connector:l="AND"}=t;if("in"===s&&!Array.isArray(o))throw new a.t("Value must be an array");let d=o,u=A(e),c=v({field:i,model:e}),f=n[c]||_({field:c,model:u}),p=R({field:c,model:u}),m=y.advanced?.database?.useNumberId||y.advanced?.database?.generateId==="serial";if(("id"===c||p.references?.field==="id")&&m&&(d=Array.isArray(o)?o.map(Number):Number(o)),"date"===p.type&&o instanceof Date&&!E.supportsDates&&(d=o.toISOString()),"boolean"!==p.type||"boolean"!=typeof o||E.supportsBooleans||(d=+!!o),"json"===p.type&&"object"==typeof o&&!E.supportsJSON)try{d=JSON.stringify(o)}catch(e){throw Error(`Failed to stringify JSON value for field ${f}`,{cause:e})}return E.customTransformInput&&(d=E.customTransformInput({data:d,fieldAttributes:p,field:f,model:O(e),schema:N,options:y,action:r})),{operator:s,connector:l,field:f,value:d}})},S=(e,t,r)=>{if(!t||0===Object.keys(t).length)return;let n={};for(let[i,o]of Object.entries(t)){let t,s,l;if(!o)continue;let d=A(i),u=A(e),c=Object.entries(N[d].fields).filter(([e,t])=>t.references&&A(t.references.model)===u),f=!0;if(c.length||(c=Object.entries(N[u].fields).filter(([e,t])=>t.references&&A(t.references.model)===d),f=!1),c.length){if(c.length>1)throw new a.t(`Multiple foreign keys found for model ${i} and base model ${e} while performing join operation. Only one foreign key is supported.`)}else throw new a.t(`No foreign key found for model ${i} and base model ${e} while performing join operation.`);let[p,m]=c[0];if(!m.references)throw new a.t(`No references found for foreign key ${p} on model ${i} while performing join operation.`);f?(t=_({model:e,field:l=m.references.field}),s=_({model:i,field:p})):(t=_({model:e,field:l=p}),s=_({model:i,field:m.references.field})),r&&!r.includes(l)&&r.push(l);let h="id"===s||(m.unique??!1),g=y.advanced?.database?.defaultFindManyLimit??100;h?g=1:"object"==typeof o&&"number"==typeof o.limit&&(g=o.limit),n[O(i)]={on:{from:t,to:s},limit:g,relation:h?"one-to-one":"one-to-many"}}return{join:n,select:r}},j=async({baseModel:e,baseData:t,joinModel:r,specificJoinConfig:n})=>{let a;if(!t)return t;let i=O(r),o=n.on.to,s=t[v({field:n.on.from,model:e})];if(null==s)return"one-to-one"===n.relation?null:[];let l=L({model:i,where:[{field:o,value:s,operator:"eq",connector:"AND"}],action:"findOne"});try{if("one-to-one"===n.relation)a=await C.findOne({model:i,where:l});else{let e=n.limit??y.advanced?.database?.defaultFindManyLimit??100;a=await C.findMany({model:i,where:l,limit:e})}}catch(e){throw I.error(`Failed to query fallback join for model ${i}:`,{where:l,limit:n.limit}),console.error(e),e}return a},C=e({options:y,schema:N,debugLog:T,getFieldName:_,getModelName:O,getDefaultModelName:A,getDefaultFieldName:v,getFieldAttributes:R,transformInput:x,transformOutput:$,transformWhereClause:L}),D=null,M={transaction:async e=>{if(!D)if(E.transaction)I.debug(`[${E.adapterName}] - Using provided transaction implementation.`),D=E.transaction;else D=e=>e(M);return D(e)},create:async({data:e,model:t,select:r,forceAllowId:n=!1})=>{let a=++c,i=O(t);t=A(t),"id"in e&&void 0!==e.id&&!n&&(I.warn(`[${E.adapterName}] - You are trying to create a record with an id. This is not allowed as we handle id generation for you, unless you pass in the \`forceAllowId\` parameter. The id will be ignored.`),console.log(Error().stack?.split("\n").filter((e,t)=>1!==t).join("\n").replace("Error:","Create method with `id` being called at:")),e.id=void 0),T({method:"create"},`${p(a)} ${m(1,4)}`,`${h("create")} ${g("Unsafe Input")}:`,{model:i,data:e});let o=e;E.disableTransformInput||(o=await x(e,t,"create",n)),T({method:"create"},`${p(a)} ${m(2,4)}`,`${h("create")} ${g("Parsed Input")}:`,{model:i,data:o});let s=await C.create({data:o,model:i});T({method:"create"},`${p(a)} ${m(3,4)}`,`${h("create")} ${g("DB Result")}:`,{model:i,res:s});let l=s;return E.disableTransformOutput||(l=await $(s,t,r,void 0)),T({method:"create"},`${p(a)} ${m(4,4)}`,`${h("create")} ${g("Parsed Result")}:`,{model:i,data:l}),l},update:async({model:e,where:t,update:r})=>{let n=++c,a=O(e=A(e)),i=L({model:e,where:t,action:"update"});T({method:"update"},`${p(n)} ${m(1,4)}`,`${h("update")} ${g("Unsafe Input")}:`,{model:a,data:r});let o=r;E.disableTransformInput||(o=await x(r,e,"update")),T({method:"update"},`${p(n)} ${m(2,4)}`,`${h("update")} ${g("Parsed Input")}:`,{model:a,data:o});let s=await C.update({model:a,where:i,update:o});T({method:"update"},`${p(n)} ${m(3,4)}`,`${h("update")} ${g("DB Result")}:`,{model:a,data:s});let l=s;return E.disableTransformOutput||(l=await $(s,e,void 0,void 0)),T({method:"update"},`${p(n)} ${m(4,4)}`,`${h("update")} ${g("Parsed Result")}:`,{model:a,data:l}),l},updateMany:async({model:e,where:t,update:r})=>{let n=++c,a=O(e),i=L({model:e,where:t,action:"updateMany"});e=A(e),T({method:"updateMany"},`${p(n)} ${m(1,4)}`,`${h("updateMany")} ${g("Unsafe Input")}:`,{model:a,data:r});let o=r;E.disableTransformInput||(o=await x(r,e,"update")),T({method:"updateMany"},`${p(n)} ${m(2,4)}`,`${h("updateMany")} ${g("Parsed Input")}:`,{model:a,data:o});let s=await C.updateMany({model:a,where:i,update:o});return T({method:"updateMany"},`${p(n)} ${m(3,4)}`,`${h("updateMany")} ${g("DB Result")}:`,{model:a,data:s}),T({method:"updateMany"},`${p(n)} ${m(4,4)}`,`${h("updateMany")} ${g("Parsed Result")}:`,{model:a,data:s}),s},findOne:async({model:e,where:t,select:r,join:n})=>{let a,i=++c,o=O(e),s=L({model:e,where:t,action:"findOne"});e=A(e);let l=!0;if(E.disableTransformJoin)a=n;else{let t=S(e,n,r);t&&(a=t.join,r=t.select),!y.experimental?.joins&&a&&Object.keys(a).length>0&&(l=!1)}T({method:"findOne"},`${p(i)} ${m(1,3)}`,`${h("findOne")}:`,{model:o,where:s,select:r,join:a});let d=await C.findOne({model:o,where:s,select:r,join:l?a:void 0});T({method:"findOne"},`${p(i)} ${m(2,3)}`,`${h("findOne")} ${g("DB Result")}:`,{model:o,data:d});let u=d;return E.disableTransformOutput||(u=await $(d,e,r,a)),T({method:"findOne"},`${p(i)} ${m(3,3)}`,`${h("findOne")} ${g("Parsed Result")}:`,{model:o,data:u}),u},findMany:async({model:e,where:t,limit:r,sortBy:n,offset:a,join:i})=>{let o,s=++c,l=r??y.advanced?.database?.defaultFindManyLimit??100,d=O(e),u=L({model:e,where:t,action:"findMany"});e=A(e);let f=!0;if(E.disableTransformJoin)o=i;else{let t=S(e,i,void 0);t&&(o=t.join),!y.experimental?.joins&&o&&Object.keys(o).length>0&&(f=!1)}T({method:"findMany"},`${p(s)} ${m(1,3)}`,`${h("findMany")}:`,{model:d,where:u,limit:l,sortBy:n,offset:a,join:o});let b=await C.findMany({model:d,where:u,limit:l,sortBy:n,offset:a,join:f?o:void 0});T({method:"findMany"},`${p(s)} ${m(2,3)}`,`${h("findMany")} ${g("DB Result")}:`,{model:d,data:b});let N=b;return E.disableTransformOutput||(N=await Promise.all(b.map(async t=>await $(t,e,void 0,o)))),T({method:"findMany"},`${p(s)} ${m(3,3)}`,`${h("findMany")} ${g("Parsed Result")}:`,{model:d,data:N}),N},delete:async({model:e,where:t})=>{let r=++c,n=O(e),a=L({model:e,where:t,action:"delete"});e=A(e),T({method:"delete"},`${p(r)} ${m(1,2)}`,`${h("delete")}:`,{model:n,where:a}),await C.delete({model:n,where:a}),T({method:"delete"},`${p(r)} ${m(2,2)}`,`${h("delete")} ${g("DB Result")}:`,{model:n})},deleteMany:async({model:e,where:t})=>{let r=++c,n=O(e),a=L({model:e,where:t,action:"deleteMany"});e=A(e),T({method:"deleteMany"},`${p(r)} ${m(1,2)}`,`${h("deleteMany")} ${g("DeleteMany")}:`,{model:n,where:a});let i=await C.deleteMany({model:n,where:a});return T({method:"deleteMany"},`${p(r)} ${m(2,2)}`,`${h("deleteMany")} ${g("DB Result")}:`,{model:n,data:i}),i},count:async({model:e,where:t})=>{let r=++c,n=O(e),a=L({model:e,where:t,action:"count"});e=A(e),T({method:"count"},`${p(r)} ${m(1,2)}`,`${h("count")}:`,{model:n,where:a});let i=await C.count({model:n,where:a});return T({method:"count"},`${p(r)} ${m(2,2)}`,`${h("count")}:`,{model:n,data:i}),i},createSchema:C.createSchema?async(e,r)=>{let n=(0,t.t)(y);return y.secondaryStorage&&!y.session?.storeSessionInDatabase&&delete n.session,y.rateLimit&&"database"===y.rateLimit.storage&&(void 0===y.rateLimit.enabled||!0===y.rateLimit.enabled)&&(n.ratelimit={modelName:y.rateLimit.modelName??"ratelimit",fields:{key:{type:"string",unique:!0,required:!0,fieldName:y.rateLimit.fields?.key??"key"},count:{type:"number",required:!0,fieldName:y.rateLimit.fields?.count??"count"},lastRequest:{type:"number",required:!0,bigint:!0,defaultValue:()=>Date.now(),fieldName:y.rateLimit.fields?.lastRequest??"lastRequest"}}}),C.createSchema({file:r,tables:n})}:void 0,options:{adapterConfig:E,...C.options??{}},id:E.adapterId,...E.debugLogs?.isRunningAdapterTests?{adapterTestDebugLogs:{resetDebugLogs(){u=u.filter(e=>e.instance!==b)},printDebugLogs(){let e=`â”€`.repeat(80),t=u.filter(e=>e.instance===b);0===t.length||console.log(...t.reverse().map(e=>(e.args[0]=`
${e.args[0]}`,[...e.args,"\n"])).reduce((e,t)=>[...t,...e],[`
${e}`]))}}}:{}};return M};function p(e){return 8>(0,r.o)()?`#${e}`:`${r.t.fg.magenta}#${e}${r.t.reset}`}function m(e,t){return`${r.t.bg.black}${r.t.fg.yellow}[${e}/${t}]${r.t.reset}`}function h(e){return`${r.t.bright}${e}${r.t.reset}`}function g(e){return`${r.t.dim}(${e})${r.t.reset}`}e.s(["createAdapterFactory",()=>f,"initGetFieldName",()=>l,"initGetModelName",()=>d])},45550,62314,e=>{"use strict";var t=e.i(31335);e.s([],45550),e.s(["logger",()=>t.i],62314)},98183,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={assign:function(){return l},searchParamsToUrlQuery:function(){return i},urlQueryToSearchParams:function(){return s}};for(var a in n)Object.defineProperty(r,a,{enumerable:!0,get:n[a]});function i(e){let t={};for(let[r,n]of e.entries()){let e=t[r];void 0===e?t[r]=n:Array.isArray(e)?e.push(n):t[r]=[e,n]}return t}function o(e){return"string"==typeof e?e:("number"!=typeof e||isNaN(e))&&"boolean"!=typeof e?"":String(e)}function s(e){let t=new URLSearchParams;for(let[r,n]of Object.entries(e))if(Array.isArray(n))for(let e of n)t.append(r,o(e));else t.set(r,o(n));return t}function l(e,...t){for(let r of t){for(let t of r.keys())e.delete(t);for(let[t,n]of r.entries())e.append(t,n)}return e}},95057,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={formatUrl:function(){return s},formatWithValidation:function(){return d},urlObjectKeys:function(){return l}};for(var a in n)Object.defineProperty(r,a,{enumerable:!0,get:n[a]});let i=e.r(90809)._(e.r(98183)),o=/https?|ftp|gopher|file/;function s(e){let{auth:t,hostname:r}=e,n=e.protocol||"",a=e.pathname||"",s=e.hash||"",l=e.query||"",d=!1;t=t?encodeURIComponent(t).replace(/%3A/i,":")+"@":"",e.host?d=t+e.host:r&&(d=t+(~r.indexOf(":")?`[${r}]`:r),e.port&&(d+=":"+e.port)),l&&"object"==typeof l&&(l=String(i.urlQueryToSearchParams(l)));let u=e.search||l&&`?${l}`||"";return n&&!n.endsWith(":")&&(n+=":"),e.slashes||(!n||o.test(n))&&!1!==d?(d="//"+(d||""),a&&"/"!==a[0]&&(a="/"+a)):d||(d=""),s&&"#"!==s[0]&&(s="#"+s),u&&"?"!==u[0]&&(u="?"+u),a=a.replace(/[?#]/g,encodeURIComponent),u=u.replace("#","%23"),`${n}${d}${a}${u}${s}`}let l=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];function d(e){return s(e)}},18581,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"useMergedRef",{enumerable:!0,get:function(){return a}});let n=e.r(71645);function a(e,t){let r=(0,n.useRef)(null),a=(0,n.useRef)(null);return(0,n.useCallback)(n=>{if(null===n){let e=r.current;e&&(r.current=null,e());let t=a.current;t&&(a.current=null,t())}else e&&(r.current=i(e,n)),t&&(a.current=i(t,n))},[e,t])}function i(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},18967,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={DecodeError:function(){return y},MiddlewareNotFoundError:function(){return T},MissingStaticPage:function(){return N},NormalizeError:function(){return b},PageNotFoundError:function(){return E},SP:function(){return h},ST:function(){return g},WEB_VITALS:function(){return i},execOnce:function(){return o},getDisplayName:function(){return c},getLocationOrigin:function(){return d},getURL:function(){return u},isAbsoluteUrl:function(){return l},isResSent:function(){return f},loadGetInitialProps:function(){return m},normalizeRepeatedSlashes:function(){return p},stringifyError:function(){return I}};for(var a in n)Object.defineProperty(r,a,{enumerable:!0,get:n[a]});let i=["CLS","FCP","FID","INP","LCP","TTFB"];function o(e){let t,r=!1;return(...n)=>(r||(r=!0,t=e(...n)),t)}let s=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,l=e=>s.test(e);function d(){let{protocol:e,hostname:t,port:r}=window.location;return`${e}//${t}${r?":"+r:""}`}function u(){let{href:e}=window.location,t=d();return e.substring(t.length)}function c(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function f(e){return e.finished||e.headersSent}function p(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?`?${t.slice(1).join("?")}`:"")}async function m(e,t){let r=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await m(t.Component,t.ctx)}:{};let n=await e.getInitialProps(t);if(r&&f(r))return n;if(!n)throw Object.defineProperty(Error(`"${c(e)}.getInitialProps()" should resolve to an object. But found "${n}" instead.`),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return n}let h="undefined"!=typeof performance,g=h&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class y extends Error{}class b extends Error{}class E extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message=`Cannot find module for page: ${e}`}}class N extends Error{constructor(e,t){super(),this.message=`Failed to load static file for page: ${e} ${t}`}}class T extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function I(e){return JSON.stringify({message:e.message,stack:e.stack})}},73668,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"isLocalURL",{enumerable:!0,get:function(){return i}});let n=e.r(18967),a=e.r(52817);function i(e){if(!(0,n.isAbsoluteUrl)(e))return!0;try{let t=(0,n.getLocationOrigin)(),r=new URL(e,t);return r.origin===t&&(0,a.hasBasePath)(r.pathname)}catch(e){return!1}}},84508,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"errorOnce",{enumerable:!0,get:function(){return n}});let n=e=>{}},22016,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={default:function(){return y},useLinkStatus:function(){return E}};for(var a in n)Object.defineProperty(r,a,{enumerable:!0,get:n[a]});let i=e.r(90809),o=e.r(43476),s=i._(e.r(71645)),l=e.r(95057),d=e.r(8372),u=e.r(18581),c=e.r(18967),f=e.r(5550);e.r(33525);let p=e.r(91949),m=e.r(73668),h=e.r(9396);function g(e){return"string"==typeof e?e:(0,l.formatUrl)(e)}function y(t){var r;let n,a,i,[l,y]=(0,s.useOptimistic)(p.IDLE_LINK_STATUS),E=(0,s.useRef)(null),{href:N,as:T,children:I,prefetch:A=null,passHref:v,replace:O,shallow:_,scroll:w,onClick:R,onMouseEnter:x,onTouchStart:$,legacyBehavior:L=!1,onNavigate:S,ref:j,unstable_dynamicOnHover:C,...D}=t;n=I,L&&("string"==typeof n||"number"==typeof n)&&(n=(0,o.jsx)("a",{children:n}));let M=s.default.useContext(d.AppRouterContext),U=!1!==A,P=!1!==A?null===(r=A)||"auto"===r?h.FetchStrategy.PPR:h.FetchStrategy.Full:h.FetchStrategy.PPR,{href:k,as:F}=s.default.useMemo(()=>{let e=g(N);return{href:e,as:T?g(T):e}},[N,T]);if(L){if(n?.$$typeof===Symbol.for("react.lazy"))throw Object.defineProperty(Error("`<Link legacyBehavior>` received a direct child that is either a Server Component, or JSX that was loaded with React.lazy(). This is not supported. Either remove legacyBehavior, or make the direct child a Client Component that renders the Link's `<a>` tag."),"__NEXT_ERROR_CODE",{value:"E863",enumerable:!1,configurable:!0});a=s.default.Children.only(n)}let q=L?a&&"object"==typeof a&&a.ref:j,B=s.default.useCallback(e=>(null!==M&&(E.current=(0,p.mountLinkInstance)(e,k,M,P,U,y)),()=>{E.current&&((0,p.unmountLinkForCurrentNavigation)(E.current),E.current=null),(0,p.unmountPrefetchableInstance)(e)}),[U,k,M,P,y]),V={ref:(0,u.useMergedRef)(B,q),onClick(t){L||"function"!=typeof R||R(t),L&&a.props&&"function"==typeof a.props.onClick&&a.props.onClick(t),!M||t.defaultPrevented||function(t,r,n,a,i,o,l){if("undefined"!=typeof window){let d,{nodeName:u}=t.currentTarget;if("A"===u.toUpperCase()&&((d=t.currentTarget.getAttribute("target"))&&"_self"!==d||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||t.nativeEvent&&2===t.nativeEvent.which)||t.currentTarget.hasAttribute("download"))return;if(!(0,m.isLocalURL)(r)){i&&(t.preventDefault(),location.replace(r));return}if(t.preventDefault(),l){let e=!1;if(l({preventDefault:()=>{e=!0}}),e)return}let{dispatchNavigateAction:c}=e.r(99781);s.default.startTransition(()=>{c(n||r,i?"replace":"push",o??!0,a.current)})}}(t,k,F,E,O,w,S)},onMouseEnter(e){L||"function"!=typeof x||x(e),L&&a.props&&"function"==typeof a.props.onMouseEnter&&a.props.onMouseEnter(e),M&&U&&(0,p.onNavigationIntent)(e.currentTarget,!0===C)},onTouchStart:function(e){L||"function"!=typeof $||$(e),L&&a.props&&"function"==typeof a.props.onTouchStart&&a.props.onTouchStart(e),M&&U&&(0,p.onNavigationIntent)(e.currentTarget,!0===C)}};return(0,c.isAbsoluteUrl)(F)?V.href=F:L&&!v&&("a"!==a.type||"href"in a.props)||(V.href=(0,f.addBasePath)(F)),i=L?s.default.cloneElement(a,V):(0,o.jsx)("a",{...D,...V,children:n}),(0,o.jsx)(b.Provider,{value:l,children:i})}e.r(84508);let b=(0,s.createContext)(p.IDLE_LINK_STATUS),E=()=>(0,s.useContext)(b);("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},56272,e=>{"use strict";let t=(0,e.i(75254).default)("square-check-big",[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckSquare",()=>t],56272)},37727,e=>{"use strict";let t=(0,e.i(75254).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["X",()=>t],37727)},88653,e=>{"use strict";e.i(47167);var t=e.i(43476),r=e.i(71645),n=e.i(31178),a=e.i(47414),i=e.i(74008),o=e.i(21476),s=e.i(72846),l=r,d=e.i(37806);function u(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}class c extends l.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,r=(0,s.isHTMLElement)(e)&&e.offsetWidth||0,n=this.props.sizeRef.current;n.height=t.offsetHeight||0,n.width=t.offsetWidth||0,n.top=t.offsetTop,n.left=t.offsetLeft,n.right=r-n.width-n.left}return null}componentDidUpdate(){}render(){return this.props.children}}function f({children:e,isPresent:n,anchorX:a,root:i}){let o=(0,l.useId)(),s=(0,l.useRef)(null),f=(0,l.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:p}=(0,l.useContext)(d.MotionConfigContext),m=function(...e){return r.useCallback(function(...e){return t=>{let r=!1,n=e.map(e=>{let n=u(e,t);return r||"function"!=typeof n||(r=!0),n});if(r)return()=>{for(let t=0;t<n.length;t++){let r=n[t];"function"==typeof r?r():u(e[t],null)}}}}(...e),e)}(s,e.props?.ref??e?.ref);return(0,l.useInsertionEffect)(()=>{let{width:e,height:t,top:r,left:l,right:d}=f.current;if(n||!s.current||!e||!t)return;let u="left"===a?`left: ${l}`:`right: ${d}`;s.current.dataset.motionPopId=o;let c=document.createElement("style");p&&(c.nonce=p);let m=i??document.head;return m.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${t}px !important;
            ${u}px !important;
            top: ${r}px !important;
          }
        `),()=>{m.contains(c)&&m.removeChild(c)}},[n]),(0,t.jsx)(c,{isPresent:n,childRef:s,sizeRef:f,children:l.cloneElement(e,{ref:m})})}let p=({children:e,initial:n,isPresent:i,onExitComplete:s,custom:l,presenceAffectsLayout:d,mode:u,anchorX:c,root:p})=>{let h=(0,a.useConstant)(m),g=(0,r.useId)(),y=!0,b=(0,r.useMemo)(()=>(y=!1,{id:g,initial:n,isPresent:i,custom:l,onExitComplete:e=>{for(let t of(h.set(e,!0),h.values()))if(!t)return;s&&s()},register:e=>(h.set(e,!1),()=>h.delete(e))}),[i,h,s]);return d&&y&&(b={...b}),(0,r.useMemo)(()=>{h.forEach((e,t)=>h.set(t,!1))},[i]),r.useEffect(()=>{i||h.size||!s||s()},[i]),"popLayout"===u&&(e=(0,t.jsx)(f,{isPresent:i,anchorX:c,root:p,children:e})),(0,t.jsx)(o.PresenceContext.Provider,{value:b,children:e})};function m(){return new Map}var h=e.i(64978);let g=e=>e.key||"";function y(e){let t=[];return r.Children.forEach(e,e=>{(0,r.isValidElement)(e)&&t.push(e)}),t}let b=({children:e,custom:o,initial:s=!0,onExitComplete:l,presenceAffectsLayout:d=!0,mode:u="sync",propagate:c=!1,anchorX:f="left",root:m})=>{let[b,E]=(0,h.usePresence)(c),N=(0,r.useMemo)(()=>y(e),[e]),T=c&&!b?[]:N.map(g),I=(0,r.useRef)(!0),A=(0,r.useRef)(N),v=(0,a.useConstant)(()=>new Map),O=(0,r.useRef)(new Set),[_,w]=(0,r.useState)(N),[R,x]=(0,r.useState)(N);(0,i.useIsomorphicLayoutEffect)(()=>{I.current=!1,A.current=N;for(let e=0;e<R.length;e++){let t=g(R[e]);T.includes(t)?(v.delete(t),O.current.delete(t)):!0!==v.get(t)&&v.set(t,!1)}},[R,T.length,T.join("-")]);let $=[];if(N!==_){let e=[...N];for(let t=0;t<R.length;t++){let r=R[t],n=g(r);T.includes(n)||(e.splice(t,0,r),$.push(r))}return"wait"===u&&$.length&&(e=$),x(y(e)),w(N),null}let{forceRender:L}=(0,r.useContext)(n.LayoutGroupContext);return(0,t.jsx)(t.Fragment,{children:R.map(e=>{let r=g(e),n=(!c||!!b)&&(N===R||T.includes(r));return(0,t.jsx)(p,{isPresent:n,initial:(!I.current||!!s)&&void 0,custom:o,presenceAffectsLayout:d,mode:u,root:m,onExitComplete:n?void 0:()=>{if(O.current.has(r)||(O.current.add(r),!v.has(r)))return;v.set(r,!0);let e=!0;v.forEach(t=>{t||(e=!1)}),e&&(L?.(),x(A.current),c&&E?.(),l&&l())},anchorX:f,children:e},r)})})};e.s(["AnimatePresence",()=>b],88653)},2874,e=>{"use strict";var t=e.i(43476),r=e.i(71645),n=e.i(22016),a=e.i(18566);let i=(0,e.i(75254).default)("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]]);var o=e.i(37727),s=e.i(56272),l=e.i(46932),d=e.i(88653),u=e.i(19455),c=e.i(75157),f=e.i(86909);function p(){let[e,p]=r.useState(!1),[m,h]=r.useState(!1),g=(0,a.usePathname)();r.useEffect(()=>{(async()=>{try{let e=await f.authClient.getSession();h(!!e?.data?.session)}catch{h(!1)}})()},[g]);let y=async()=>{try{await f.authClient.signOut(),window.location.href="/"}catch(e){console.error("Logout failed:",e)}},b=[{href:"/",label:"Home"},...m?[{href:"/tasks",label:"Tasks"}]:[]];return(0,t.jsxs)("nav",{className:"sticky top-0 z-50 w-full border-b border-border/50 bg-background/95 backdrop-blur-md supports-[backdrop-filter]:bg-background/80 shadow-lg",children:[(0,t.jsx)("div",{className:"absolute top-0 left-0 right-0 h-0.5 bg-gradient-to-r from-transparent via-primary to-transparent"}),(0,t.jsx)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex h-16 md:h-18 items-center justify-between",children:[(0,t.jsxs)(n.default,{href:"/",className:"flex items-center gap-2 md:gap-3 group",children:[(0,t.jsx)(l.motion.div,{className:"rounded-lg bg-gradient-to-br from-primary to-blue-600 p-2 md:p-2.5 shadow-lg",whileHover:{scale:1.05,rotate:5},whileTap:{scale:.95},transition:{type:"spring",stiffness:300},children:(0,t.jsx)(s.CheckSquare,{className:"h-5 w-5 md:h-6 md:w-6 text-white"})}),(0,t.jsx)("span",{className:"text-xl md:text-2xl font-bold bg-gradient-to-r from-primary to-blue-600 bg-clip-text text-transparent",children:"TaskFlow"})]}),(0,t.jsx)("div",{className:"hidden md:flex md:items-center md:gap-6",children:b.map(e=>(0,t.jsxs)(n.default,{href:e.href,className:(0,c.cn)("text-sm font-medium transition-colors hover:text-primary relative py-2",g===e.href?"text-primary":"text-muted-foreground"),children:[e.label,g===e.href&&(0,t.jsx)(l.motion.div,{layoutId:"navbar-indicator",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-primary",transition:{type:"spring",stiffness:380,damping:30}})]},e.href))}),(0,t.jsx)("div",{className:"hidden md:flex md:items-center md:gap-3",children:m?(0,t.jsx)(l.motion.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,t.jsx)(u.Button,{onClick:y,variant:"outline",size:"sm",className:"border-2 hover:border-primary transition-all",children:"Logout"})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.motion.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,t.jsx)(u.Button,{asChild:!0,variant:"ghost",size:"sm",className:"hover:bg-primary/10",children:(0,t.jsx)(n.default,{href:"/login",children:"Login"})})}),(0,t.jsx)(l.motion.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,t.jsx)(u.Button,{asChild:!0,size:"sm",className:"shadow-lg hover:shadow-xl",children:(0,t.jsx)(n.default,{href:"/register",children:"Sign Up"})})})]})}),(0,t.jsx)(l.motion.button,{onClick:()=>p(!e),className:"md:hidden rounded-lg p-2 hover:bg-accent transition-all duration-200","aria-label":"Toggle menu",whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,t.jsx)(d.AnimatePresence,{mode:"wait",children:e?(0,t.jsx)(l.motion.div,{initial:{rotate:-90,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:90,opacity:0},transition:{duration:.2},children:(0,t.jsx)(o.X,{className:"h-6 w-6 text-foreground"})},"close"):(0,t.jsx)(l.motion.div,{initial:{rotate:90,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:-90,opacity:0},transition:{duration:.2},children:(0,t.jsx)(i,{className:"h-6 w-6 text-foreground"})},"menu")})})]})}),(0,t.jsx)(d.AnimatePresence,{children:e&&(0,t.jsx)(l.motion.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3,ease:"easeInOut"},className:"md:hidden border-t border-border/50 bg-background/95 backdrop-blur-md shadow-lg",children:(0,t.jsxs)("div",{className:"container mx-auto px-4 py-5 space-y-2",children:[b.map((e,r)=>(0,t.jsx)(l.motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2,delay:.05*r},children:(0,t.jsx)(n.default,{href:e.href,onClick:()=>p(!1),className:(0,c.cn)("block px-4 py-3 rounded-lg text-base font-medium transition-all duration-200",g===e.href?"bg-gradient-to-r from-primary to-blue-600 text-white shadow-lg":"text-muted-foreground hover:bg-accent hover:text-accent-foreground active:scale-[0.98]"),children:e.label})},e.href)),(0,t.jsx)("div",{className:"pt-4 mt-2 border-t space-y-2",children:m?(0,t.jsx)(u.Button,{onClick:()=>{y(),p(!1)},variant:"outline",className:"w-full",children:"Logout"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.Button,{asChild:!0,variant:"ghost",className:"w-full",onClick:()=>p(!1),children:(0,t.jsx)(n.default,{href:"/login",children:"Login"})}),(0,t.jsx)(u.Button,{asChild:!0,className:"w-full",onClick:()=>p(!1),children:(0,t.jsx)(n.default,{href:"/register",children:"Sign Up"})})]})})]})})})]})}e.s(["Navbar",()=>p],2874)},18211,e=>{e.v(t=>Promise.all(["static/chunks/2a98a62b18664d6d.js"].map(t=>e.l(t))).then(()=>t(73869)))},53241,e=>{e.v(t=>Promise.all(["static/chunks/49aaa797b6901417.js"].map(t=>e.l(t))).then(()=>t(54937)))},69382,e=>{e.v(t=>Promise.all(["static/chunks/3419554a596af36e.js"].map(t=>e.l(t))).then(()=>t(71516)))},58233,e=>{e.v(t=>Promise.all(["static/chunks/40d071358970bb1d.js"].map(t=>e.l(t))).then(()=>t(94535)))}]);