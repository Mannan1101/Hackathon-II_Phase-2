{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/middleware.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport type { NextRequest } from \"next/server\";\n\n/**\n * Protected route middleware for Next.js App Router.\n *\n * Redirects unauthenticated users to /login when accessing protected routes.\n * Protected routes: /tasks and any other authenticated pages.\n * Public routes: /, /login, /register, /api/auth/*\n */\nexport async function middleware(request: NextRequest) {\n  const { pathname } = request.nextUrl;\n\n  // Define public routes that don't require authentication\n  const publicRoutes = [\"/\", \"/login\", \"/register\"];\n  const isPublicRoute = publicRoutes.includes(pathname);\n  const isAuthRoute = pathname.startsWith(\"/api/auth\");\n\n  // Allow public routes and auth API routes\n  if (isPublicRoute || isAuthRoute) {\n    return NextResponse.next();\n  }\n\n  // Check for authentication token in cookies\n  // Better Auth stores the session token in a cookie named \"better-auth.session_token\"\n  const sessionToken = request.cookies.get(\"better-auth.session_token\");\n\n  // If no session token, redirect to login\n  if (!sessionToken) {\n    const loginUrl = new URL(\"/login\", request.url);\n    // Add redirect parameter to return user to original destination after login\n    loginUrl.searchParams.set(\"redirect\", pathname);\n    return NextResponse.redirect(loginUrl);\n  }\n\n  // User is authenticated, allow access\n  return NextResponse.next();\n}\n\n/**\n * Configure which routes this middleware should run on.\n *\n * Matcher configuration:\n * - Runs on all routes except static files, images, and Next.js internals\n * - Protects /tasks and other authenticated routes\n * - Allows public routes through for authentication check\n */\nexport const config = {\n  matcher: [\n    /*\n     * Match all request paths except:\n     * - _next/static (static files)\n     * - _next/image (image optimization files)\n     * - favicon.ico (favicon file)\n     * - public files (images, etc.)\n     */\n    \"/((?!_next/static|_next/image|favicon.ico|.*\\\\.(?:svg|png|jpg|jpeg|gif|webp)$).*)\",\n  ],\n};\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;;AAUO,eAAe,WAAW,OAAoB;IACnD,MAAM,EAAE,QAAQ,EAAE,GAAG,QAAQ,OAAO;IAEpC,yDAAyD;IACzD,MAAM,eAAe;QAAC;QAAK;QAAU;KAAY;IACjD,MAAM,gBAAgB,aAAa,QAAQ,CAAC;IAC5C,MAAM,cAAc,SAAS,UAAU,CAAC;IAExC,0CAA0C;IAC1C,IAAI,iBAAiB,aAAa;QAChC,OAAO,gMAAY,CAAC,IAAI;IAC1B;IAEA,4CAA4C;IAC5C,qFAAqF;IACrF,MAAM,eAAe,QAAQ,OAAO,CAAC,GAAG,CAAC;IAEzC,yCAAyC;IACzC,IAAI,CAAC,cAAc;QACjB,MAAM,WAAW,IAAI,IAAI,UAAU,QAAQ,GAAG;QAC9C,4EAA4E;QAC5E,SAAS,YAAY,CAAC,GAAG,CAAC,YAAY;QACtC,OAAO,gMAAY,CAAC,QAAQ,CAAC;IAC/B;IAEA,sCAAsC;IACtC,OAAO,gMAAY,CAAC,IAAI;AAC1B;AAUO,MAAM,SAAS;IACpB,SAAS;QACP;;;;;;KAMC,GACD;KACD;AACH"}}]
}